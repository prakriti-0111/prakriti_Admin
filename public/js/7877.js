(self.webpackChunk=self.webpackChunk||[]).push([[7877],{45862:(t,e,a)=>{"use strict";a.d(e,{Px:()=>l,gN:()=>d,jv:()=>n,k0:()=>c});var s=a(80325),i=a(47092),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/categories".concat(t)).then((t=>{t.data.success&&e({type:i.YE,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.post("/superadmin/categories/store",t).then((t=>{e({type:i.tU,payload:t.data})})).catch((t=>{}))},d=(t,e)=>a=>{s.A.post("/superadmin/categories/update/".concat(t),e).then((t=>{a({type:i.x4,payload:t.data})})).catch((t=>{}))},c=(t,e)=>a=>{s.A.delete("/superadmin/categories/delete/".concat(t),e).then((t=>{a({type:i.RD,payload:t.data})})).catch((t=>{}))}},16078:(t,e,a)=>{"use strict";a.d(e,{Tz:()=>l,Xs:()=>d,ef:()=>o,pe:()=>n,uA:()=>c});var s=a(80325),i=a(34364),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/employees".concat(t)).then((t=>{t.data.success&&e({type:i.Rk,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.post("/superadmin/employees/store",t).then((t=>{e({type:i.wR,payload:t.data})})).catch((t=>{}))},d=(t,e)=>(e=e||"",a=>{s.A.get("/superadmin/employees/fetch/".concat(t,"?role_id=").concat(e)).then((t=>{t.data.success&&a({type:i.xQ,payload:t.data.data})})).catch((t=>{}))}),c=(t,e)=>a=>{s.A.post("/superadmin/employees/update/".concat(t),e).then((t=>{a({type:i.SV,payload:t.data})})).catch((t=>{}))},o=(t,e)=>a=>{s.A.delete("/superadmin/employees/delete/".concat(t),e).then((t=>{a({type:i.W8,payload:t.data})})).catch((t=>{}))}},39167:(t,e,a)=>{"use strict";a.d(e,{$A:()=>c,Af:()=>n,P3:()=>d,Y$:()=>l});var s=a(80325),i=a(59385),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/materials".concat(t)).then((t=>{t.data.success&&e({type:i.Vf,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.post("/superadmin/materials/store",t).then((t=>{e({type:i.O6,payload:t.data})})).catch((t=>{}))},d=(t,e)=>a=>{s.A.post("/superadmin/materials/update/".concat(t),e).then((t=>{a({type:i.oH,payload:t.data})})).catch((t=>{}))},c=(t,e)=>a=>{s.A.delete("/superadmin/materials/delete/".concat(t),e).then((t=>{a({type:i.Yq,payload:t.data})})).catch((t=>{}))}},17525:(t,e,a)=>{"use strict";a.d(e,{Fu:()=>d,Gu:()=>l,KC:()=>n,XH:()=>o,Zt:()=>u,d6:()=>c});var s=a(80325),i=a(5795),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/product".concat(t)).then((t=>{t.data.success&&e({type:i.LP,payload:t.data.data})})).catch((t=>{}))}),l=t=>(t=(0,r.x0)(t,!0),t=>{s.A.get("/superadmin/product/create").then((e=>{e.data.success&&t({type:i.xq,payload:e.data.data})})).catch((t=>{}))}),d=t=>e=>{s.A.post("/superadmin/product/store",t).then((t=>{e({type:i.If,payload:t.data})})).catch((t=>{}))},c=t=>e=>{s.A.get("/superadmin/product/view/".concat(t)).then((t=>{t.data.success&&e({type:i.De,payload:t.data.data})})).catch((t=>{}))},o=(t,e)=>a=>{s.A.post("/superadmin/product/update/".concat(t),e).then((t=>{a({type:i.q,payload:t.data})})).catch((t=>{}))},u=(t,e)=>a=>{s.A.delete("/superadmin/product/delete/".concat(t),e).then((t=>{a({type:i.uH,payload:t.data})})).catch((t=>{}))}},26777:(t,e,a)=>{"use strict";a.d(e,{$A:()=>u,GS:()=>_,I:()=>h,O7:()=>o,bG:()=>c,i$:()=>x,iI:()=>m,rP:()=>p,wf:()=>l,xR:()=>d,y7:()=>n});var s=a(80325),i=a(70239),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/purchases".concat(t)).then((t=>{t.data.success&&e({type:i.rZ,payload:t.data.data})})).catch((t=>{}))}),l=(t,e)=>s.A.post("/superadmin/purchases-on-approve/status/".concat(t),e),d=t=>e=>{s.A.post("/superadmin/purchases/store",t).then((t=>{e({type:i.UA,payload:t.data})})).catch((t=>{}))},c=t=>e=>{s.A.get("/superadmin/purchases/view/".concat(t)).then((t=>{console.log(t.data.data),t.data.success&&e({type:i.Xe,payload:t.data.data})})).catch((t=>{}))},o=t=>e=>{s.A.get("/superadmin/purchases/edit/".concat(t)).then((t=>{console.log(t.data.data),t.data.success&&e({type:i.Xe,payload:t.data.data})})).catch((t=>{}))},u=(t,e)=>a=>{s.A.post("/superadmin/purchases/update/".concat(t),e).then((t=>{a({type:i.YK,payload:t.data})})).catch((t=>{}))},p=(t,e)=>a=>{s.A.delete("/superadmin/purchases/delete/".concat(t),e).then((t=>{a({type:i.Mx,payload:t.data})})).catch((t=>{}))},h=()=>s.A.get("/superadmin/purchases/new-invoice-number"),m=(t,e)=>s.A.post("/superadmin/purchases/return/"+t,e),_=t=>s.A.get("/superadmin/purchases/edit/".concat(t)),x=t=>(t=(0,r.x0)(t,!0),s.A.get("/superadmin/purchases-products".concat(t)))},91875:(t,e,a)=>{"use strict";a.d(e,{bV:()=>d,jf:()=>l,k$:()=>n,ld:()=>c});var s=a(80325),i=a(84805),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/return-sales".concat(t)).then((t=>{t.data.success&&e({type:i.g,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.get("/superadmin/return-sales/view/".concat(t)).then((t=>{t.data.success&&e({type:i.C,payload:t.data.data})})).catch((t=>{}))},d=t=>s.A.get("/superadmin/return-sales/view/".concat(t)),c=(t,e)=>s.A.post("/superadmin/return-sales/update-status/"+t,e)},65991:(t,e,a)=>{"use strict";a.d(e,{Oz:()=>o,QD:()=>l,lh:()=>c,mO:()=>n,xq:()=>d});var s=a(80325),i=a(38193),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/sizes".concat(t)).then((t=>{t.data.success&&e({type:i.lD,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.post("/superadmin/sizes/store",t).then((t=>{e({type:i.Q5,payload:t.data})})).catch((t=>{}))},d=(t,e)=>a=>{s.A.post("/superadmin/sizes/update/".concat(t),e).then((t=>{a({type:i.Ud,payload:t.data})})).catch((t=>{}))},c=(t,e)=>a=>{s.A.delete("/superadmin/sizes/delete/".concat(t),e).then((t=>{a({type:i.i3,payload:t.data})})).catch((t=>{}))},o=t=>(t=(0,r.x0)(t,!0),s.A.get("/superadmin/sizes".concat(t)))},25917:(t,e,a)=>{"use strict";a.d(e,{F6:()=>u,Ls:()=>l,ME:()=>n,Qi:()=>p,Rf:()=>h,VH:()=>c,pC:()=>d,xm:()=>o});var s=a(80325),i=a(11275),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/stocks".concat(t)).then((t=>{t.data.success&&e({type:i.GX,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.get("/superadmin/stocks/view/".concat(t)).then((t=>{t.data.success&&e({type:i.$N,payload:t.data.data})})).catch((t=>{}))},d=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/stocks/products".concat(t)).then((t=>{t.data.success&&e({type:i.XY,payload:t.data.data})})).catch((t=>{}))}),c=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/stocks/product-details".concat(t)).then((t=>{t.data.success&&e({type:i.xj,payload:t.data.data})})).catch((t=>{}))}),o=async t=>await s.A.post("/superadmin/stocks/check-certificate-exist",t),u=async t=>(t=(0,r.x0)(t,!0),await s.A.get("/superadmin/stocks/stock-price-by-category".concat(t))),p=async t=>(t=(0,r.x0)(t,!0),await s.A.get("/superadmin/cart/checkdetail".concat(t))),h=async t=>await s.A.post("/superadmin/stocks/return-stock/move-to-stock",t)},12027:(t,e,a)=>{"use strict";a.d(e,{G4:()=>d,KL:()=>c,RG:()=>o,x6:()=>l,xi:()=>n});var s=a(80325),i=a(55250),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/sub-categories".concat(t)).then((t=>{t.data.success&&e({type:i.po,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.post("/superadmin/sub-categories/store",t).then((t=>{e({type:i.qP,payload:t.data})})).catch((t=>{}))},d=(t,e)=>a=>{s.A.post("/superadmin/sub-categories/update/".concat(t),e).then((t=>{a({type:i.qz,payload:t.data})})).catch((t=>{}))},c=(t,e)=>a=>{s.A.delete("/superadmin/sub-categories/delete/".concat(t),e).then((t=>{a({type:i.wn,payload:t.data})})).catch((t=>{}))},o=t=>(t=(0,r.x0)(t,!0),s.A.get("/superadmin/sub-categories".concat(t)))},50398:(t,e,a)=>{"use strict";a.d(e,{E6:()=>o,Sk:()=>c,Zd:()=>d,tY:()=>n,vX:()=>l});var s=a(80325),i=a(69484),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/suppliers".concat(t)).then((t=>{t.data.success&&e({type:i.Dp,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.post("/superadmin/suppliers/store",t).then((t=>{e({type:i.Yz,payload:t.data})})).catch((t=>{}))},d=t=>e=>{s.A.get("/superadmin/suppliers/fetch/".concat(t)).then((t=>{t.data.success&&e({type:i.p6,payload:t.data.data})})).catch((t=>{}))},c=(t,e)=>a=>{s.A.post("/superadmin/suppliers/update/".concat(t),e).then((t=>{a({type:i.cm,payload:t.data})})).catch((t=>{}))},o=(t,e)=>a=>{s.A.delete("/superadmin/suppliers/delete/".concat(t),e).then((t=>{a({type:i.yO,payload:t.data})})).catch((t=>{}))}},37972:(t,e,a)=>{"use strict";a.d(e,{GR:()=>d,Jp:()=>n,YN:()=>c,t3:()=>l});var s=a(80325),i=a(12710),r=a(45892);const n=t=>(t=(0,r.x0)(t,!0),e=>{s.A.get("/superadmin/units".concat(t)).then((t=>{t.data.success&&e({type:i.OA,payload:t.data.data})})).catch((t=>{}))}),l=t=>e=>{s.A.post("/superadmin/units/store",t).then((t=>{t.data.success&&e({type:i.h3,payload:t.data})})).catch((t=>{}))},d=(t,e)=>a=>{s.A.post("/superadmin/units/update/".concat(t),e).then((t=>{t.data.success&&a({type:i.Zf,payload:t.data})})).catch((t=>{}))},c=(t,e)=>a=>{s.A.delete("/superadmin/units/delete/".concat(t),e).then((t=>{t.data.success&&a({type:i.NW,payload:t.data})})).catch((t=>{}))}},77422:(t,e,a)=>{"use strict";a.d(e,{A:()=>At});var s=a(63696),i=a(52821),r=a(55482),n=a(61095),l=a(45271),d=a(21249),c=a(74487),o=a(66593),u=a(36122),p=a(41795),h=a(66107),m=a(26365),_=a(78976),x=a(49746),g=a(32690),j=a(13007),y=a(72839),A=a(47998),f=a(11505),b=a(95624),v=a(65469),N=a(79765),C=a(58792),F=a(68215),P=a(45892),k=a(88441),w=a(26777),V=a(16078),S=a(50398),I=a(17525),D=a(37972),L=a(25917),W=a(39167),q=a(65991),z=a(37001),M=a(51449),R=a(27218),X=a(50977),O=(a(66098),a(89429)),T=a(29443),Y=a(52805),E=a(79859),G=a(43191),Q=a(15164),U=a(79731),$=a(37046),B=a(98993),H=a(73947),K=a(10228),Z=a(45166),J=a(2598),tt=a(25606),et=a(24019),at=a(17243),st=a.n(at),it=a(70239),rt=a(42689),nt=a.n(rt),lt=a(55250),dt=a(5795),ct=a(12027),ot=a(45862),ut=a(67955),pt=a(66095),ht=a(66282),mt=a(91875),_t=a(79636),xt=a(85748),gt=a(62540);function jt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}class yt extends s.Component{constructor(t){super(t),jt(this,"getNewInvoiceNumber",(async()=>{let t=await(0,w.I)();t.data.success&&this.updateFormValues(t.data.data.next_invoice,"invoice_number")})),jt(this,"loadProductsFromOnApprove",(async()=>{if(!(0,P.Im)(this.props.query.get("purchase_on_approve"))&&0!=this.props.query.get("purchase_on_approve")){let t=await(0,w.GS)(this.props.query.get("purchase_on_approve"));t.data.success&&this.setState({formValues:{...this.state.formValues,products:t.data.data.products,paid_amount:t.data.data.paid_amount?t.data.data.paid_amount:"",supplier_id:t.data.data.supplier_id}},(()=>{this.handleCalculateMainPrice(),setTimeout((()=>{this.handleSupplierChange({target:{value:t.data.data.supplier_id}})}),1e3)}))}})),jt(this,"loadReturnSale",(async()=>{if(!(0,P.Im)(this.props.query.get("return_sale"))&&0!=this.props.query.get("return_sale")){let t=await(0,mt.bV)(this.props.query.get("return_sale"));t.data.success&&this.setState({return_sale_data:t.data.data,formValues:{...this.state.formValues,paid_amount:t.data.data.return_amount_from_wallet>0?t.data.data.return_amount_from_wallet:this.state.formValues.paid_amount}})}})),jt(this,"initializeFormData",(()=>{let t={...this.state.formData},e=[];for(let a=0;a<t.products.length;a++)e.push({id:t.products[a].id,is_return:!1});let a=t.supplier_details;this.setState({formValues:t,return_products:e,supplier_details:{...a}},(()=>{setTimeout((()=>{this.getSupplierDetails()}),1e3)}))})),jt(this,"handleAddNewProduct",(()=>{(0,P.Im)(this.state.formValues.supplier_id)?this.props.enqueueSnackbar("Please select supplier for tax calculate.",{variant:"error"}):this.setState({productDialog:!0,...this.getDefaultProductFormData()})})),jt(this,"handleSupplierChange",(t=>{this.updateFormValues(t.target.value,"supplier_id");let e=st().filter(this.state.supplierList,{id:t.target.value}),a="",s=0;e.length&&(a=e[0].gst,this.state.isAssign||(s=e[0].advance_amount)),this.setState({supplier_gst_no:a,formValues:{...this.state.formValues,advance_amount:s}},(()=>{this.getSupplierDetails()}))})),jt(this,"handleDefaultChange",((t,e)=>{this.updateFormValues(t.target.value,e)})),jt(this,"updateFormValues",((t,e)=>{let a=this.state.formValues;a[e]=t,this.setState({formValues:a},(()=>{this.handleCalculateMainPrice()}))})),jt(this,"handleProductChange",((t,e)=>{this.updateProductFormValues(e,"product_id")})),jt(this,"handleProductFormDefaultChange",((t,e)=>{this.updateProductFormValues(t.target.value,e)})),jt(this,"handleSizeChange",((t,e)=>{this.updateProductFormValues(t.target.value,"size_id")})),jt(this,"handleWorkerChange",((t,e)=>{this.updateProductFormValues(t.target.value,"worker_id")})),jt(this,"updateProductFormValues",((t,e)=>{let a=this.state.productFormValues,s=this.state.sizeList,i=this.state.materialFormErros;a[e]=t;let r=this.state.change_default_material;if("product_id"==e){let e=st().filter(this.state.productList,{id:t}),n=[];if(i=[],e.length)for(let t of e[0].materials)n.push({id:0,material_id:t.id,material_name:t.name,weight:"",quantity:"",unit_id:t.unit_id,unit_name:t.unit_name,purities:t.purities,purity_id:"",rate:"",amount:"",weight_in_gram:""}),i.push({weight:!1,quantity:!1,purity_id:!1,unit_id:!1,rate:!1});a.materials=[...n],a.product_type=e.length?e[0].type:"",a.product_name=e.length?e[0].name:"",a.has_certificate=!!e.length&&!!e[0].certificates.length,a.tax_info=e.length?e[0].tax_info:null,a.product_making_charge_type=e.length?e[0].making_charge_type:"",a.product_making_charge=e.length?e[0].making_charge:0,s=e.length?e[0].sizes:[];let l=[...a.materials],d={...a},c=this.loadDefaultWeightQty(d,l);a.materials=[...c],r=!0}else if("size_id"==e){let e=st().filter(this.state.sizeList,{id:t});if(a.size_name=e.length?e[0].name:"",this.state.change_default_material){let t=[...a.materials],e={...a},s=this.loadDefaultWeightQty(e,t);a.materials=[...s]}}else if("material_id"==e){let e=st().filter(this.state.materialList,{id:t}),n=[];i=[],e.length&&(n.push({id:0,material_id:e[0].id,material_name:e[0].name,weight:"",quantity:"",unit_id:e[0].unit_id,unit_name:e[0].unit_name,purities:e[0].purities,purity_id:"",rate:"",amount:"",weight_in_gram:""}),i.push({weight:!1,quantity:!1,purity_id:!1,unit_id:!1,rate:!1})),a.materials=[...n],a.product_type="material",a.product_name=e.length?e[0].name:"",a.tax_info=null,a.product_making_charge_type="",a.product_making_charge=0,s=this.state.sizeList;let l=[...a.materials],d={...a},c=this.loadDefaultWeightQty(d,l);a.materials=[...c],r=!0}this.setState({productFormValues:a,sizeList:s,materialFormErros:i,change_default_material:r},(()=>{this.calculatePrice()}))})),jt(this,"loadDefaultWeightQty",((t,e)=>{let a={...t},s=[...e];if(!(0,P.Im)(a.product_id)){let t=st().filter(this.state.productList,{id:a.product_id});if(t.length){let e=t[0];if("material"==e.type)s[0]={...s[0],weight:e.size_materials[0].materials[0].weight},s[0]={...s[0],quantity:e.size_materials[0].materials[0].quantity},s[0]={...s[0],unit_id:e.size_materials[0].materials[0].unit_id},s[0]={...s[0],unit_name:e.size_materials[0].materials[0].unit_name};else if(!(0,P.Im)(a.size_id)){let t=st().filter(e.size_materials,{size_id:a.size_id});if(t.length){let e=t[0];for(let t=0;t<s.length;t++){let a=st().filter(e.materials,{material_id:s[t].material_id});a.length&&(s[t]={...s[t],weight:a[0].weight},s[t]={...s[t],quantity:a[0].quantity},s[t]={...s[t],unit_id:a[0].unit_id},s[t]={...s[t],unit_name:a[0].unit_name})}}}}}return s})),jt(this,"calculatePrice",(()=>{let t={...this.state.productFormValues},e=0,a=0,s=0,i=0;for(let a=0;a<t.materials.length;a++){t.materials[a].amount=t.materials[a].weight&&t.materials[a].rate?(0,P.XV)(parseFloat(t.materials[a].weight)*parseFloat(t.materials[a].rate)):0;let r=(0,P.Ax)(t.materials[a].unit_name,t.materials[a].weight);t.materials[a].weight_in_gram=r,e+=r,s+=t.materials[a].amount,i+=t.materials[a].quantity?parseInt(t.materials[a].quantity):0}let r=s,n=s+(t.making_charge?parseFloat(t.making_charge):0);(0,P.Im)(t.rep)||(n+=parseFloat(t.rep));let l=null,d=t.gst_type;t.tax_info&&(l=(0,P.D)(t.tax_info,n,this.state.supplier_gst_no),a=l?l.total:0,l&&(d=l.type));let c=l?l.cgst:0,o=l?l.sgst:0,u=l?l.igst:0;n+=a,t.total_weight=(0,P.sq)(e),t.rate=(0,P.XV)(s),t.sub_price=(0,P.XV)(r),t.tax=(0,P.XV)(a),t.total=(0,P.XV)(n),t.cgst_tax=(0,P.XV)(c),t.sgst_tax=(0,P.XV)(o),t.igst_tax=(0,P.XV)(u),t.gst_type=d,this.setState({productFormValues:t})})),jt(this,"getDefaultProductFormData",(()=>({productFormValues:{id:0,product_id:"",material_id:"",product_type:"",product_name:"",certificate_no:"",size_id:"",worker_id:"",size_name:"",materials:[],tax_info:null,total_weight:0,rate:0,sub_price:0,making_charge:0,rep:0,tax:0,cgst_tax:0,sgst_tax:0,igst_tax:0,total:0,product_making_charge_type:"",product_making_charge:"",category_id:"",sub_category_id:"",gst_type:"igst",has_certificate:!1},productFormErros:{material_id:!1,product_id:!1,certificate_no:!1,size_id:!1,worker_id:!1,category_id:!1,sub_category_id:!1},materialFormErros:[]}))),jt(this,"handleMaterialFormChange",((t,e,a)=>{let s={...this.state.productFormValues},i=[...s.materials];if(i[e]={...i[e],[a]:t.target.value},"unit_id"==a){let a=st().filter(this.state.unitList,{id:t.target.value});i[e]={...i[e],unit_name:a.length?a[0].name:""}}s.materials=[...i],this.setState({productFormValues:s},(()=>{this.calculatePrice()}))})),jt(this,"updateProductMakingCharge",(t=>{let e=this.state.productFormValues;e.making_charge=t.target.value;let a=0,s=t.target.value?parseFloat(t.target.value):0,i=e.sub_price?parseFloat(e.sub_price):0;i+=s,(0,P.Im)(e.rep)||(i+=parseFloat(e.rep));let r=null,n=e.gst_type;e.tax_info&&(r=(0,P.D)(e.tax_info,i,this.state.supplier_gst_no),a=r?r.total:0,r&&(n=r.type));let l=r?r.cgst:0,d=r?r.sgst:0,c=r?r.igst:0;i+=a,e.tax=(0,P.XV)(a),e.total=(0,P.XV)(i),e.cgst_tax=(0,P.XV)(l),e.sgst_tax=(0,P.XV)(d),e.igst_tax=(0,P.XV)(c),e.gst_type=n,this.setState({productFormValues:e})})),jt(this,"handleProductDialogClose",((t,e)=>{e&&"backdropClick"==e||this.setState({productDialog:!1})})),jt(this,"handleProductDelete",(t=>{this.setState({deletingIndex:t,deleteDialogOpen:!0})})),jt(this,"handleProductSubmit",(async()=>{if(!this.productFormValidate()){let t=await(0,L.xm)({certificate_no:this.state.productFormValues.certificate_no});if(t.data.success&&t.data.data.is_exist)return this.props.enqueueSnackbar("Certificate # is duplicate.",{variant:"error"});let e={...this.state.formValues},a={...this.state.productFormValues};e.products,this.setState({formValues:{...e,products:this.state.formValues.products.concat([a])},productFormValues:{...a,certificate_no:"",size_id:""},change_default_material:!1},(()=>{this.handleCalculateMainPrice()})),this.props.enqueueSnackbar("Product added successfully.",{variant:"success"})}})),jt(this,"productFormValidate",(()=>{let t=this.state.productFormValues,e=this.state.productFormErros,a=this.state.materialFormErros,s=!1;"product"==this.state.formValues.type?(0,P.Im)(t.product_id)?(e.product_id=!0,s=!0):e.product_id=!1:(0,P.Im)(t.material_id)?(e.material_id=!0,s=!0):e.material_id=!1,"material"!=t.product_type&&t.has_certificate?((0,P.Im)(t.certificate_no)?(e.certificate_no=!0,s=!0):e.certificate_no=!1,(0,P.Im)(t.size_id)?(e.size_id=!0,s=!0):e.size_id=!1):(e.certificate_no=!1,e.size_id=!1),t.product_type,t.materials.length||(s=!0);for(let e=0;e<t.materials.length;e++)(0,P.Im)(t.materials[e].weight)?(a[e].weight=!0,s=!0):a[e].weight=!1,(0,P.Im)(t.materials[e].purity_id)?(a[e].purity_id=!0,s=!0):a[e].purity_id=!1,(0,P.Im)(t.materials[e].purity_id)?(a[e].purity_id=!0,s=!0):a[e].purity_id=!1,(0,P.Im)(t.materials[e].unit_id)?(a[e].unit_id=!0,s=!0):a[e].unit_id=!1,(0,P.Im)(t.materials[e].rate)?(a[e].rate=!0,s=!0):a[e].rate=!1;if(!(0,P.Im)(t.certificate_no)&&"material"!=t.product_type)for(let e=0;e<this.state.formValues.products.length;e++)if(t.certificate_no==this.state.formValues.products[e].certificate_no){s=!0,this.props.enqueueSnackbar("Certificate # is duplicate.",{variant:"error"});break}return this.setState({productFormErros:e,materialFormErros:a}),s})),jt(this,"handleDialogClose",(()=>{this.setState({deleteDialogOpen:!1,deletingIndex:0})})),jt(this,"returnDialogClose",(()=>{this.setState({returnDialogOpen:!1})})),jt(this,"handleDeleteConfirm",(()=>{let t=this.state.formValues;t.products.splice(this.state.deletingIndex,1),this.setState({formValues:t,deleteDialogOpen:!1},(()=>{this.handleCalculateMainPrice()}))})),jt(this,"handleCalculateMainPrice",(()=>{let t=this.state.formValues,e=(this.state.return_products,0),a=0,s=0,i=0,r=0,n=0,l=0,d=0,c=0,o=0,u=0;for(let i=0;i<t.products.length;i++)e+=parseFloat(t.products[i].sub_price)+parseFloat(t.products[i].making_charge)+(t.products[i].rep?parseFloat(t.products[i].rep):0),a+=t.products[i].tax?parseFloat(t.products[i].tax):0,s+=parseFloat(t.products[i].total),d+=t.products[i].cgst_tax?parseFloat(t.products[i].cgst_tax):0,c+=t.products[i].sgst_tax?parseFloat(t.products[i].sgst_tax):0,o+=t.products[i].igst_tax?parseFloat(t.products[i].igst_tax):0,u+=parseFloat(t.products[i].sub_price),u+=parseFloat(t.products[i].making_charge);e=(0,P.XV)(e,!0),a=(0,P.XV)(a,!0),s=(0,P.XV)(s,!0),(0,P.Im)(t.discount)||(i=parseFloat(t.discount)),r=(0,P.XV)(s-i-this.state.return_amount,!0),(0,P.Im)(t.paid_amount)||(n=parseFloat(t.paid_amount));let p=t.advance_amount?parseFloat(t.advance_amount):0;l=(0,P.XV)(r-n,!0),t.pay_from_advance&&(l=p>l?0:(0,P.XV)(l-p,!0)),t.taxable_amount=e,t.tax=a,t.total_amount=s,t.total_payable=r,t.due_amount=l,t.cgst_tax=(0,P.XV)(d,!0),t.sgst_tax=(0,P.XV)(c,!0),t.igst_tax=(0,P.XV)(o,!0),t.total_sub_total=(0,P.XV)(u),this.setState({formValues:t})})),jt(this,"handleSubmit",(()=>{let t=this.state.formValues,e=this.state.return_sale_data,a=this.formValidate();if(0==t.products.length)return this.props.enqueueSnackbar("Please add at least one product",{variant:"error"}),!1;if(!a&&t.products.length)if(this.setState({submitting:!0}),this.state.isCreateFrom){let t={...this.state.formValues,on_approval:0==this.props.query.get("purchase_on_approval"),on_approval_id:this.props.query.get("purchase_on_approve"),return_sale_id:e?e.id:""};this.props.actions.purchaseStore(t)}else this.props.actions.purchaseUpdate(this.state.formData.id,this.state.formValues)})),jt(this,"formValidate",(()=>{let t=this.state.formErros,e=this.state.formValues,a=!1;return(0,P.Im)(e.supplier_id)?(t.supplier_id=!0,a=!0):t.supplier_id=!1,(0,P.Im)(e.invoice_date)?(t.invoice_date=!0,a=!0):t.invoice_date=!1,(0,P.Im)(e.due_date)?(t.due_date=!0,a=!0):t.due_date=!1,(0,P.Im)(e.total_payable)||(0,P.Im)(e.paid_amount)||parseFloat(e.paid_amount)>parseFloat(e.total_payable)&&(a=!0,this.props.enqueueSnackbar("Paid amount must be less than or equal to payable amount.",{variant:"error"})),this.setState({formErros:t}),a})),jt(this,"getSupplierDetails",(()=>{if(!(0,P.Im)(this.state.formValues.supplier_id)){let t=st().filter(this.state.supplierList,{id:this.state.formValues.supplier_id});t.length&&this.setState({supplier_details:{...this.state.supplier_details,name:(0,P.Im)(t[0].name)?"":t[0].name,company_name:(0,P.Im)(t[0].company_name)?"":t[0].company_name,mobile:(0,P.Im)(t[0].mobile)?"":t[0].mobile,city:(0,P.Im)(t[0].city)?"":t[0].city,gst:(0,P.Im)(t[0].gst)?"":t[0].gst,address:(0,P.Im)(t[0].address)?"":t[0].address,pincode:(0,P.Im)(t[0].pincode)?"":t[0].pincode}})}})),jt(this,"handleCategoryChange",(t=>{this.updateProductFormValues(t.target.value,"category_id"),(0,P.Im)(t.target.value)?this.props.dispatch({type:lt.nU}):this.props.actions.subCategoryList({all:1,category_id:t.target.value}),this.props.actions.materialList({all:1,category_id:t.target.value}),this.updateProductFormValues("","sub_category_id"),this.updateProductFormValues("","product_id"),this.props.dispatch({type:dt.rP}),"material"==this.state.formValues.type&&(t.target.value?this.loadSizeMaterialsForMaterial({category_id:t.target.value}):this.setState({sizeList:[]}))})),jt(this,"loadSizeMaterialsForMaterial",(async t=>{let e=await(0,q.Oz)({all:1,...t});e.data.success&&this.setState({sizeList:e.data.data.items})})),jt(this,"handleSubCategoryChange",(t=>{this.updateProductFormValues(t.target.value,"sub_category_id"),"material"==this.state.formValues.type?t.target.value?this.loadSizeMaterialsForMaterial({sub_category_id:t.target.value}):this.setState({sizeList:[]}):(this.props.actions.productList({all:1,sub_category_id:t.target.value,purity_price:1}),this.updateProductFormValues("","product_id"),this.props.dispatch({type:dt.rP}))})),jt(this,"handleCheckBox",((t,e)=>{let a=this.state.formValues.products,s=this.state.return_products;"material"!=a[e].product_type?(s[e].is_return=t.target.checked,this.setState({return_products:s},(()=>{this.calculateReturnAmount()}))):this.setState({materialReturnDialog:!0,actionProductIndex:e})})),jt(this,"handleReturn",(()=>{this.setState({returnDialogOpen:!0})})),jt(this,"handleReturnConfirm",(async()=>{let t=await(0,w.iI)(this.state.formData.id,{return_products:this.state.return_products,return_data:this.state.formValues,return_amount:this.state.return_amount,product_amount:this.state.product_amount,return_charge:this.state.return_charge,return_date:this.state.return_date,payment_type:this.state.payment_type,return_payment_mode:this.state.return_payment_mode,return_amount_from_wallet:(0,P.XV)(parseFloat(this.state.return_amount)-parseFloat(this.state.formValues.due_amount))});t.data.success?(this.props.actions.cartList(),this.props.enqueueSnackbar(t.data.message,{variant:"success"}),this.props.navigate((0,P.zr)((0,P.mA)(this.state.auth))+"/purchases")):this.props.enqueueSnackbar(t.data.message,{variant:"error"})})),jt(this,"handleReturnDialogClose",((t,e)=>{e&&"backdropClick"==e||this.setState({materialReturnDialog:!1})})),jt(this,"handleCancelReturn",(()=>{let{formValues:t,actionProductIndex:e,return_products:a}=this.state;t.products[e].materials[0].return_weight=0,t.products[e].materials[0].return_qty=0,a[e].is_return=!1,this.setState({return_products:a,formValues:t,materialReturnDialog:!1})})),jt(this,"handleReturnMaterialSubmit",(()=>{let{formValues:t,actionProductIndex:e}=this.state;const a=t.products[e];let s=!1;if(!a.materials[0].return_weight||parseFloat(a.materials[0].return_weight)>parseFloat(a.materials[0].avl_weight)?(s=!0,this.setState({return_weight_error:!0}),parseFloat(a.materials[0].return_weight)>parseFloat(a.materials[0].avl_weight)&&this.props.enqueueSnackbar("Weight can't be more than available weight.",{variant:"error"})):this.setState({return_weight_error:!1}),a.materials[0].return_qty&&parseFloat(a.materials[0].return_qty)>parseFloat(a.materials[0].avl_qty)?(s=!0,this.setState({return_qty_error:!0}),parseFloat(a.materials[0].return_qty)>parseFloat(a.materials[0].avl_qty)&&this.props.enqueueSnackbar("Quantity can't be more than available quantity.",{variant:"error"})):this.setState({return_qty_error:!1}),!s){let t=this.state.return_products;t[e].is_return=!0,this.setState({materialReturnDialog:!1,return_products:t},(()=>{this.calculateReturnAmount()}))}})),jt(this,"calculateReturnAmount",(()=>{let{formValues:t,actionProductIndex:e}=this.state,a=this.state.return_products,s=0,i=0,r=0;for(let e=0;e<a.length;e++)if(a[e].is_return)if("material"==t.products[e].product_type){let a=(0,P.XV)(parseFloat(t.products[e].materials[0].return_weight)*parseFloat(t.products[e].materials[0].rate)),n=t.have_return_charge&&parseFloat(t.products[e].return_charge_percent)>0?(0,P.XV)(a*parseFloat(t.products[e].return_charge_percent)/100):0;t.products[e].return_amount=a,t.products[e].return_charge=n,s+=a-n,i+=n,r+=a}else{let a=parseFloat(t.products[e].total),n=t.have_return_charge&&parseFloat(t.products[e].return_charge_percent)>0?a*parseFloat(t.products[e].return_charge_percent)/100:0;t.products[e].return_amount=a,t.products[e].return_charge=n,s+=a-n,i+=n,r+=a}this.setState({return_amount:(0,P.XV)(s,!0),product_amount:(0,P.XV)(r,!0),return_charge:(0,P.XV)(i,!0),formValues:t})})),jt(this,"handleReturnMaterial",((t,e)=>{let{formValues:a,actionProductIndex:s}=this.state;a.products[s].materials[0][e]=t,this.setState({formValues:a})})),jt(this,"hasReturn",(()=>{let t=!1;for(let e=0;e<this.state.return_products.length;e++)if(this.state.return_products[e].is_return){t=!0;break}return t})),jt(this,"setOpen",(t=>{let e=this.state.view_open;e[t]=!this.checkOpen(t),this.setState({view_open:e})})),jt(this,"checkOpen",(t=>{let e=this.state.view_open;return!(!(t in e)||!e[t])})),jt(this,"isMaterialFormDisabled",(()=>0==this.state.formValues.products.length&&!this.state.productFormValues.size_id&&"material"!=this.state.productFormValues.product_type)),jt(this,"handlePurchasTypeChange",(t=>{this.updateFormValues(t.target.value,"type"),this.updateFormValues([],"products"),this.setState({...this.getDefaultProductFormData()},(()=>{this.handleCalculateMainPrice()}))})),jt(this,"handleAdvance",(t=>{this.setState({formValues:{...this.state.formValues,pay_from_advance:t.target.checked}},(()=>{this.handleCalculateMainPrice()}))})),jt(this,"getMaterialPurity",((t,e,a)=>{if(!(0,P.Im)(a))return"(".concat(a,")");let s=st().filter(t,{id:e});return s.length?"(".concat(s[0].name,")"):""}));let e="formData"in this.props?this.props.formData:null;this.state={formData:e,isCreateFrom:!e,isReturnForm:this.props.isReturnForm,supplierList:this.props.supplierList,productList:this.props.productList,workerList:this.props.workerList,unitList:this.props.unitList,categoryList:this.props.categoryList,subCategoryList:this.props.subCategoryList,materialList:this.props.materialList,sizeList:[],materials:[],product_type:"",productDialog:!1,supplier_gst_no:"",formValues:{supplier_id:"",invoice_number:"",invoice_date:nt()().format("MM/DD/YYYY"),products:[],notes:"",payment_mode:"cash",transaction_no:"",cheque_no:"",taxable_amount:"",tax:"",cgst_tax:"",sgst_tax:"",igst_tax:"",total_amount:"",discount:"",total_payable:"",paid_amount:"",due_amount:"",due_date:"",total_sub_total:"",type:"product",advance_amount:0,pay_from_advance:!1},formErros:{supplier_id:!1,invoice_number:!1,invoice_date:!1,notes:!1,payment_mode:!1,transaction_no:!1,total_amount:!1,tax:!1,discount:!1,paid_amount:!1,due_date:!1},deleteDialogOpen:!1,deletingIndex:0,submitting:!1,...this.getDefaultProductFormData(),actionCalled:this.props.actionCalled,createSuccess:this.props.createSuccess,editSuccess:this.props.editSuccess,successMessage:this.props.successMessage,errorMessage:this.props.errorMessage,auth:this.props.auth,supplier_details:{name:"",mobile:"",gst:"",address:"",city:"",pincode:""},return_products:[],returnDialogOpen:!1,return_amount:0,product_amount:0,return_charge:0,materialReturnDialog:!1,actionProductIndex:0,return_weight_error:!1,return_qty_error:!1,view_open:{},return_date:nt()().format("MM/DD/YYYY"),change_default_material:!0,payment_type:"advance",return_payment_mode:"cash",return_sale_data:null},this.isSuperAdmin=(0,P.jm)()}componentDidMount(){this.props.actions.productList({all:1,purity_price:1}),this.props.actions.categoryList({all:1}),this.props.actions.supplierList({all:1}),this.props.actions.employeeList({all:1,role_id:10}),this.props.actions.unitList({all:1}),this.props.actions.materialList({all:1}),this.state.formData&&this.initializeFormData(),this.getNewInvoiceNumber(),this.loadProductsFromOnApprove(),this.loadReturnSale()}static getDerivedStateFromProps(t,e){let a={};return t.supplierList!==e.supplierList&&(a.supplierList=t.supplierList),t.productList!==e.productList&&(a.productList=t.productList),t.workerList!==e.workerList&&(a.workerList=t.workerList),t.unitList!==e.unitList&&(a.unitList=t.unitList),t.actionCalled!==e.actionCalled&&(a.actionCalled=t.actionCalled),t.createSuccess!==e.createSuccess&&(a.createSuccess=t.createSuccess),t.editSuccess!==e.editSuccess&&(a.editSuccess=t.editSuccess),t.successMessage!==e.successMessage&&(a.successMessage=t.successMessage),t.errorMessage!==e.errorMessage&&(a.errorMessage=t.errorMessage),t.auth!==e.auth&&(a.auth=t.auth),t.categoryList!==e.categoryList&&(a.categoryList=t.categoryList),t.subCategoryList!==e.subCategoryList&&(a.subCategoryList=t.subCategoryList),t.formData!==e.formData&&(a.formData=t.formData),t.isReturnForm!==e.isReturnForm&&(a.isReturnForm=t.isReturnForm),t.materialList!==e.materialList&&(a.materialList=t.materialList),a}componentDidUpdate(t){this.props.formData!=t.formData&&this.initializeFormData(),this.props.query.get("purchase_on_approve")!=t.query.get("purchase_on_approve")&&this.loadProductsFromOnApprove(),this.props.query.get("return_sale")!=t.query.get("return_sale")&&this.loadReturnSale(),this.state.actionCalled&&(this.state.isCreateFrom?this.state.createSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:it.q1}),0==this.props.query.get("purchase_on_approval")?this.props.navigate((0,P.zr)((0,P.mA)(this.state.auth))+"/purchase-on-approve"):this.props.navigate((0,P.zr)((0,P.mA)(this.state.auth))+"/purchases")):(this.setState({submitting:!1}),this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:it.q1})):this.state.editSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:it.q1}),this.props.navigate(-1)):(this.setState({submitting:!1}),this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:it.q1})))}render(){const{formValues:t,formErros:e,productFormValues:a,productFormErros:i,materialFormErros:r,submitting:k,actionProductIndex:w,return_sale_data:V}=this.state,S=t.products.length?t.products[w]:null;return console.log(a),(0,gt.jsxs)(n.A,{sx:{flexGrow:1,m:.5},className:"ratn-dialog-inner",children:[V?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"create-input",children:(0,gt.jsx)(d.A,{className:"rtn_accordion",children:(0,gt.jsx)(c.A,{expandIcon:(0,gt.jsx)(_t.A,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,gt.jsxs)(o.A,{children:["Return Sale # ",V.invoice_number," |"," ","".concat(V.user_name,", ").concat(V.user_mobile)," ","| ",V.return_date]})})})}):null,(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"tax-input loans_view p_view",children:[this.state.isCreateFrom?(0,gt.jsx)(l.Ay,{item:!0,xs:(t.supplier_id,12),md:t.supplier_id?4:6,className:"create-input",children:(0,gt.jsxs)(p.A,{fullWidth:!0,error:e.supplier_id,children:[(0,gt.jsx)(h.A,{children:"Supplier"}),(0,gt.jsxs)(m.A,{className:"input-inner non_disable_text",value:t.supplier_id,fullWidth:!0,label:"Supplier",onChange:this.handleSupplierChange,disabled:!this.state.isCreateFrom||!(0,P.Im)(this.props.query.get("purchase_on_approve")),children:[(0,gt.jsx)(_.A,{value:""}),this.state.supplierList.map(((t,e)=>(0,gt.jsxs)(_.A,{value:t.id,children:[t.name," "]},e)))]})]})}):(0,gt.jsx)(l.Ay,{item:!0,xs:(t.supplier_id,12),md:t.supplier_id?4:6,className:"create-input",children:(0,gt.jsx)(u.A,{label:"Supplier",variant:"outlined",fullWidth:!0,value:this.state.supplier_details.name,disabled:!0,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})}),t.supplier_id?(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,gt.jsx)(u.A,{label:"Owner Name",variant:"outlined",fullWidth:!0,value:this.state.supplier_details.name,disabled:!0,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,gt.jsx)(u.A,{label:"GST Number",variant:"outlined",fullWidth:!0,value:this.state.supplier_details.gst,disabled:!0,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,gt.jsx)(u.A,{label:"Mobile Number",variant:"outlined",fullWidth:!0,value:this.state.supplier_details.mobile,disabled:!0,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})})]}):null,t.supplier_id?null:(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:3,className:"create-input",children:(0,gt.jsx)(u.A,{label:"Invoice Number",variant:"outlined",fullWidth:!0,value:t.invoice_number,onChange:t=>this.handleDefaultChange(t,"invoice_number"),disabled:!this.state.isCreateFrom,InputLabelProps:{shrink:!0}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:(t.supplier_id,12),md:t.supplier_id?2:3,className:"p-invoice-date create-input",children:(0,gt.jsx)(U.$,{dateAdapter:Q.R,children:(0,gt.jsx)($.l,{label:"Invoice Date",value:t.invoice_date,inputFormat:"DD/MM/YYYY",onChange:t=>this.updateFormValues(t,"invoice_date"),disabled:!this.state.isCreateFrom,renderInput:t=>(0,gt.jsx)(u.A,{...t,error:e.invoice_date,InputProps:{className:"non_disable_text"}})})})}),t.supplier_id?(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"create-input",children:(0,gt.jsx)(u.A,{label:"Full Address",variant:"outlined",fullWidth:!0,value:this.state.supplier_details.address,disabled:!0,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,gt.jsx)(u.A,{label:"City",variant:"outlined",fullWidth:!0,value:this.state.supplier_details.city,disabled:!0,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,gt.jsx)(u.A,{label:"PinCode",variant:"outlined",fullWidth:!0,value:this.state.supplier_details.pincode,disabled:!0,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,gt.jsx)(u.A,{label:"Invoice Number",variant:"outlined",fullWidth:!0,value:t.invoice_number,onChange:t=>this.handleDefaultChange(t,"invoice_number"),disabled:!this.state.isCreateFrom,InputProps:{className:"non_disable_text"},InputLabelProps:{shrink:!0}})})]}):null]}),(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"loans_view tax-input",children:[(0,gt.jsxs)(l.Ay,{item:!0,xs:12,md:12,className:"p-add-product create-input",children:[(0,gt.jsxs)("h3",{className:"p_heading_list mb-0 mt-0",style:{position:"relative"},children:[this.state.isReturnForm?null:(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsxs)(p.A,{children:[(0,gt.jsx)(h.A,{children:"Purchase Type"}),(0,gt.jsxs)(m.A,{className:"input-inner non_disable_text",value:t.type,fullWidth:!0,label:"Purchase Type",onChange:this.handlePurchasTypeChange,disabled:!this.state.isCreateFrom,children:[(0,gt.jsx)(_.A,{value:"product",children:"Product"}),(0,gt.jsx)(_.A,{value:"material",children:"Material"})]})]}),(0,gt.jsx)(x.A,{variant:"contained",className:"add-button purchase_add_p",onClick:()=>this.handleAddNewProduct(),style:{width:"140px"},children:"Add Product"})]}),(0,gt.jsxs)("span",{className:"purchase_p_title",children:["Purchase"," ","product"==t.type?"Products":"Materials"]})]}),this.state.productDialog?(0,gt.jsxs)(n.A,{sx:{flexGrow:1,m:.5},children:[(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"loans_view tax-input p_view",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,gt.jsxs)(p.A,{fullWidth:!0,error:i.category_id,children:[(0,gt.jsx)(h.A,{children:"Category"}),(0,gt.jsxs)(m.A,{value:a.category_id,label:"Category",onChange:this.handleCategoryChange,defaultValue:"",children:[(0,gt.jsx)(_.A,{value:""}),this.state.categoryList.map(((t,e)=>(0,gt.jsx)(_.A,{value:t.id,children:t.name},e)))]})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsxs)(p.A,{fullWidth:!0,error:i.sub_category_id,children:[(0,gt.jsx)(h.A,{children:"Sub Category"}),(0,gt.jsxs)(m.A,{value:a.sub_category_id,label:"Sub Category",onChange:this.handleSubCategoryChange,defaultValue:"",children:[(0,gt.jsx)(_.A,{value:""}),this.state.subCategoryList.map(((t,e)=>(0,gt.jsx)(_.A,{value:t.id,children:t.name},e)))]})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:(a.product_type,12),md:(a.product_type,3),children:"product"==t.type?(0,gt.jsx)(g.A,{className:"autocomplete-selectbox",fullWidth:!0,options:this.state.productList,autoHighlight:!0,getOptionLabel:t=>t.name+" | "+t.product_code,renderOption:(t,e)=>(0,s.createElement)("li",{...t,key:e.id},e.name+" | "+e.product_code),renderInput:t=>(0,gt.jsx)(u.A,{...t,label:"Product",inputProps:{...t.inputProps,autoComplete:"new-password"},fullWidth:!0,error:i.product_id}),onChange:(t,e)=>{this.handleProductChange(t,e?e.id:"")}}):(0,gt.jsx)(g.A,{className:"autocomplete-selectbox",fullWidth:!0,options:this.state.materialList,autoHighlight:!0,getOptionLabel:t=>t.name,renderOption:(t,e)=>(0,s.createElement)("li",{...t,key:e.id},e.name),renderInput:t=>(0,gt.jsx)(u.A,{...t,label:"Material",inputProps:{...t.inputProps,autoComplete:"new-password"},fullWidth:!0,error:i.material_id}),onChange:(t,e)=>{this.updateProductFormValues(e?e.id:"","material_id")}})}),"material"!=a.product_type?(0,gt.jsxs)(gt.Fragment,{children:["material"!=a.product_type&&"material"!=t.type&&a.has_certificate?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"Certificate Number",variant:"outlined",fullWidth:!0,value:a.certificate_no,onChange:t=>this.handleProductFormDefaultChange(t,"certificate_no"),error:i.certificate_no})}):null,(0,gt.jsx)(l.Ay,{item:!0,xs:(a.product_type,2),children:(0,gt.jsxs)(p.A,{fullWidth:!0,error:i.size_id,children:[(0,gt.jsx)(h.A,{children:"Size"}),(0,gt.jsxs)(m.A,{value:a.size_id,label:"Size",onChange:this.handleSizeChange,defaultValue:"",children:[(0,gt.jsx)(_.A,{value:""}),this.state.sizeList.map(((t,e)=>(0,gt.jsx)(_.A,{value:t.id,children:t.name},e)))]})]})})]}):null]}),(0,gt.jsx)(l.Ay,{container:!0,spacing:2,className:"loans_view tax-input",children:(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"border-radius-0",children:(0,gt.jsx)(J.A,{component:et.A,children:(0,gt.jsxs)(B.A,{sx:{minWidth:650},"aria-label":"simple table",className:"ratn-table-add-wrapper",children:[(0,gt.jsx)(H.A,{className:"ratn-table-header",children:(0,gt.jsxs)(tt.A,{children:[(0,gt.jsx)(Z.A,{sx:{width:"170px"},children:"Material Name"}),(0,gt.jsx)(Z.A,{children:"Purity"}),(0,gt.jsx)(Z.A,{children:"Quantity"}),(0,gt.jsx)(Z.A,{children:"Weight"}),(0,gt.jsx)(Z.A,{children:"Unit"}),(0,gt.jsx)(Z.A,{children:"Rate"}),(0,gt.jsx)(Z.A,{children:"Amount"})]})}),(0,gt.jsx)(K.A,{className:"p-invoice-date",children:a.materials.map(((t,e)=>(0,gt.jsxs)(tt.A,{children:[(0,gt.jsx)(Z.A,{children:t.material_name}),(0,gt.jsx)(Z.A,{style:{minWidth:"150px"},children:(0,gt.jsxs)(p.A,{fullWidth:!0,error:r[e].purity_id,children:[(0,gt.jsx)(h.A,{children:"Purity"}),(0,gt.jsxs)(m.A,{value:t.purity_id,label:"Purity",onChange:t=>this.handleMaterialFormChange(t,e,"purity_id"),defaultValue:"",disabled:this.isMaterialFormDisabled(),children:[(0,gt.jsx)(_.A,{value:""}),t.purities.map(((t,e)=>(0,gt.jsxs)(_.A,{value:t.id,children:[t.name," ",t.mrp_display?(0,gt.jsxs)(gt.Fragment,{children:["(",(0,P.Pt)(t.mrp_display)," /"," ",t.unit_name,")"]}):""]},e)))]})]})}),(0,gt.jsx)(Z.A,{children:(0,gt.jsx)(u.A,{label:"Quantity",variant:"outlined",fullWidth:!0,value:t.quantity,onChange:t=>this.handleMaterialFormChange(t,e,"quantity"),error:r[e].quantity,disabled:this.isMaterialFormDisabled()})}),(0,gt.jsx)(Z.A,{children:(0,gt.jsx)(u.A,{label:"Weight",variant:"outlined",fullWidth:!0,value:t.weight,onChange:t=>this.handleMaterialFormChange(t,e,"weight"),error:r[e].weight,disabled:this.isMaterialFormDisabled()})}),(0,gt.jsx)(Z.A,{style:{minWidth:"150px"},children:(0,gt.jsxs)(p.A,{fullWidth:!0,error:r[e].unit_id,children:[(0,gt.jsx)(h.A,{children:"Unit"}),(0,gt.jsxs)(m.A,{value:t.unit_id,label:"Purity",onChange:t=>this.handleMaterialFormChange(t,e,"unit_id"),defaultValue:"",disabled:this.isMaterialFormDisabled(),children:[(0,gt.jsx)(_.A,{value:""}),this.state.unitList.map(((t,e)=>(0,gt.jsx)(_.A,{value:t.id,children:t.name},e)))]})]})}),(0,gt.jsx)(Z.A,{children:(0,gt.jsx)(u.A,{label:"Rate",variant:"outlined",fullWidth:!0,value:t.rate,onChange:t=>this.handleMaterialFormChange(t,e,"rate"),InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"})},error:r[e].rate,disabled:this.isMaterialFormDisabled()})}),(0,gt.jsx)(Z.A,{children:(0,gt.jsx)(u.A,{label:"Amount",variant:"outlined",fullWidth:!0,value:t.amount,disabled:!0,error:r[e].amount,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"})}})})]},e)))})]})})})}),(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"loans_view tax-input p_view",children:[a.materials.length>1?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"TOT.WT(IN GRAM)",variant:"outlined",fullWidth:!0,value:a.total_weight,disabled:!0})}):null,(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"SUB TOTAL",variant:"outlined",fullWidth:!0,value:a.sub_price,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"})}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"MAKING CHARGE",variant:"outlined",fullWidth:!0,value:a.making_charge,onChange:t=>this.updateProductMakingCharge(t),InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"})}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"REP/TRANS/ETC",variant:"outlined",fullWidth:!0,value:a.rep,onChange:t=>this.updateProductFormValues(t.target.value,"rep"),InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"})}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"TAX",variant:"outlined",fullWidth:!0,value:a.tax,disabled:!0,InputProps:{startAdornment:(0,gt.jsxs)(j.A,{position:"start",children:["igst"==a.gst_type?a.tax_info?a.tax_info.igst:"0":a.tax_info?a.tax_info.cgst+a.tax_info.sgst:"0"," ","% ₹"]})}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"TOTAL",variant:"outlined",fullWidth:!0,value:a.total,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"})}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,style:{paddingBottom:"15px"},children:(0,gt.jsxs)(y.A,{spacing:1,direction:"row",className:"ratn-footer-buttons",justifyContent:"flex-end",children:[(0,gt.jsx)(x.A,{variant:"contained",className:"conf-button",type:"button",onClick:this.handleProductSubmit,children:"Save"}),(0,gt.jsx)(x.A,{variant:"outlined",className:"close-button",onClick:this.handleProductDialogClose,children:"Cancel"})]})})]})]}):null,(0,gt.jsx)(J.A,{component:et.A,className:"ratn-table-wrapper mt-10 purchase-table",children:(0,gt.jsxs)(B.A,{sx:{minWidth:650},"aria-label":"simple table",className:"table-bordered",children:[(0,gt.jsx)(H.A,{className:"ratn-table-header p_view",children:(0,gt.jsxs)(tt.A,{children:[this.state.isReturnForm?(0,gt.jsx)(Z.A,{}):null,(0,gt.jsx)(Z.A,{children:"#"}),(0,gt.jsx)(Z.A,{children:"Product Name"}),(0,gt.jsx)(Z.A,{children:"Certificate No"}),(0,gt.jsx)(Z.A,{children:"Total Weight"}),(0,gt.jsx)(Z.A,{children:"Size"}),(0,gt.jsx)(Z.A,{children:"Material Details &"}),(0,gt.jsx)(Z.A,{children:"Amount"}),(0,gt.jsx)(Z.A,{children:"Making"}),(0,gt.jsx)(Z.A,{children:"ETC"}),(0,gt.jsx)(Z.A,{children:"Sub Total"}),(0,gt.jsx)(Z.A,{children:"Tax"}),(0,gt.jsx)(Z.A,{children:"Total"}),this.state.isReturnForm?null:(0,gt.jsx)(Z.A,{sx:{width:"60px"},children:"Action"})]})}),(0,gt.jsxs)(K.A,{children:[t.products.map(((t,e)=>(0,gt.jsxs)(s.Fragment,{children:[(0,gt.jsxs)(tt.A,{className:"is_return"in t&&t.is_return?"strike_through":"",children:[this.state.isReturnForm?(0,gt.jsxs)(Z.A,{children:[t.is_return?null:(0,gt.jsx)(A.A,{onChange:t=>this.handleCheckBox(t,e),checked:this.state.return_products[e].is_return}),!t.is_return&&"material"==t.product_type&&t.materials[0].return_weight?(0,gt.jsx)(f.A,{"aria-label":"expand row",size:"small",onClick:()=>this.setOpen(t.id),children:this.checkOpen(t.id)?(0,gt.jsx)(ht.A,{}):(0,gt.jsx)(pt.A,{})}):ut.Y5]}):null,(0,gt.jsx)(Z.A,{children:e+1<10?"0"+(e+1):e+1}),(0,gt.jsx)(Z.A,{children:t.product_name}),(0,gt.jsx)(Z.A,{children:t.certificate_no?t.certificate_no:"-"}),(0,gt.jsx)(Z.A,{children:1==t.materials.length?(0,gt.jsx)(gt.Fragment,{children:this.state.isReturnForm?(0,P.sq)(parseFloat(t.materials[0].avl_weight)-parseFloat(t.materials[0].return_weight?t.materials[0].return_weight:0))+" "+t.materials[0].unit_name:(0,P.sq)(t.materials[0].weight)+" "+t.materials[0].unit_name}):t.total_weight+" Gram"}),(0,gt.jsx)(Z.A,{children:t.size_name?t.size_name:"-"}),(0,gt.jsx)(Z.A,{children:t.materials.map(((t,e)=>(0,gt.jsxs)("p",{className:"purchase-material m-0",style:{color:"#000"},children:[t.material_name,this.getMaterialPurity(t.purities,t.purity_id,t.purity_name)," "," "," ",this.state.isReturnForm&&t.quantity?(0,gt.jsxs)(gt.Fragment,{children:[t.avl_qty-parseInt(t.return_qty?t.return_qty:0)," ","Qty "]}):null," ",t.weight,"   ",t.unit_name,"   x  "," ",t.rate]},e)))}),(0,gt.jsx)(Z.A,{children:t.materials.map(((t,e)=>(0,gt.jsxs)("p",{className:"purchase-material m-0",style:{color:"#000"},children:["=   ",t.amount]},e)))}),(0,gt.jsx)(Z.A,{children:(0,P.XV)(t.making_charge)}),(0,gt.jsx)(Z.A,{children:(0,P.XV)(t.rep)}),(0,gt.jsx)(Z.A,{children:(0,P.XV)(parseFloat(t.sub_price)+parseFloat(t.making_charge))}),(0,gt.jsx)(Z.A,{children:(0,P.XV)(t.tax)}),(0,gt.jsx)(Z.A,{children:(0,P.XV)(t.total)}),this.state.isReturnForm?null:(0,gt.jsx)(Z.A,{children:(0,gt.jsx)(f.A,{className:"del-icon",color:"error",component:"label",onClick:()=>this.handleProductDelete(e),children:(0,gt.jsx)(z.A,{})})})]}),this.state.isReturnForm&&1==t.materials.length&&this.checkOpen(t.id)?(0,gt.jsx)(tt.A,{className:"table-inner-row",children:(0,gt.jsx)(Z.A,{style:{paddingBottom:0,paddingTop:0},colSpan:12,children:(0,gt.jsx)(b.A,{in:this.checkOpen(t.id),timeout:"auto",unmountOnExit:!0,children:(0,gt.jsxs)(n.A,{sx:{margin:1},children:[(0,gt.jsx)(o.A,{variant:"h6",gutterBottom:!0,component:"div"}),(0,gt.jsxs)(B.A,{size:"medium","aria-label":"purchases",children:[(0,gt.jsx)(H.A,{children:(0,gt.jsxs)(tt.A,{className:"pur-details-inner-table",children:[(0,gt.jsx)(Z.A,{children:"Quantity"}),(0,gt.jsx)(Z.A,{children:"Weight"}),(0,gt.jsx)(Z.A,{children:"Unit"})]})}),(0,gt.jsx)(K.A,{className:"pur-details-table-body",children:(0,gt.jsxs)(tt.A,{children:[(0,gt.jsx)(Z.A,{scope:"row",children:t.materials[0].return_qty}),(0,gt.jsxs)(Z.A,{children:[" ",t.materials[0].return_weight]}),(0,gt.jsx)(Z.A,{children:t.materials[0].unit_name})]})})]})]})})})}):null]},e))),t.products.length>0?(0,gt.jsxs)(tt.A,{children:[(0,gt.jsx)(Z.A,{colSpan:this.state.isReturnForm?9:8}),(0,gt.jsx)(Z.A,{children:(0,gt.jsxs)("b",{children:["Sub Total",(0,gt.jsx)("br",{}),(0,P.XV)(t.total_sub_total)]})}),(0,gt.jsx)(Z.A,{children:(0,gt.jsxs)("b",{children:["Tax",(0,gt.jsx)("br",{}),(0,P.XV)(t.tax)]})}),(0,gt.jsx)(Z.A,{colSpan:"2",children:(0,gt.jsxs)("b",{children:["Total Amount",(0,gt.jsx)("br",{}),(0,P.XV)(t.total_amount)]})})]}):null]})]})})]}),(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:8,className:"create-input pt-0",children:(0,gt.jsx)(l.Ay,{container:!0,spacing:2,className:"mob_responsive_purchase_input",children:(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,style:{paddingTop:"5px"},children:(0,gt.jsx)(v.A,{className:"description purchase-description",minRows:3,placeholder:"Notes",style:{width:"100%"},value:t.notes,onChange:t=>this.handleDefaultChange(t,"notes")})})})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:4,className:"create-input pt-0",style:{paddingRight:"16px"},children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"mob_responsive_purchase_input",children:[this.hasReturn()?(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Return Product Amt"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:this.state.product_amount,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}),t.have_return_charge?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Return Charge"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:this.state.return_charge,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}):null,(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:(0,gt.jsx)("b",{children:"Return Amount"})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:this.state.return_amount,onChange:t=>this.setState({return_amount:t.target.value}),InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})})]}):(0,gt.jsxs)(gt.Fragment,{children:[t.cgst_tax>0?(0,gt.jsx)(l.Ay,{item:!0,xs:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"CGST Amount"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{fullWidth:!0,value:t.cgst_tax,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}):null,t.sgst_tax>0?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"SGST Amount"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{fullWidth:!0,value:t.sgst_tax,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}):null,t.igst_tax>0?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"IGST Amount"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.igst_tax,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}):null,(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Tax Amount"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.tax,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Total Amount"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.total_amount,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Cash Discount"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.discount,onChange:t=>this.handleDefaultChange(t,"discount"),disabled:this.state.isReturnForm,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Total Payable"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.total_payable,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}),t.advance_amount>0?(0,gt.jsx)(l.Ay,{item:!0,xs:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,columnSpacing:{xs:1,sm:2,md:2},className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:4,md:6,className:"text-right pt-0",children:(0,gt.jsx)("span",{className:"tax-text",children:" Advance Amount "})}),(0,gt.jsx)(l.Ay,{item:!0,xs:8,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.advance_amount,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text",endAdornment:(0,gt.jsx)(A.A,{checked:t.pay_from_advance,onChange:this.handleAdvance}),disabled:!0}})})]})}):null]}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Payment Mode"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(p.A,{fullWidth:!0,className:"ft-amount",children:(0,gt.jsxs)(m.A,{className:"input-inner",value:t.payment_mode,fullWidth:!0,onChange:t=>this.handleDefaultChange(t,"payment_mode"),children:[(0,gt.jsx)(_.A,{value:"cash",children:"Cash"}),(0,gt.jsx)(_.A,{value:"cheque",disabled:!!V,children:"Cheque"}),(0,gt.jsx)(_.A,{value:"imps_neft",children:"NEFT/IMPS/UPI"}),(0,gt.jsx)(_.A,{value:"online",children:"Online"})]})})})]})}),"imps_neft"==t.payment_mode||"upi"==t.payment_mode?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Transaction No"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.transaction_no,onChange:t=>this.handleDefaultChange(t,"transaction_no")})})]})}):null,"cheque"==t.payment_mode?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Cheque No"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.cheque_no,onChange:t=>this.handleDefaultChange(t,"cheque_no")})})]})}):null,this.hasReturn()?(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"p-invoice-date create-input pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Return Date"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(U.$,{dateAdapter:Q.R,children:(0,gt.jsx)($.l,{className:"ft-amount",value:this.state.return_date,fullWidth:!0,inputFormat:"DD/MM/YYYY",onChange:t=>this.setState({return_date:t}),renderInput:t=>(0,gt.jsx)(u.A,{fullWidth:!0,...t})})})})]})}):(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Pay Now"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.paid_amount,onChange:t=>this.handleDefaultChange(t,"paid_amount"),error:e.paid_amount,disabled:!this.state.isCreateFrom||!!V,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Due Amount"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(u.A,{className:"ft-amount",fullWidth:!0,value:t.due_amount,disabled:!0,InputProps:{startAdornment:(0,gt.jsx)(j.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"p-invoice-date create-input pt-5",children:(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,className:"display_center",children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"text-right pt-0",children:"Due Date"}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"pt-0",children:(0,gt.jsx)(U.$,{dateAdapter:Q.R,children:(0,gt.jsx)($.l,{className:"ft-amount",value:t.due_date,fullWidth:!0,inputFormat:"DD/MM/YYYY",onChange:t=>this.updateFormValues(t,"due_date"),renderInput:t=>(0,gt.jsx)(u.A,{fullWidth:!0,...t,error:e.due_date}),disabled:!this.state.isCreateFrom})})})]})})]})]})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,gt.jsxs)(y.A,{spacing:1,direction:"row",className:"ratn-footer-buttons",justifyContent:"flex-end",style:{paddingRight:"16px",paddingBottom:"16px"},children:[this.state.isReturnForm?(0,gt.jsx)(gt.Fragment,{children:this.state.return_products.length?(0,gt.jsx)(x.A,{variant:"outlined",type:"button",className:"conf-button",onClick:this.handleReturn,children:"Return"}):null}):(0,gt.jsx)(R.A,{className:"conf-button",variant:"contained",type:"button",loading:k,disabled:k,onClick:this.handleSubmit,children:0==this.props.query.get("purchase_on_approval")?"Purchase On Approval":"Submit"}),k?null:(0,gt.jsx)(x.A,{variant:"outlined",className:"close-button",onClick:()=>this.props.navigate(-1),children:"Cancel"})]})})]})]}),(0,gt.jsxs)(O.A,{open:this.state.deleteDialogOpen,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"xs",className:"ratn-dialog-wrapper",children:[(0,gt.jsx)(G.A,{children:"Delete"}),(0,gt.jsx)(Y.A,{children:(0,gt.jsx)(E.A,{id:"alert-dialog-slide-description",children:"Are you sure want to delete this record?"})}),(0,gt.jsx)(T.A,{children:(0,gt.jsxs)(y.A,{spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,gt.jsx)(x.A,{variant:"outlined",onClick:this.handleDialogClose,children:"Cancel"}),(0,gt.jsx)(x.A,{variant:"contained",type:"button",onClick:this.handleDeleteConfirm,children:"Yes, Confirm"})]})})]}),(0,gt.jsxs)(O.A,{open:this.state.returnDialogOpen,onClose:this.returnDialogClose,fullWidth:!0,maxWidth:"xs",className:"ratn-dialog-wrapper",children:[(0,gt.jsx)(G.A,{children:"Return"}),(0,gt.jsxs)(Y.A,{children:[(0,gt.jsx)(E.A,{id:"alert-dialog-slide-description",children:"Are you sure want to return these product(s)?"}),this.state.formValues.due_amount&&parseFloat(this.state.return_amount)>parseFloat(this.state.formValues.due_amount)?(0,gt.jsxs)(gt.Fragment,{children:[(0,gt.jsx)(p.A,{children:(0,gt.jsxs)(N.A,{row:!0,name:"row-radio-buttons-group",value:this.state.payment_type,onChange:t=>this.setState({payment_type:t.target.value}),children:[(0,gt.jsx)(C.A,{value:"advance",control:(0,gt.jsx)(F.A,{}),label:"Payment move to advance "+(0,P.Pt)(parseFloat(this.state.return_amount)-parseFloat(this.state.formValues.due_amount))}),(0,gt.jsx)(C.A,{value:"return",control:(0,gt.jsx)(F.A,{}),label:"Payment Return "+(0,P.Pt)(parseFloat(this.state.return_amount)-parseFloat(this.state.formValues.due_amount))})]})}),"return"==this.state.payment_type?(0,gt.jsxs)(p.A,{fullWidth:!0,children:[(0,gt.jsx)(h.A,{children:"Payment Mode"}),(0,gt.jsxs)(m.A,{className:"input-inner",value:this.state.return_payment_mode,fullWidth:!0,label:"Payment Mode",onChange:t=>this.setState({return_payment_mode:t.target.value}),children:[(0,gt.jsx)(_.A,{value:"cash",children:"Cash"}),(0,gt.jsx)(_.A,{value:"cheque",children:"Cheque"}),(0,gt.jsx)(_.A,{value:"imps_neft",children:"NEFT/IMPS/UPI"}),(0,gt.jsx)(_.A,{value:"online",children:"Online"})]})]}):null]}):null]}),(0,gt.jsx)(T.A,{children:(0,gt.jsxs)(y.A,{spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,gt.jsx)(x.A,{variant:"outlined",onClick:this.returnDialogClose,children:"Cancel"}),(0,gt.jsx)(x.A,{variant:"contained",type:"button",onClick:this.handleReturnConfirm,children:"Yes, Confirm"})]})})]}),(0,gt.jsxs)(O.A,{open:this.state.materialReturnDialog,onClose:this.handleReturnDialogClose,fullWidth:!0,maxWidth:"md",className:"ratn-dialog-wrapper",children:[(0,gt.jsx)(G.A,{children:"Return Product"}),(0,gt.jsxs)(Y.A,{children:[(0,gt.jsx)(E.A,{}),(0,gt.jsx)(n.A,{sx:{flexGrow:1,m:.5},children:S?(0,gt.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,gt.jsx)(u.A,{label:"Name",variant:"outlined",fullWidth:!0,value:S.product_name,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"Purity",variant:"outlined",fullWidth:!0,value:S.materials[0].purity_name,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"Avl Qty",variant:"outlined",fullWidth:!0,value:S.materials[0].avl_qty,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,gt.jsx)(u.A,{label:"Avl Weight",variant:"outlined",fullWidth:!0,value:S.materials[0].avl_weight,disabled:!0,InputProps:{className:"non_disable_text",endAdornment:(0,gt.jsx)(j.A,{position:"start",children:S.materials[0].unit_name})}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,gt.jsx)(u.A,{label:"Quantity",variant:"outlined",fullWidth:!0,value:S.materials[0].return_qty,onChange:t=>this.handleReturnMaterial(t.target.value,"return_qty"),error:this.state.return_qty_error})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,gt.jsx)(u.A,{label:"Weight",variant:"outlined",fullWidth:!0,value:S.materials[0].return_weight,onChange:t=>this.handleReturnMaterial(t.target.value,"return_weight"),error:this.state.return_weight_error,InputProps:{className:"non_disable_text",endAdornment:(0,gt.jsx)(j.A,{position:"start",children:S.materials[0].unit_name})}})}),(0,gt.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,gt.jsxs)(y.A,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,gt.jsx)(x.A,{variant:"outlined",onClick:this.handleReturnDialogClose,children:"Close"}),this.state.return_products.length&&this.state.return_products[w].is_return?(0,gt.jsx)(x.A,{variant:"outlined",onClick:this.handleCancelReturn,children:"Cancel Return"}):null,(0,gt.jsx)(x.A,{variant:"contained",type:"button",onClick:this.handleReturnMaterialSubmit,children:"Save"})]})})]}):null})]})]})]})}}const At=(0,X.A)((0,M.Gh)((0,i.connect)((t=>({supplierList:t.superadmin.supplier.items,productList:t.superadmin.product.items,materialList:t.superadmin.material.items,workerList:t.superadmin.employee.items,unitList:t.superadmin.unit.items,actionCalled:t.superadmin.purchase.actionCalled,createSuccess:t.superadmin.purchase.createSuccess,editSuccess:t.superadmin.purchase.editSuccess,successMessage:t.superadmin.purchase.successMessage,errorMessage:t.superadmin.purchase.errorMessage,auth:t.auth,categoryList:t.superadmin.category.items,subCategoryList:t.superadmin.subCategory.items})),(t=>({dispatch:t,actions:(0,k.bindActionCreators)({purchaseStore:w.xR,purchaseUpdate:w.$A,supplierList:S.tY,productList:I.KC,employeeList:V.pe,unitList:D.Jp,categoryList:ot.jv,subCategoryList:ct.xi,materialList:W.Af,cartList:xt.nu},t)})))((0,r.zW)({form:"PurchaseForm"})(yt))))},61738:(t,e,a)=>{var s={"./af":99805,"./af.js":99805,"./ar":94449,"./ar-dz":44468,"./ar-dz.js":44468,"./ar-kw":63480,"./ar-kw.js":63480,"./ar-ly":64197,"./ar-ly.js":64197,"./ar-ma":62180,"./ar-ma.js":62180,"./ar-sa":50230,"./ar-sa.js":50230,"./ar-tn":72808,"./ar-tn.js":72808,"./ar.js":94449,"./az":45865,"./az.js":45865,"./be":86627,"./be.js":86627,"./bg":60901,"./bg.js":60901,"./bm":63179,"./bm.js":63179,"./bn":61966,"./bn-bd":90969,"./bn-bd.js":90969,"./bn.js":61966,"./bo":6317,"./bo.js":6317,"./br":46474,"./br.js":46474,"./bs":35961,"./bs.js":35961,"./ca":77270,"./ca.js":77270,"./cs":61564,"./cs.js":61564,"./cv":43239,"./cv.js":43239,"./cy":92366,"./cy.js":92366,"./da":82453,"./da.js":82453,"./de":76601,"./de-at":47408,"./de-at.js":47408,"./de-ch":8101,"./de-ch.js":8101,"./de.js":76601,"./dv":96080,"./dv.js":96080,"./el":12655,"./el.js":12655,"./en-au":46836,"./en-au.js":46836,"./en-ca":22086,"./en-ca.js":22086,"./en-gb":2103,"./en-gb.js":2103,"./en-ie":35964,"./en-ie.js":35964,"./en-il":74379,"./en-il.js":74379,"./en-in":50765,"./en-in.js":50765,"./en-nz":71502,"./en-nz.js":71502,"./en-sg":1152,"./en-sg.js":1152,"./eo":90050,"./eo.js":90050,"./es":43350,"./es-do":49338,"./es-do.js":49338,"./es-mx":51326,"./es-mx.js":51326,"./es-us":89947,"./es-us.js":89947,"./es.js":43350,"./et":18231,"./et.js":18231,"./eu":28512,"./eu.js":28512,"./fa":59083,"./fa.js":59083,"./fi":25059,"./fi.js":25059,"./fil":32607,"./fil.js":32607,"./fo":83369,"./fo.js":83369,"./fr":27390,"./fr-ca":66711,"./fr-ca.js":66711,"./fr-ch":6152,"./fr-ch.js":6152,"./fr.js":27390,"./fy":62419,"./fy.js":62419,"./ga":3002,"./ga.js":3002,"./gd":82533,"./gd.js":82533,"./gl":16557,"./gl.js":16557,"./gom-deva":48944,"./gom-deva.js":48944,"./gom-latn":25387,"./gom-latn.js":25387,"./gu":17462,"./gu.js":17462,"./he":39237,"./he.js":39237,"./hi":49617,"./hi.js":49617,"./hr":36544,"./hr.js":36544,"./hu":60341,"./hu.js":60341,"./hy-am":41388,"./hy-am.js":41388,"./id":75251,"./id.js":75251,"./is":41146,"./is.js":41146,"./it":37891,"./it-ch":80007,"./it-ch.js":80007,"./it.js":37891,"./ja":73727,"./ja.js":73727,"./jv":5198,"./jv.js":5198,"./ka":28974,"./ka.js":28974,"./kk":37308,"./kk.js":37308,"./km":57786,"./km.js":57786,"./kn":84807,"./kn.js":84807,"./ko":61584,"./ko.js":61584,"./ku":61906,"./ku.js":61906,"./ky":79190,"./ky.js":79190,"./lb":7396,"./lb.js":7396,"./lo":38503,"./lo.js":38503,"./lt":33010,"./lt.js":33010,"./lv":5192,"./lv.js":5192,"./me":51944,"./me.js":51944,"./mi":56492,"./mi.js":56492,"./mk":2934,"./mk.js":2934,"./ml":61463,"./ml.js":61463,"./mn":8377,"./mn.js":8377,"./mr":78733,"./mr.js":78733,"./ms":18030,"./ms-my":39445,"./ms-my.js":39445,"./ms.js":18030,"./mt":55887,"./mt.js":55887,"./my":87228,"./my.js":87228,"./nb":48294,"./nb.js":48294,"./ne":19559,"./ne.js":19559,"./nl":20600,"./nl-be":78796,"./nl-be.js":78796,"./nl.js":20600,"./nn":9570,"./nn.js":9570,"./oc-lnc":5662,"./oc-lnc.js":5662,"./pa-in":87101,"./pa-in.js":87101,"./pl":56118,"./pl.js":56118,"./pt":29198,"./pt-br":7203,"./pt-br.js":7203,"./pt.js":29198,"./ro":45565,"./ro.js":45565,"./ru":33315,"./ru.js":33315,"./sd":58473,"./sd.js":58473,"./se":11258,"./se.js":11258,"./si":98798,"./si.js":98798,"./sk":26404,"./sk.js":26404,"./sl":7057,"./sl.js":7057,"./sq":25718,"./sq.js":25718,"./sr":45363,"./sr-cyrl":20478,"./sr-cyrl.js":20478,"./sr.js":45363,"./ss":37260,"./ss.js":37260,"./sv":42231,"./sv.js":42231,"./sw":27104,"./sw.js":27104,"./ta":47493,"./ta.js":47493,"./te":57705,"./te.js":57705,"./tet":94457,"./tet.js":94457,"./tg":22727,"./tg.js":22727,"./th":32206,"./th.js":32206,"./tk":33419,"./tk.js":33419,"./tl-ph":77243,"./tl-ph.js":77243,"./tlh":60016,"./tlh.js":60016,"./tr":87020,"./tr.js":87020,"./tzl":8026,"./tzl.js":8026,"./tzm":78537,"./tzm-latn":87899,"./tzm-latn.js":87899,"./tzm.js":78537,"./ug-cn":40818,"./ug-cn.js":40818,"./uk":48478,"./uk.js":48478,"./ur":77893,"./ur.js":77893,"./uz":89133,"./uz-latn":20311,"./uz-latn.js":20311,"./uz.js":89133,"./vi":52179,"./vi.js":52179,"./x-pseudo":92455,"./x-pseudo.js":92455,"./yo":3310,"./yo.js":3310,"./zh-cn":27244,"./zh-cn.js":27244,"./zh-hk":40076,"./zh-hk.js":40076,"./zh-mo":62305,"./zh-mo.js":62305,"./zh-tw":88588,"./zh-tw.js":88588};function i(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id=61738}}]);