"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4840],{53628:(e,s,t)=>{t.d(s,{b9:()=>r,ec:()=>o});var a=t(80325),i=t(43454);const r=e=>s=>{a.A.post("/admin/edit-profile",e).then((e=>{s({type:i.y$,payload:e.data})})).catch((e=>{}))},o=e=>s=>{a.A.post("/admin/change-password",e).then((e=>{s({type:i.gp,payload:e.data})})).catch((e=>{}))}},24840:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(63696),i=t(52821),r=t(55482),o=t(61095),l=t(45271),n=t(36122),c=t(72839),u=t(49746),h=t(45892),m=t(88441),d=t(53628),p=t(51449),f=t(27218),b=t(50977),g=t(43454),x=t(42722),C=t(62540);function v(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}class A extends a.Component{constructor(e){super(e),v(this,"handleDefaultChange",((e,s)=>{this.updateFormValues(e.target.value,s)})),v(this,"updateFormValues",((e,s)=>{let t=this.state.formValues;t[s]=e,this.setState({formValues:t})})),v(this,"handleSubmit",(()=>{this.formValidate()||(this.setState({submitting:!0}),this.props.actions.updateEditProfile(this.state.formValues))})),v(this,"formValidate",(()=>{let e=this.state.formErros,s=this.state.formValues,t=!1;return(0,h.Im)(s.name)?(e.name=!0,t=!0):e.name=!1,(0,h.Im)(s.mobile)?(e.mobile=!0,t=!0):e.mobile=!1,this.setState({formErros:e}),t})),this.state={auth:this.props.auth,submitting:!1,formValues:{name:this.props.auth.user.name,mobile:this.props.auth.user.mobile,email:this.props.auth.user.email},formErros:{name:!1,mobile:!1,email:!1},actionCalled:this.props.actionCalled,editProfileSuccess:this.props.editProfileSuccess,successMessage:this.props.successMessage,errorMessage:this.props.errorMessage}}componentDidMount(){this.props.auth&&this.props.auth.user&&this.setState({formValues:{...this.state.formValues,name:this.props.auth.user.name,mobile:this.props.auth.user.mobile,email:this.props.auth.user.email}})}static getDerivedStateFromProps(e,s){let t={};return e.actionCalled!==s.actionCalled&&(t.actionCalled=e.actionCalled),e.editProfileSuccess!==s.editProfileSuccess&&(t.editProfileSuccess=e.editProfileSuccess),e.successMessage!==s.successMessage&&(t.successMessage=e.successMessage),e.errorMessage!==s.errorMessage&&(t.errorMessage=e.errorMessage),t}componentDidUpdate(){this.state.actionCalled&&(this.state.editProfileSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:x.Rq,payload:{name:this.state.formValues.name,mobile:this.state.formValues.mobile,email:this.state.formValues.email}})):this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:g.Ew}),this.setState({submitting:!1}))}render(){const{formValues:e,formErros:s,submitting:t}=this.state;return(0,C.jsx)(o.A,{sx:{flexGrow:1,m:.5},className:"ratn-dialog-inner",children:(0,C.jsxs)(l.Ay,{container:!0,spacing:2,columnSpacing:{xs:1,sm:2,md:2},className:"tax-input loans_view p_view ",children:[(0,C.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:(0,C.jsx)(n.A,{label:"Name",variant:"outlined",fullWidth:!0,value:e.name,onChange:e=>this.handleDefaultChange(e,"name"),error:s.name})}),(0,C.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:(0,C.jsx)(n.A,{label:"Mobile",variant:"outlined",fullWidth:!0,value:e.mobile,onChange:e=>this.handleDefaultChange(e,"mobile"),error:s.mobile})}),(0,C.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:(0,C.jsx)(n.A,{label:"Email",variant:"outlined",fullWidth:!0,value:e.email,onChange:e=>this.handleDefaultChange(e,"email"),error:s.email})}),(0,C.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:(0,C.jsxs)(c.A,{spacing:1,direction:"row",className:"ratn-footer-buttons",justifyContent:"flex-end",children:[(0,C.jsx)(f.A,{className:"conf-button",variant:"contained",type:"button",loading:t,disabled:t,onClick:this.handleSubmit,children:"Update"}),t?null:(0,C.jsx)(u.A,{variant:"outlined",className:"close-button",onClick:()=>this.props.navigate((0,h.zr)((0,h.mA)(this.state.auth))+"/dashboard"),children:"Cancel"})]})})]})})}}(0,b.A)((0,p.Gh)((0,i.connect)((e=>({auth:e.auth,actionCalled:e.admin.profile.actionCalled,editProfileSuccess:e.admin.profile.editProfileSuccess,successMessage:e.admin.profile.successMessage,errorMessage:e.admin.profile.errorMessage})),(e=>({dispatch:e,actions:(0,m.bindActionCreators)({updateEditProfile:d.b9},e)})))((0,r.zW)({form:"EditProfileForm"})(A))));var M=t(66098),S=t(55028),j=t(27875);class P extends a.Component{constructor(e){super(e),this.state={item:this.props.item,auth:this.props.auth}}componentDidMount(){this.props.actions.salesExecutiveFetch(this.state.auth.user.id)}static getDerivedStateFromProps(e,s){let t={};return e.item!==s.item&&(t.item=e.item),t}render(){return(0,C.jsx)(M.A,{title:"Edit Profile",children:(0,C.jsx)("div",{children:(0,C.jsx)(j.A,{formData:this.state.item,isEditProfile:!0})})})}}const y=(0,p.Gh)((0,b.A)((0,i.connect)((e=>({item:e.superadmin.salesExecutive.item||null,auth:e.auth})),(e=>({dispatch:e,actions:(0,m.bindActionCreators)({salesExecutiveFetch:S.FQ},e)})))(P)))}}]);