"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4058],{39167:(e,t,i)=>{i.d(t,{$A:()=>h,Af:()=>r,P3:()=>d,Y$:()=>n});var a=i(80325),s=i(59385),l=i(45892);const r=e=>(e=(0,l.x0)(e,!0),t=>{a.A.get("/superadmin/materials".concat(e)).then((e=>{e.data.success&&t({type:s.Vf,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{a.A.post("/superadmin/materials/store",e).then((e=>{t({type:s.O6,payload:e.data})})).catch((e=>{}))},d=(e,t)=>i=>{a.A.post("/superadmin/materials/update/".concat(e),t).then((e=>{i({type:s.oH,payload:e.data})})).catch((e=>{}))},h=(e,t)=>i=>{a.A.delete("/superadmin/materials/delete/".concat(e),t).then((e=>{i({type:s.Yq,payload:e.data})})).catch((e=>{}))}},17525:(e,t,i)=>{i.d(t,{Fu:()=>d,Gu:()=>n,KC:()=>r,XH:()=>c,Zt:()=>o,d6:()=>h});var a=i(80325),s=i(5795),l=i(45892);const r=e=>(e=(0,l.x0)(e,!0),t=>{a.A.get("/superadmin/product".concat(e)).then((e=>{e.data.success&&t({type:s.LP,payload:e.data.data})})).catch((e=>{}))}),n=e=>(e=(0,l.x0)(e,!0),e=>{a.A.get("/superadmin/product/create").then((t=>{t.data.success&&e({type:s.xq,payload:t.data.data})})).catch((e=>{}))}),d=e=>t=>{a.A.post("/superadmin/product/store",e).then((e=>{t({type:s.If,payload:e.data})})).catch((e=>{}))},h=e=>t=>{a.A.get("/superadmin/product/view/".concat(e)).then((e=>{e.data.success&&t({type:s.De,payload:e.data.data})})).catch((e=>{}))},c=(e,t)=>i=>{a.A.post("/superadmin/product/update/".concat(e),t).then((e=>{i({type:s.q,payload:e.data})})).catch((e=>{}))},o=(e,t)=>i=>{a.A.delete("/superadmin/product/delete/".concat(e),t).then((e=>{i({type:s.uH,payload:e.data})})).catch((e=>{}))}},65991:(e,t,i)=>{i.d(t,{Oz:()=>c,QD:()=>n,lh:()=>h,mO:()=>r,xq:()=>d});var a=i(80325),s=i(38193),l=i(45892);const r=e=>(e=(0,l.x0)(e,!0),t=>{a.A.get("/superadmin/sizes".concat(e)).then((e=>{e.data.success&&t({type:s.lD,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{a.A.post("/superadmin/sizes/store",e).then((e=>{t({type:s.Q5,payload:e.data})})).catch((e=>{}))},d=(e,t)=>i=>{a.A.post("/superadmin/sizes/update/".concat(e),t).then((e=>{i({type:s.Ud,payload:e.data})})).catch((e=>{}))},h=(e,t)=>i=>{a.A.delete("/superadmin/sizes/delete/".concat(e),t).then((e=>{i({type:s.i3,payload:e.data})})).catch((e=>{}))},c=e=>(e=(0,l.x0)(e,!0),a.A.get("/superadmin/sizes".concat(e)))},12027:(e,t,i)=>{i.d(t,{G4:()=>d,KL:()=>h,RG:()=>c,x6:()=>n,xi:()=>r});var a=i(80325),s=i(55250),l=i(45892);const r=e=>(e=(0,l.x0)(e,!0),t=>{a.A.get("/superadmin/sub-categories".concat(e)).then((e=>{e.data.success&&t({type:s.po,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{a.A.post("/superadmin/sub-categories/store",e).then((e=>{t({type:s.qP,payload:e.data})})).catch((e=>{}))},d=(e,t)=>i=>{a.A.post("/superadmin/sub-categories/update/".concat(e),t).then((e=>{i({type:s.qz,payload:e.data})})).catch((e=>{}))},h=(e,t)=>i=>{a.A.delete("/superadmin/sub-categories/delete/".concat(e),t).then((e=>{i({type:s.wn,payload:e.data})})).catch((e=>{}))},c=e=>(e=(0,l.x0)(e,!0),a.A.get("/superadmin/sub-categories".concat(e)))},32571:(e,t,i)=>{i.d(t,{Lp:()=>h,Sv:()=>n,jO:()=>d,uT:()=>r});var a=i(80325),s=i(19997),l=i(45892);const r=e=>(e=(0,l.x0)(e,!0),t=>{a.A.get("/superadmin/tax".concat(e)).then((e=>{e.data.success&&t({type:s.L6,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{a.A.post("/superadmin/tax/store",e).then((e=>{e.data.success&&t({type:s.Gd,payload:e.data})})).catch((e=>{}))},d=(e,t)=>i=>{a.A.post("/superadmin/tax/update/".concat(e),t).then((e=>{e.data.success&&i({type:s.Gt,payload:e.data})})).catch((e=>{}))},h=(e,t)=>i=>{a.A.delete("/superadmin/tax/delete/".concat(e),t).then((e=>{e.data.success&&i({type:s._o,payload:e.data})})).catch((e=>{}))}},37972:(e,t,i)=>{i.d(t,{GR:()=>d,Jp:()=>r,YN:()=>h,t3:()=>n});var a=i(80325),s=i(12710),l=i(45892);const r=e=>(e=(0,l.x0)(e,!0),t=>{a.A.get("/superadmin/units".concat(e)).then((e=>{e.data.success&&t({type:s.OA,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{a.A.post("/superadmin/units/store",e).then((e=>{e.data.success&&t({type:s.h3,payload:e.data})})).catch((e=>{}))},d=(e,t)=>i=>{a.A.post("/superadmin/units/update/".concat(e),t).then((e=>{e.data.success&&i({type:s.Zf,payload:e.data})})).catch((e=>{}))},h=(e,t)=>i=>{a.A.delete("/superadmin/units/delete/".concat(e),t).then((e=>{e.data.success&&i({type:s.NW,payload:e.data})})).catch((e=>{}))}},44058:(e,t,i)=>{i.d(t,{A:()=>de});var a=i(63696),s=i(52821),l=i(55482),r=i(36122),n=i(41795),d=i(66107),h=i(26365),c=i(78976),o=i(59875),m=i(47998),u=i(63209),p=i(65469),g=i(61095),x=i(45271),f=i(24019),_=i(21249),y=i(74487),j=i(66593),A=i(91576),b=i(49746),v=i(72839),C=i(45892),N=i(88441),z=i(17525),F=i(12027),S=i(39167),L=i(32571),w=i(51449),D=i(27218),R=i(50977),V=i(59385),W=i(17243),I=i.n(W),P=i(79636),T=i(98993),M=i(73947),k=i(10228),E=i(45166),q=i(2598),O=i(25606),H=i(37972),U=i(21315),B=i(38193),G=i(65991),K=i(81683),Q=i(40902),Y=i(68703),Z=i.n(Y);i(81944);const X=i.p+"assets/no_video.png";var $=i(59964),J=i(97525),ee=i(82602),te=i(32690),ie=i(5795),ae=i(62540);function se(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const{updateSyncErrors:le}=i(35917).default,re=(0,ee.Z)();class ne extends a.Component{constructor(e){super(e),se(this,"onEditorStateChange",(e=>{this.setState({description:e})})),se(this,"initializeFormData",(()=>{let e={...this.state.formData};e.status=e.status?1:0,e.is_featured=e.is_featured?1:0,e.certified=e.certified?1:0,e.sizes=(0,C.mq)(e.sizes,"id"),e.materials=(0,C.mq)(e.materials,"id"),e.certificates=(0,C.mq)(e.certificates,"id"),"material"==e.type&&(e.material_id=e.materials[0]),delete e.video,delete e.main_image,delete e.size_materials,delete e.tags,this.props.actions.subCategoryList({all:1,category_id:e.category_id}),this.props.actions.materialList({all:1,category_id:e.category_id}),this.props.actions.sizeList({all:1,sub_category_id:e.sub_category_id}),this.props.actions.productList({all:1,sub_category_id:e.sub_category_id}),this.props.initialize(e),this.setState({existing_images:e.images,existing_main_image:this.state.formData.main_image,existing_video_file:this.state.formData.video,size_materials:this.state.formData.size_materials,tags:this.state.formData.tags,product_type:e.type,description:this.state.formData.description?K.EditorState.createWithContent(K.ContentState.createFromBlockArray((0,K.convertFromHTML)(this.state.formData.description))):K.EditorState.createEmpty()}),setTimeout((()=>{var e;this.existingVideoRef&&(null===(e=this.existingVideoRef.current)||void 0===e||e.load())}),200)})),se(this,"loadFormExternalData",(()=>{this.props.actions.productCreate(),this.props.actions.taxList()})),se(this,"getDefaultValues",(()=>({category_id:"",sub_category_id:"",name:"",product_code:"",certificate_id:"",description:"",short_desc:"",keywords:"",licence_no:"",status:"1",is_featured:"0",material_id:"",materials:[],sizes:[]}))),se(this,"renderProductNameField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsx)(te.A,{className:"autocomplete-selectbox",fullWidth:!0,value:t.value,filterOptions:(e,t)=>{const i=re(e,t),{inputValue:a}=t,s=e.some((e=>a===e.name));return""===a||s||i.push({inputValue:a,name:'Add "'.concat(a,'"')}),i},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:this.state.productList,getOptionLabel:e=>"string"==typeof e?e:e.inputValue?e.inputValue:e.name,renderOption:(e,t)=>(0,ae.jsx)("li",{...e,children:t.name}),freeSolo:!0,renderInput:e=>(0,ae.jsx)(r.A,{...e,label:"Name",error:!(!a||!s),helperText:a&&s?s:"",...t,...l})})})),se(this,"renderTextField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsx)(r.A,{label:i,fullWidth:!0,error:!(!a||!s),helperText:a&&s?s:"",...t,...l})})),se(this,"renderCategoriesField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsx)("div",{className:"list-menu",children:(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,...t,...l,children:[(0,ae.jsx)(c.A,{value:""}),this.state.categories.map(((e,t)=>(0,ae.jsx)(c.A,{value:e.id,children:e.name},t)))]})}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"renderSubCategoriesField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,...t,...l,children:[(0,ae.jsx)(c.A,{value:""}),this.state.sub_categories.map(((e,t)=>(0,ae.jsx)(c.A,{value:e.id,children:e.name},t)))]}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"getSelectedCertiNames",(e=>{let t=[];for(let i=0;i<e.length;i++){let a=I().filter(this.state.certificates,{id:e[i]});a.length&&t.push(a[0].name)}return t})),se(this,"renderCertificatesField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsx)(h.A,{label:i,fullWidth:!0,multiple:!0,...t,...l,value:""===t.value?[]:t.value,multi:"true",renderValue:e=>this.getSelectedCertiNames(e).join(", "),children:this.state.certificates.map((e=>(0,ae.jsxs)(c.A,{value:e.id,className:"multi-select",children:[(0,ae.jsx)(m.A,{checked:!!(t.value&&t.value.indexOf(e.id)>-1)}),(0,ae.jsx)(u.A,{primary:e.name})]},e.id)))}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"getSelectedMaterialNames",(e=>{let t=[];for(let i=0;i<e.length;i++){let a=I().filter(this.state.materialList,{id:e[i]});a.length&&t.push(a[0].name)}return t})),se(this,"renderMaterialsField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsx)(h.A,{label:i,fullWidth:!0,multiple:!0,...t,...l,value:""===t.value?[]:t.value,multi:"true",renderValue:e=>this.getSelectedMaterialNames(e).join(", "),children:this.state.materialList.map((e=>(0,ae.jsxs)(c.A,{value:e.id,className:"multi-select",children:[(0,ae.jsx)(m.A,{checked:!!(t.value&&t.value.indexOf(e.id)>-1)}),(0,ae.jsx)(u.A,{primary:e.name})]},e.id)))}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"renderSingleMaterialsField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,...t,...l,children:[(0,ae.jsx)(c.A,{value:""}),this.state.materialList.map(((e,t)=>(0,ae.jsx)(c.A,{value:e.id,children:e.name},t)))]}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"renderTaxFieldField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,...t,...l,children:[(0,ae.jsx)(c.A,{value:""}),this.state.taxList.map(((e,t)=>(0,ae.jsx)(c.A,{value:e.id,children:e.name},t)))]}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"getSelectedNames",(e=>{let t=[];for(let i=0;i<e.length;i++){let a=I().filter(this.state.sizeList,{id:e[i]});a.length&&t.push(a[0].name)}return t})),se(this,"renderSizeField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,defaultValue:[],multiple:!0,...t,...l,value:""===t.value?[]:t.value,multi:"true",renderValue:e=>this.getSelectedNames(e).join(", "),children:[(0,ae.jsx)(c.A,{value:""}),this.state.sizeList.map(((e,i)=>(0,ae.jsxs)(c.A,{value:e.id,className:"multi-select",children:[(0,ae.jsx)(m.A,{checked:!!(t.value&&t.value.indexOf(e.id)>-1)}),(0,ae.jsx)(u.A,{primary:e.name})]},i)))]}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"renderStatusField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,...t,...l,children:[(0,ae.jsx)(c.A,{value:"1",children:"Active"}),(0,ae.jsx)(c.A,{value:"0",children:"Inactive"})]}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"renderFeaturedField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),className:"featured_field",children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,...t,...l,children:[(0,ae.jsx)(c.A,{value:"1",children:"Yes"}),(0,ae.jsx)(c.A,{value:"0",children:"No"})]}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"renderCertifiedField",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsxs)(n.A,{fullWidth:!0,error:!(!a||!s),children:[i?(0,ae.jsx)(d.A,{children:i}):null,(0,ae.jsxs)(h.A,{label:i,fullWidth:!0,...t,...l,children:[(0,ae.jsx)(c.A,{value:""}),(0,ae.jsx)(c.A,{value:"1",children:"Yes"}),(0,ae.jsx)(c.A,{value:"0",children:"No"})]}),a&&s?(0,ae.jsx)(o.A,{children:s}):null]})})),se(this,"renderTextArea",(e=>{let{input:t,label:i,meta:{touched:a,error:s},...l}=e;return(0,ae.jsx)(p.A,{minRows:3,label:i,error:a&&s?s:"",style:{width:"100%"},...t,...l})})),se(this,"handleProductChange",(e=>{this.setState({product_type:e.target.value})})),se(this,"handleCategoryChange",((e,t)=>{if(this.props.actions.subCategoryList({all:1,category_id:t}),t){this.props.actions.materialList({all:1,category_id:t});let e=I().filter(this.state.categories,{id:t});e.length&&this.setState({product_type:e[0].is_material?"material":"in_house",is_ceritified:e[0].is_ceritified})}else this.props.dispatch({type:V.XB});this.props.dispatch((0,l.Zg)("ProductForm","sub_category_id","")),this.props.dispatch({type:B.lA}),this.props.dispatch({type:ie.rP})})),se(this,"handleSubCategoryChange",((e,t)=>{t?(this.props.actions.sizeList({all:1,sub_category_id:t}),this.props.actions.productList({all:1,sub_category_id:t})):(this.props.dispatch({type:B.lA}),this.props.dispatch({type:ie.rP}))})),se(this,"onImageChange",(e=>{let t=this.state.images;if(this.state.existing_images.length+t.length+e.target.files.length>5)this.props.enqueueSnackbar("Maximum 5 image are allowed.",{variant:"error"});else{for(let i=0;i<e.target.files.length;i++)t.push(e.target.files[i]);this.setState({images:t}),this.imageFileRef&&(this.imageFileRef.current.value=null)}})),se(this,"getImageSrc",(e=>URL.createObjectURL(e))),se(this,"deleteImage",(e=>{let t=this.state.images;t.splice(e,1),this.setState({images:t}),this.imageFileRef&&(this.imageFileRef.current.value=null)})),se(this,"onVideoChange",(e=>{let t=e.target.files[0];const i=new FileReader;i.onload=()=>{2===i.readyState&&this.setState({video_file:t,existing_video_file:null})},i.onloadstart=()=>{this.setState({video_preview:null})},i.onloadend=()=>{this.setState({video_preview:i.result}),this.videoFileRef&&(this.videoFileRef.current.value=null)},e.target.files[0]&&i.readAsDataURL(e.target.files[0])})),se(this,"deleteVideo",(()=>{this.setState({video_file:null,video_preview:null})})),se(this,"handleFormSubmit",(async(e,t)=>{let i=!1;0==this.state.existing_images.length+this.state.images.length&&(this.props.enqueueSnackbar("Please select at least one image",{variant:"error"}),i=!0);let a={...this.getDefaultValues(),...e};a.description=this.state.description?Z()((0,K.convertToRaw)(this.state.description.getCurrentContent())):"",a.video=this.state.video_file,a.type=this.state.product_type,"material"==this.state.product_type?a.certified=!1:a.certified=!0,"material"!=this.state.product_type?(0==a.sizes.length&&(this.props.dispatch(le("ProductForm",{sizes:"Size is required."})),i=!0),0==a.materials.length&&(this.props.dispatch(le("ProductForm",{materials:"Materials is required."})),i=!0)):""==a.material_id&&(this.props.dispatch(le("ProductForm",{material_id:"Materials is required."})),i=!0);for(let e=0;e<this.state.size_materials.length;e++)for(let t=0;t<this.state.size_materials[e].materials.length;t++)this.state.size_materials[e].materials[t].purities.length?this.state.size_materials[e].materials[t].purity_error=!1:(this.state.size_materials[e].materials[t].purity_error=!0,i=!0),this.state.size_materials[e].materials[t].weight?this.state.size_materials[e].materials[t].weight_error=!1:(this.state.size_materials[e].materials[t].weight_error=!0,i=!0),this.state.size_materials[e].materials[t].unit_id?this.state.size_materials[e].materials[t].unit_error=!1:(this.state.size_materials[e].materials[t].unit_error=!0,i=!0);for(let e=0;e<this.state.size_materials.length;e++)for(let t=0;t<this.state.size_materials[e].materials.length;t++){let i=this.getMaterialPurities(this.state.size_materials[e].materials[t].material_id),a=this.state.size_materials[e].materials[t].purities;this.state.size_materials[e].materials[t].purities=this.getFilteredPurities(i,a)}if(!i){let e=[...this.state.images];for(let t=0;t<e.length;t++)e[t]=await(0,C.nk)(e[t]);return a.images=e,a.size_materials=this.state.size_materials,a.tags=this.state.tags,this.state.video_file&&(a.video=await(0,C.nk)(this.state.video_file)),this.state.main_image_file&&(a.main_image=await(0,C.nk)(this.state.main_image_file)),this.state.isCreateFrom?this.props.actions.productStore(a):(a.remove_video=this.state.remove_video,a.remove_images=this.state.remove_images,this.props.actions.productUpdate(this.state.formData.id,a))}})),se(this,"getFilteredPurities",((e,t)=>{let i=[];for(let a=0;a<t.length;a++)-1!==I().findIndex(e,{id:t[a]})&&i.push(t[a]);return i})),se(this,"handleFieldChange",((e,t)=>{console.log(t)})),se(this,"deleteExistingImage",(e=>{let t=this.state.remove_images,i=this.state.existing_images;t.push(i[e]),i.splice(e,1),this.setState({remove_images:t,existing_images:i})})),se(this,"deleteExistingVideo",(()=>{this.setState({existing_video_file:null,remove_video:!0})})),se(this,"handleMaterialsChange",((e,t)=>{const{sizes:i}=this.props.formValues;this.intializeWeightsTable(i,t)})),se(this,"handleSizeChange",((e,t)=>{const{materials:i}=this.props.formValues;this.intializeWeightsTable(t,i)})),se(this,"handleSingleMatreialChange",((e,t)=>{let i=[];if(t&&(i=[t]),this.intializeWeightsTable(null,i),!("name"in this.props.formValues)||!this.props.formValues.name){let e=I().filter(this.state.materialList,{id:t});e.length&&this.props.change("name",e[0].name)}})),se(this,"intializeWeightsTable",((e,t)=>{let i=[];if("material"==this.state.product_type){if(Array.isArray(t)&&t.length){let e=I().filter(this.state.materialList,{id:t[0]}),a=[{material_id:t[0],material_name:e.length?e[0].name:"",purities:[],weight:"",unit_id:e.length?e[0].unit_id:"",quantity:""}];i.push({size_id:"",size_name:"",materials:a})}}else if(Array.isArray(e)&&Array.isArray(t)&&e.length&&t.length)for(let a of e){let e=[];for(let i of t){let t=I().filter(this.state.materialList,{id:i});e.push({material_id:i,material_name:t.length?t[0].name:"",purities:[],weight:"",unit_id:t.length?t[0].unit_id:"",quantity:""})}let s=I().filter(this.state.sizeList,{id:a});i.push({size_id:a,size_name:s.length?s[0].name:"",materials:e})}this.setState({size_materials:i})})),se(this,"getSelectedPurities",((e,t)=>{let i=[],a=I().filter(this.state.materialList,{id:t}),s=a.length?a[0].purities:[];for(let t=0;t<e.length;t++){let a=I().filter(s,{id:e[t]});a.length&&i.push(a[0].name)}return i})),se(this,"getMaterialPurities",(e=>{let t=I().filter(this.state.materialList,{id:e});return t.length?t[0].purities:[]})),se(this,"handlePurityChange",((e,t,i)=>{let a=this.state.size_materials;if(a[t].materials[i].purities=e.target.value,0==t&&a.length>1)for(let t=1;t<a.length;t++)a[t].materials[i].purities=e.target.value;this.setState({size_materials:a})})),se(this,"handleUnitChange",((e,t,i)=>{let a=this.state.size_materials;a[t].materials[i].unit_id=e.target.value,this.setState({size_materials:a})})),se(this,"handleQuantityChange",((e,t,i)=>{let a=this.state.size_materials;if(a[t].materials[i].quantity=e.target.value,0==t&&a.length>1)for(let t=1;t<a.length;t++)a[t].materials[i].quantity=e.target.value;this.setState({size_materials:a})})),se(this,"handleWeightChange",((e,t,i)=>{if(""===e.target.value||e.target.value.match(/^\d{1,}(\.\d{0,3})?$/)){let a=this.state.size_materials;a[t].materials[i].weight=e.target.value,this.setState({size_materials:a})}})),se(this,"handleTagDelete",(e=>{const t=this.state.tags.filter((t=>t!==e));this.setState({tags:t})})),se(this,"handleTagEnter",(e=>{13==e.charCode&&(this.setState({tags:[...this.state.tags,this.tagRef.current.value]}),this.tagRef.current.value="")})),se(this,"getAllImages",(e=>{let t=[];for(let e of this.state.existing_images)t.push({path:e.path,type:"existing"});for(let e of this.state.images)t.push({path:e,type:"new"});for(let e=t.length;e<5;e++)t.push({path:$.A,type:"no_image"});return e?t[0]:(t.shift(),t)})),se(this,"onChangeMianImage",(e=>{this.setState({main_image_file:e.target.files[0],existing_main_image:null}),this.mainImageFileRef&&(this.mainImageFileRef.current.value=null)})),se(this,"deleteMainImage",(()=>{this.setState({main_image_file:null}),this.mainImageFileRef&&(this.mainImageFileRef.current.value=null)})),se(this,"deleteExistingMainImage",(()=>{this.setState({existing_main_image:null})}));let t="formData"in this.props?this.props.formData:null;this.state={auth:this.props.auth,formData:t,isCreateFrom:!t,onlyView:this.props.onlyView,categories:this.props.categories,certificates:this.props.certificates,materialList:this.props.materialList,sizeList:this.props.sizeList,sub_categories:this.props.sub_categories,product_type:t?t.type:"in_house",images:[],main_image_file:null,video_file:null,video_preview:null,remove_images:[],existing_images:[],existing_main_image:null,remove_video:!1,existing_video_file:null,taxList:this.props.taxList,size_materials:[],unitList:this.props.unitList,tags:[],description:K.EditorState.createEmpty(),productList:this.props.productList,is_ceritified:!0},this.imageFileRef=a.createRef(),this.mainImageFileRef=a.createRef(),this.videoFileRef=a.createRef(),this.existingVideoRef=a.createRef(),this.tagRef=a.createRef(),this.formRef=a.createRef()}componentDidMount(){this.loadFormExternalData(),this.state.formData?this.initializeFormData():(this.props.initialize({status:1,is_featured:0}),this.setState({description:K.EditorState.createEmpty()})),this.props.actions.unitList({all:1})}componentDidUpdate(e){this.props.formData!=e.formData&&this.initializeFormData()}static getDerivedStateFromProps(e,t){let i={};return e.formData!==t.formData&&(i.formData=e.formData),e.categories!==t.categories&&(i.categories=e.categories),e.certificates!==t.certificates&&(i.certificates=e.certificates),e.materialList!==t.materialList&&(i.materialList=e.materialList),e.sizeList!==t.sizeList&&(i.sizeList=e.sizeList),e.sub_categories!==t.sub_categories&&(i.sub_categories=e.sub_categories),e.taxList!==t.taxList&&(i.taxList=e.taxList),e.unitList!==t.unitList&&(i.unitList=e.unitList),e.productList!==t.productList&&(i.productList=e.productList),e.onlyView!==t.onlyView&&(i.onlyView=e.onlyView),i}render(){const{handleSubmit:e,pristine:t,submitting:i}=this.props,{description:s,onlyView:o}=this.state;let p=this.getAllImages(!0);return(0,ae.jsx)("form",{onSubmit:e(this.handleFormSubmit),className:"ratn-dialog-wrapper product_form",ref:this.formRef,children:(0,ae.jsxs)(g.A,{sx:{flexGrow:1,m:.5},className:"ratn-dialog-inner",children:[(0,ae.jsxs)(x.Ay,{container:!0,spacing:2,className:"loans_view p_view",children:[(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"category_id",component:this.renderCategoriesField,label:"Category",type:"select",onChange:(e,t)=>this.handleCategoryChange(e,t),disabled:o})}),(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"sub_category_id",component:this.renderSubCategoriesField,label:"Sub Category",type:"select",onChange:(e,t)=>this.handleSubCategoryChange(e,t),disabled:o})}),"material"==this.state.product_type?(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"material_id",component:this.renderSingleMaterialsField,label:"Material",type:"select",onChange:(e,t)=>this.handleSingleMatreialChange(e,t),disabled:o})}):null,(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"name",component:this.renderProductNameField,label:"Name",disabled:o})}),"material"!=this.state.product_type?(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"tax_rate_id",component:this.renderTaxFieldField,label:"Tax",type:"select",onChange:e=>this.handleFieldChange(e),disabled:o})}):null,this.state.is_ceritified?(0,ae.jsx)(a.Fragment,{children:(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"certificates",component:this.renderCertificatesField,label:"Certificate",multi:!0,type:"select",defaultValue:[],onChange:e=>this.handleFieldChange(e),disabled:o})})}):null,"material"!=this.state.product_type?(0,ae.jsxs)(a.Fragment,{children:[(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"materials",component:this.renderMaterialsField,label:"Materials",multi:!0,type:"select",defaultValue:[],onChange:(e,t)=>this.handleMaterialsChange(e,t),disabled:o})}),(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"sizes",component:this.renderSizeField,label:"Size",multi:!0,type:"select",defaultValue:[],onChange:(e,t)=>this.handleSizeChange(e,t),disabled:o})})]}):(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"tax_rate_id",component:this.renderTaxFieldField,label:"Tax",type:"select",onChange:e=>this.handleFieldChange(e),disabled:o})}),(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:1.5,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"product_code",component:this.renderTextField,label:"Product Code",disabled:o})}),(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:1.5,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"status",component:this.renderStatusField,label:"Status",type:"select",disabled:o})})]}),(0,ae.jsx)(x.Ay,{container:!0,spacing:2,className:"loans_view",children:(0,ae.jsx)(x.Ay,{item:!0,xs:12,children:(0,ae.jsx)(q.A,{component:f.A,children:(0,ae.jsxs)(T.A,{className:"ratn-table-product-wrapper table-bordered sale_form_table",children:[(0,ae.jsx)(M.A,{className:"ratn-table-header p_view",children:(0,ae.jsxs)(O.A,{children:["material"!=this.state.product_type?(0,ae.jsx)(E.A,{sx:{width:120},children:"Size No"}):null,(0,ae.jsx)(E.A,{sx:{width:230},children:"Material"}),(0,ae.jsx)(E.A,{children:"Purity"}),(0,ae.jsx)(E.A,{sx:{width:120},children:"Weight"}),(0,ae.jsx)(E.A,{sx:{width:120},children:"Unit"}),"material"!=this.state.product_type?(0,ae.jsx)(E.A,{sx:{width:120},children:"Quantity"}):null]})}),(0,ae.jsx)(k.A,{children:this.state.size_materials.map(((e,t)=>(0,ae.jsxs)(O.A,{children:["material"!=this.state.product_type?(0,ae.jsx)(E.A,{children:e.size_name}):null,(0,ae.jsx)(E.A,{children:e.materials.map(((e,t)=>(0,ae.jsx)(r.A,{label:"",variant:"outlined",fullWidth:!0,value:e.material_name,sx:{marginBottom:"5px"},inputProps:{className:"non_disable_text"},size:"small",disabled:o},t)))}),(0,ae.jsx)(E.A,{children:e.materials.map(((e,i)=>(0,ae.jsx)(n.A,{fullWidth:!0,error:!(!("purity_error"in e)||!e.purity_error),sx:{marginBottom:"5px"},size:"small",children:(0,ae.jsxs)(h.A,{label:"",fullWidth:!0,defaultValue:[],multiple:!0,value:e.purities,renderValue:t=>this.getSelectedPurities(t,e.material_id).join(", "),onChange:e=>this.handlePurityChange(e,t,i),disabled:o,children:[(0,ae.jsx)(c.A,{value:""}),this.getMaterialPurities(e.material_id).map(((t,i)=>(0,ae.jsxs)(c.A,{value:t.id,className:"multi-select",children:[(0,ae.jsx)(m.A,{checked:!!(e.purities&&e.purities.indexOf(t.id)>-1)}),(0,ae.jsx)(u.A,{primary:t.name})]},i)))]})},i)))}),(0,ae.jsx)(E.A,{children:e.materials.map(((e,i)=>(0,ae.jsx)(r.A,{label:"",variant:"outlined",fullWidth:!0,value:e.weight,onChange:e=>this.handleWeightChange(e,t,i),sx:{marginBottom:"5px"},error:!(!("weight_error"in e)||!e.weight_error),size:"small",disabled:o},i)))}),(0,ae.jsx)(E.A,{children:e.materials.map(((e,i)=>(0,ae.jsx)(n.A,{fullWidth:!0,error:!(!("unit_error"in e)||!e.unit_error),sx:{marginBottom:"5px"},size:"small",children:(0,ae.jsxs)(h.A,{label:"",fullWidth:!0,defaultValue:"",value:e.unit_id,onChange:e=>this.handleUnitChange(e,t,i),disabled:o,children:[(0,ae.jsx)(c.A,{value:""}),this.state.unitList.map(((e,t)=>(0,ae.jsx)(c.A,{value:e.id,children:e.name},t)))]})},i)))}),"material"!=this.state.product_type?(0,ae.jsx)(E.A,{children:e.materials.map(((e,i)=>(0,ae.jsx)(r.A,{label:"",variant:"outlined",fullWidth:!0,value:e.quantity,onChange:e=>this.handleQuantityChange(e,t,i),sx:{marginBottom:"5px"},error:!(!("qty_error"in e)||!e.qty_error),size:"small",disabled:o},i)))}):null]},t)))})]})})})}),(0,ae.jsxs)(x.Ay,{container:!0,spacing:2,className:"loans_view p_view",children:[(0,ae.jsxs)(x.Ay,{item:!0,xs:12,className:"create-input",children:[(0,ae.jsx)(d.A,{children:"Description"}),(0,ae.jsx)(Q.Editor,{editorState:s,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange,toolbar:{options:["inline","textAlign","history","blockType"],inline:{options:["bold","italic","underline"]},blockType:{options:["Normal","H1","H2","H3","H4","H5","H6"]}},editorStyle:{height:"100px",paddingLeft:"10px",paddingRight:"10px"},wrapperStyle:{border:"1px solid rgb(196 196 196)"},toolbarStyle:{borderBottom:"1px solid rgb(196 196 196)"},disabled:o})]}),(0,ae.jsxs)(x.Ay,{item:!0,xs:6,md:10,className:"create-input",children:[(0,ae.jsx)(d.A,{children:"Tags (Searchable Keys)"}),(0,ae.jsx)(r.A,{inputRef:this.tagRef,fullWidth:!0,sx:{margin:"1rem 0"},placeholder:this.state.tags.length<5?"Enter tags":"",InputProps:{startAdornment:(0,ae.jsx)(g.A,{sx:{margin:"0 0.2rem 0 0",display:"flex"},children:this.state.tags.map(((e,t)=>(0,ae.jsx)(he,{data:e,handleDelete:this.handleTagDelete},t)))})},onKeyPress:this.handleTagEnter,disabled:o})]}),(0,ae.jsx)(x.Ay,{item:!0,xs:6,md:2,className:"create-input",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"is_featured",component:this.renderFeaturedField,label:"Is Featured",type:"select",disabled:o})}),(0,ae.jsx)(x.Ay,{item:!0,xs:12,className:"create-input",children:(0,ae.jsxs)(_.A,{children:[(0,ae.jsx)(y.A,{expandIcon:(0,ae.jsx)(P.A,{}),style:{padding:0},children:(0,ae.jsx)(j.A,{style:{color:"#1e2746",width:"100%",textAlign:"right"},children:"SEO Details"})}),(0,ae.jsxs)(A.A,{children:[(0,ae.jsx)(x.Ay,{item:!0,xs:12,className:"create-input pt-0",children:(0,ae.jsx)(l.D0,{className:"input-inner",name:"meta_title",component:this.renderTextField,label:"Meta Title",disabled:o})}),(0,ae.jsxs)(x.Ay,{item:!0,xs:12,className:"create-input",children:[(0,ae.jsx)(d.A,{children:"Meta Description"}),(0,ae.jsx)(l.D0,{className:"description",name:"short_desc",component:this.renderTextArea,placeholder:"Meta Description",disabled:o})]}),(0,ae.jsxs)(x.Ay,{item:!0,xs:12,className:"create-input",children:[(0,ae.jsx)(d.A,{children:"Meta Keywords"}),(0,ae.jsx)(l.D0,{className:"description",name:"keywords",component:this.renderTextArea,placeholder:"Meta Keywords",disabled:o})]})]})]})})]}),(0,ae.jsx)("div",{className:"custom-container ml-10",children:(0,ae.jsxs)("div",{className:"custom-row pl-0",children:[(0,ae.jsx)("div",{className:"custom-col-2",children:(0,ae.jsx)("div",{className:"admin-buttons",children:(0,ae.jsxs)("div",{className:"p-single-image-wrapper",children:[(0,ae.jsx)("div",{className:"p-single-image",children:this.state.existing_main_image?(0,ae.jsx)("img",{src:this.state.existing_main_image}):(0,ae.jsx)(ae.Fragment,{children:this.state.main_image_file?(0,ae.jsx)("img",{src:this.getImageSrc(this.state.main_image_file)}):(0,ae.jsx)("img",{src:$.A})})}),(0,ae.jsxs)(b.A,{variant:"contained",className:"image-button",component:"label",endIcon:(0,ae.jsx)(J.A,{}),disabled:o,children:["Main",(0,ae.jsx)("input",{name:"main_image",hidden:!0,accept:"image/*",type:"file",onChange:e=>this.onChangeMianImage(e),ref:this.mainImageFileRef})]})]})})}),(0,ae.jsx)("div",{className:"custom-col-8",children:(0,ae.jsxs)("div",{className:"all-image-wrapper",children:[(0,ae.jsxs)("div",{className:"all-single-image",children:[(0,ae.jsxs)("div",{children:["no_image"!=p.type?(0,ae.jsx)(ae.Fragment,{children:"existing"==p.type?(0,ae.jsx)("button",{className:"close_img",onClick:()=>this.deleteExistingImage(0),type:"button",disabled:o,children:"x"}):(0,ae.jsx)("button",{className:"close_img",onClick:()=>this.deleteImage(0),type:"button",disabled:o,children:"x"})}):null,(0,ae.jsx)("img",{src:"new"==p.type?this.getImageSrc(p.path):p.path})]}),(0,ae.jsxs)(b.A,{variant:"contained",disabled:o,className:"image-button",component:"label",endIcon:(0,ae.jsx)(J.A,{}),children:["All Image",(0,ae.jsx)("input",{name:"images",hidden:!0,accept:"image/*",type:"file",onChange:this.onImageChange,ref:this.imageFileRef,multiple:!0})]})]}),this.getAllImages().map(((e,t)=>(0,ae.jsx)("div",{className:"all-single-image",children:(0,ae.jsxs)("div",{children:["no_image"!=e.type?(0,ae.jsx)(ae.Fragment,{children:"existing"==e.type?(0,ae.jsx)("button",{className:"close_img",disabled:o,onClick:()=>this.deleteExistingImage(t+1),type:"button",children:"x"}):(0,ae.jsx)("button",{className:"close_img",disabled:o,onClick:()=>this.deleteImage(t+1),type:"button",children:"x"})}):null,(0,ae.jsx)("img",{src:"new"==e.type?this.getImageSrc(e.path):e.path,id:"logo-img"})]})},t)))]})}),(0,ae.jsx)("div",{className:"custom-col-2",children:(0,ae.jsxs)("div",{className:"p-single-image-wrapper",children:[(0,ae.jsx)("div",{className:"p-single-image",children:this.state.existing_video_file?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("button",{className:"close_img",onClick:this.deleteExistingVideo,type:"button",disabled:o,children:"x"}),(0,ae.jsx)("video",{width:"200",height:"150",style:{height:"143px",objectFit:"contain"},loop:!0,controls:!0,ref:this.existingVideoRef,children:(0,ae.jsx)("source",{src:this.state.existing_video_file})},this.state.existing_video_file)]}):(0,ae.jsx)(ae.Fragment,{children:this.state.video_preview?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("button",{className:"close_img",onClick:this.deleteVideo,type:"button",disabled:o,children:"x"}),(0,ae.jsx)("video",{width:"100%",height:"140",style:{height:"143px",objectFit:"contain"},loop:!0,controls:!0,children:(0,ae.jsx)("source",{src:this.state.video_preview})},this.state.video_preview)]}):(0,ae.jsx)("img",{src:X,id:"logo-img"})})}),(0,ae.jsxs)(b.A,{variant:"contained",className:"video-button",component:"label",disabled:o,endIcon:(0,ae.jsx)(J.A,{}),children:["Video",(0,ae.jsx)("input",{name:"video",hidden:!0,accept:"video/mp4",type:"file",onChange:this.onVideoChange,ref:this.videoFileRef})]})]})})]})}),(0,ae.jsx)(x.Ay,{container:!0,spacing:0,className:"loans_view p_view",children:(0,ae.jsx)(x.Ay,{item:!0,xs:12,className:"create-input",style:{paddingTop:"10px"},children:(0,ae.jsxs)(v.A,{spacing:1,direction:"row",justifyContent:"flex-end",className:"p-submit-button",sx:{marginTop:"0px"},children:[o?null:(0,ae.jsx)(D.A,{variant:"contained",type:"button",loading:i,disabled:i,onClick:e(this.handleFormSubmit),children:"Submit"}),i?null:(0,ae.jsx)(b.A,{variant:"outlined",onClick:()=>this.props.navigate((0,C.zr)((0,C.mA)(this.state.auth))+"/products"),children:"Cancel"})]})})})]})})}}ne.defaultProps={onlyView:!1};const de=(0,R.A)((0,w.Gh)((0,s.connect)((e=>({categories:e.superadmin.product.categories,certificates:e.superadmin.product.certificates,materialList:e.superadmin.material.items,sizeList:e.superadmin.size.items,sub_categories:e.superadmin.subCategory.items,taxList:e.superadmin.tax.items,auth:e.auth,unitList:e.superadmin.unit.items,productList:e.superadmin.product.items,formValues:(0,l.ru)("ProductForm")(e,"status")})),(e=>({dispatch:e,actions:(0,N.bindActionCreators)({productCreate:z.Gu,productUpdate:z.XH,productStore:z.Fu,subCategoryList:F.xi,taxList:L.uT,materialList:S.Af,unitList:H.Jp,sizeList:G.mO,productList:z.KC,change:l.Zg},e)})))((0,l.zW)({form:"ProductForm",validate:e=>{const t={};return["name","category_id","sub_category_id"].forEach((i=>{e[i]||(t[i]="Required")})),t}})(ne)))),he=e=>{let{data:t,handleDelete:i}=e;return(0,ae.jsx)(g.A,{sx:{background:"#283240",height:"100%",display:"flex",padding:"5px !important",margin:"0 0.5rem 0 0 !important",justifyContent:"center",alignContent:"center",color:"#ffffff"},className:"input_tags_item",children:(0,ae.jsxs)(v.A,{direction:"row",gap:1,children:[(0,ae.jsx)(j.A,{children:t}),(0,ae.jsx)(U.A,{sx:{cursor:"pointer"},onClick:()=>{i(t)}})]})})}},59964:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/no_image.jpg"}}]);