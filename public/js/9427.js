"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9427],{43303:(e,s,a)=>{a.d(s,{Bm:()=>l,TK:()=>h,VS:()=>n,Y$:()=>d,_N:()=>r,yz:()=>o});var t=a(80325),i=a(78342),c=a(45892);const n=e=>(e=(0,c.x0)(e,!0),s=>{t.A.get("/superadmin/payments".concat(e)).then((e=>{e.data.success&&s({type:i.$F,payload:e.data.data})})).catch((e=>{}))}),r=e=>s=>{t.A.post("/superadmin/payments/store",e).then((e=>{s({type:i.ci,payload:e.data})})).catch((e=>{}))},l=e=>s=>{t.A.get("/superadmin/payments/due-amount?user_id=".concat(e)).then((e=>{e.data.success&&s({type:i.X6,payload:e.data.data})})).catch((e=>{}))},d=e=>(e=(0,c.x0)(e,!0),s=>{t.A.get("/superadmin/wallet-history".concat(e)).then((e=>{e.data.success&&s({type:i.Qz,payload:e.data.data})})).catch((e=>{}))}),o=e=>t.A.get("/superadmin/payments/wallet-balance?payment_mode=".concat(e)),h=(e,s)=>t.A.post("/superadmin/payments/update-status/"+e,s)},26777:(e,s,a)=>{a.d(s,{$A:()=>h,GS:()=>x,I:()=>u,O7:()=>o,bG:()=>d,i$:()=>A,iI:()=>m,rP:()=>p,wf:()=>r,xR:()=>l,y7:()=>n});var t=a(80325),i=a(70239),c=a(45892);const n=e=>(e=(0,c.x0)(e,!0),s=>{t.A.get("/superadmin/purchases".concat(e)).then((e=>{e.data.success&&s({type:i.rZ,payload:e.data.data})})).catch((e=>{}))}),r=(e,s)=>t.A.post("/superadmin/purchases-on-approve/status/".concat(e),s),l=e=>s=>{t.A.post("/superadmin/purchases/store",e).then((e=>{s({type:i.UA,payload:e.data})})).catch((e=>{}))},d=e=>s=>{t.A.get("/superadmin/purchases/view/".concat(e)).then((e=>{console.log(e.data.data),e.data.success&&s({type:i.Xe,payload:e.data.data})})).catch((e=>{}))},o=e=>s=>{t.A.get("/superadmin/purchases/edit/".concat(e)).then((e=>{console.log(e.data.data),e.data.success&&s({type:i.Xe,payload:e.data.data})})).catch((e=>{}))},h=(e,s)=>a=>{t.A.post("/superadmin/purchases/update/".concat(e),s).then((e=>{a({type:i.YK,payload:e.data})})).catch((e=>{}))},p=(e,s)=>a=>{t.A.delete("/superadmin/purchases/delete/".concat(e),s).then((e=>{a({type:i.Mx,payload:e.data})})).catch((e=>{}))},u=()=>t.A.get("/superadmin/purchases/new-invoice-number"),m=(e,s)=>t.A.post("/superadmin/purchases/return/"+e,s),x=e=>t.A.get("/superadmin/purchases/edit/".concat(e)),A=e=>(e=(0,c.x0)(e,!0),t.A.get("/superadmin/purchases-products".concat(e)))},79427:(e,s,a)=>{a.r(s),a.d(s,{default:()=>T});var t=a(63696),i=a(52821),c=a(45271),n=a(36213),r=a(49746),l=a(72839),d=a(11505),o=a(95624),h=a(61095),p=a(66593),u=a(61176),m=a(66098),x=a(50977),A=a(26777),j=a(88441),g=a(51449),y=a(98993),_=a(73947),b=a(10228),v=a(45166),w=a(2598),C=a(25606),N=a(24019),S=a(66095),f=a(66282),D=a(89429),M=a(52805),k=a(79859),P=a(43191),V=a(29443),q=a(43303),R=a(78342),z=a(62540);function B(e,s,a){return s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}class F extends t.Component{constructor(e){super(e),B(this,"loadViewData",(()=>{this.props.actions.purchaseView(this.props.params.id)})),B(this,"handleStatusChange",(async e=>{this.setState({status_changing:e,confirmDialog:!0})})),B(this,"handleConfirmSubmit",(async()=>{let e={approve_status:this.state.status_changing,decline_type:this.state.decline_type},s=await(0,A.wf)(this.props.params.id,e);1==s.data.success?(this.props.enqueueSnackbar(s.data.message,{variant:"success"}),this.setState({confirmDialog:!1}),this.loadViewData()):this.props.enqueueSnackbar(s.data.message,{variant:"error"})})),B(this,"handleConfirmDialogClose",(()=>{this.setState({confirmDialog:!1})})),this.state={purchase:this.props.purchase,openDialog:!1,actionCalled:this.props.actionCalled,createSuccess:this.props.createSuccess,successMessage:this.props.successMessage,errorMessage:this.props.errorMessage,processing:!1,items:this.props.items,total:this.props.total,queryParams:{page:1,limit:50,date_from:null,date_to:null,table_type:"purchase",is_assigned:!0},confirmDialog:!1,status_changing:0,auth:this.props.auth,wallet_balance:0,decline_type:"advance"}}componentDidMount(){this.loadViewData()}static getDerivedStateFromProps(e,s){let a={};return e.purchase!==s.purchase&&(a.purchase=e.purchase),e.actionCalled!==s.actionCalled&&(a.actionCalled=e.actionCalled),e.createSuccess!==s.createSuccess&&(a.createSuccess=e.createSuccess),e.successMessage!==s.successMessage&&(a.successMessage=e.successMessage),e.errorMessage!==s.errorMessage&&(a.errorMessage=e.errorMessage),e.items!==s.items&&(a.items=e.items),e.total!==s.total&&(a.total=e.total),e.auth!==s.auth&&(a.auth=e.auth),a}componentDidUpdate(e){this.props.params.id!=e.params.id&&this.loadViewData(),this.state.actionCalled&&(this.state.createSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.setState({processing:!1,openDialog:!1,queryParams:{...this.state.queryParams,page:1}}),this.loadViewData()):(this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.setState({processing:!1})),this.props.dispatch({type:R.Kl}))}render(){const{purchase:e}=this.state;return(0,z.jsxs)(m.A,{title:"Received Details",children:[e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"return-wrapper",children:[(0,z.jsxs)("div",{className:"return-header",children:[(0,z.jsx)("p",{children:"Received"}),(0,z.jsxs)("p",{children:["Received Date: ",e.invoice_date]}),e.notes?(0,z.jsxs)("p",{children:["Notes: ",e.notes]}):null]}),(0,z.jsx)("div",{className:"",children:(0,z.jsx)(r.A,{className:"add-button",variant:"contained",onClick:()=>this.props.navigate(-1),children:"Back"})})]}),(0,z.jsx)(c.Ay,{container:!0,spacing:u.iL,className:"details-header ratn-pur-wrapper loans_view",children:(0,z.jsx)(c.Ay,{item:!0,xs:12,children:(0,z.jsx)(w.A,{component:N.A,children:(0,z.jsx)("div",{className:"ratn-table-purchase-wrapper",children:(0,z.jsxs)(y.A,{"aria-label":"collapsible table",className:"invoice_product_list",children:[(0,z.jsx)(_.A,{className:"ratn-table-header",children:(0,z.jsxs)(C.A,{children:[(0,z.jsx)(v.A,{children:"Received Date"}),(0,z.jsx)(v.A,{children:"Received Number"}),(0,z.jsx)(v.A,{children:"Received From"}),(0,z.jsx)(v.A,{children:"No. of Products"}),(0,z.jsx)(v.A,{children:"Accept/Declined At"}),(0,z.jsx)(v.A,{children:"Status"})]})}),(0,z.jsx)(b.A,{className:"pur-details-table-body",children:(0,z.jsxs)(C.A,{children:[(0,z.jsx)(v.A,{component:"th",scope:"row",children:e.invoice_date}),(0,z.jsx)(v.A,{children:e.invoice_number}),(0,z.jsx)(v.A,{children:e.supplier_name}),(0,z.jsx)(v.A,{children:e.no_of_products}),(0,z.jsx)(v.A,{children:e.accept_declined_at}),(0,z.jsx)(v.A,{className:"sales-status",children:e.approve_status})]})})]})})})})}),0==e.is_approved?(0,z.jsxs)("div",{className:"sale-view-button",children:[(0,z.jsx)(r.A,{variant:"contained",className:"primary accept",onClick:()=>this.handleStatusChange(1),children:"Accept"}),(0,z.jsx)(r.A,{variant:"contained",className:"danger decline",onClick:()=>this.handleStatusChange(2),children:"Decline"})]}):null,(0,z.jsx)(c.Ay,{container:!0,spacing:u.iL,className:"details-header ratn-pur-wrapper loans_view",children:(0,z.jsxs)(c.Ay,{item:!0,xs:12,className:"p-add-product create-input",children:[(0,z.jsx)("h3",{className:"p_heading_list",children:"Product List"}),(0,z.jsx)(w.A,{component:N.A,children:(0,z.jsx)("div",{className:"ratn-table-purchase-wrapper",children:(0,z.jsxs)(y.A,{"aria-label":"collapsible table",className:"invoice_product_list",children:[(0,z.jsx)(_.A,{className:"ratn-table-header",children:(0,z.jsxs)(C.A,{children:[(0,z.jsx)(v.A,{}),(0,z.jsx)(v.A,{children:"#"}),(0,z.jsx)(v.A,{children:"Product Name"}),(0,z.jsx)(v.A,{children:"Category Name"}),(0,z.jsx)(v.A,{children:"Certificate Number"}),(0,z.jsx)(v.A,{children:"Total Weight"}),(0,z.jsx)(v.A,{children:"Size"}),(0,z.jsx)(v.A,{children:"Making Charge"}),(0,z.jsx)(v.A,{children:"Sub Total"}),(0,z.jsx)(v.A,{children:"Total"})]})}),(0,z.jsx)(b.A,{children:e.products.map(((e,s)=>(0,z.jsx)(G,{row:e,index:s},s)))})]})})})]})})]}):(0,z.jsx)(c.Ay,{container:!0,justifyContent:"center",children:(0,z.jsx)(n.A,{})}),(0,z.jsxs)(D.A,{open:this.state.confirmDialog,onClose:this.handleConfirmDialogClose,fullWidth:!0,maxWidth:"xs",className:"ratn-dialog-wrapper",children:[(0,z.jsx)(P.A,{children:1==this.state.status_changing?"Accept":"Decline"}),(0,z.jsx)(M.A,{children:(0,z.jsx)(k.A,{id:"alert-dialog-slide-description",children:1==this.state.status_changing?"Are you sure want to accept this?":"Are you sure want to decline this?"})}),(0,z.jsx)(V.A,{children:(0,z.jsxs)(l.A,{spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,z.jsx)(r.A,{variant:"outlined",onClick:this.handleConfirmDialogClose,children:"Cancel"}),(0,z.jsx)(r.A,{variant:"contained",type:"button",onClick:this.handleConfirmSubmit,children:"Yes, Confirm"})]})})]})]})}}const T=(0,g.Gh)((0,x.A)((0,i.connect)((e=>({purchase:e.superadmin.purchase.purchase,actionCalled:e.superadmin.payment.actionCalled,createSuccess:e.superadmin.payment.createSuccess,successMessage:e.superadmin.payment.successMessage,errorMessage:e.superadmin.payment.errorMessage,items:e.superadmin.payment.items,total:e.superadmin.payment.total,auth:e.auth})),(e=>({dispatch:e,actions:(0,j.bindActionCreators)({purchaseView:A.bG,paymentStore:q._N,paymentList:q.VS},e)})))(F)));function G(e){const{row:s,index:a}=e,[i,c]=t.useState(!1),n=a+1,r=n%2==0?"even":"odd";return(0,z.jsxs)(t.Fragment,{children:[(0,z.jsxs)(C.A,{sx:{"& > *":{borderBottom:"unset"}},className:(s.is_return?"strike_through ":"")+r,children:[(0,z.jsx)(v.A,{children:(0,z.jsx)(d.A,{"aria-label":"expand row",size:"small",onClick:()=>c(!i),className:"expand_icon",children:i?(0,z.jsx)(f.A,{}):(0,z.jsx)(S.A,{})})}),(0,z.jsx)(v.A,{component:"th",scope:"row",children:n<=9?"0"+n:n}),(0,z.jsx)(v.A,{component:"th",scope:"row",children:s.product_name}),(0,z.jsx)(v.A,{children:s.category_name}),(0,z.jsx)(v.A,{children:s.certificate_no}),(0,z.jsx)(v.A,{children:s.total_weight}),(0,z.jsx)(v.A,{children:s.size_name}),(0,z.jsx)(v.A,{children:s.making_charge}),(0,z.jsx)(v.A,{children:s.sub_total}),(0,z.jsx)(v.A,{children:s.total})]}),(0,z.jsx)(C.A,{className:"table-inner-row sub_table "+r,children:(0,z.jsx)(v.A,{style:{paddingBottom:0,paddingTop:0},colSpan:11,children:(0,z.jsx)(o.A,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,z.jsxs)(h.A,{sx:{margin:1},children:[(0,z.jsx)(p.A,{variant:"h6",gutterBottom:!0,component:"div"}),(0,z.jsxs)(y.A,{size:"medium","aria-label":"purchases",children:[(0,z.jsx)(_.A,{children:(0,z.jsxs)(C.A,{className:"pur-details-inner-table",children:[(0,z.jsx)(v.A,{children:"Material Name"}),(0,z.jsx)(v.A,{children:"Purity"}),(0,z.jsx)(v.A,{children:"Quantity"}),(0,z.jsx)(v.A,{children:"Weight"}),(0,z.jsx)(v.A,{children:"Unit"}),(0,z.jsx)(v.A,{children:"Rate"}),(0,z.jsx)(v.A,{children:"Amount"})]})}),(0,z.jsx)(b.A,{className:"pur-details-table-body",children:s.materials.map(((e,s)=>(0,z.jsxs)(C.A,{children:[(0,z.jsx)(v.A,{scope:"row",children:e.material_name}),(0,z.jsx)(v.A,{children:e.purity_name}),(0,z.jsx)(v.A,{children:e.quantity}),(0,z.jsx)(v.A,{children:e.weight}),(0,z.jsx)(v.A,{children:e.unit_name}),(0,z.jsx)(v.A,{children:e.rate}),(0,z.jsx)(v.A,{children:e.amount})]},s)))})]})]})})})})]})}}}]);