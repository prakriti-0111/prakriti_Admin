"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8085],{16078:(e,t,i)=>{i.d(t,{Tz:()=>l,Xs:()=>d,ef:()=>o,pe:()=>n,uA:()=>c});var a=i(80325),s=i(34364),r=i(45892);const n=e=>(e=(0,r.x0)(e,!0),t=>{a.A.get("/superadmin/employees".concat(e)).then((e=>{e.data.success&&t({type:s.Rk,payload:e.data.data})})).catch((e=>{}))}),l=e=>t=>{a.A.post("/superadmin/employees/store",e).then((e=>{t({type:s.wR,payload:e.data})})).catch((e=>{}))},d=(e,t)=>(t=t||"",i=>{a.A.get("/superadmin/employees/fetch/".concat(e,"?role_id=").concat(t)).then((e=>{e.data.success&&i({type:s.xQ,payload:e.data.data})})).catch((e=>{}))}),c=(e,t)=>i=>{a.A.post("/superadmin/employees/update/".concat(e),t).then((e=>{i({type:s.SV,payload:e.data})})).catch((e=>{}))},o=(e,t)=>i=>{a.A.delete("/superadmin/employees/delete/".concat(e),t).then((e=>{i({type:s.W8,payload:e.data})})).catch((e=>{}))}},49532:(e,t,i)=>{i.d(t,{PL:()=>d,XT:()=>l,Y8:()=>r,l1:()=>n});var a=i(80325),s=i(45892);const r=e=>(e=(0,s.x0)(e,!0),a.A.get("/superadmin/stock-material-history".concat(e))),n=e=>a.A.post("/superadmin/stock-material-history/store",e),l=e=>a.A.post("/superadmin/stock-material-history/store-by-product",e),d=(e,t)=>a.A.post("/superadmin/stock-material-history/status-update/".concat(e),t)},78085:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Z});var a=i(63696),s=i(52821),r=i(72839),n=i(49746),l=i(45271),d=i(36213),c=i(70387),o=i(36122),h=i(39487),u=i(3799),p=i(2598),m=i(98993),_=i(73947),x=i(25606),g=i(45166),j=i(10228),A=i(47998),y=i(41795),v=i(79765),b=i(58792),f=i(68215),C=i(61095),w=i(66107),S=i(26365),N=i(78976),k=i(65469),D=i(89429),P=i(52805),W=i(79859),q=i(43191),z=i(29443),R=i(61176),I=i(66098),F=i(50977),O=i(51449),L=i(71558),M=i(49532),T=i(88441),V=i(24019),G=i(45892),Q=(i(27874),i(37001)),B=i(16078),U=i(17243),X=i.n(U),Y=i(62540);function K(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class E extends a.Component{constructor(e){super(e),K(this,"loadViewData",(()=>{(0,L.Ah)(this.props.params.id).then((e=>{var t;e.data.success&&this.setState({order:e.data.data,notes:null!==(t=e.data.data.notes)&&void 0!==t?t:""})}))})),K(this,"handleSale",(()=>{this.setState({saleDialog:!0})})),K(this,"handleSaleDialogClose",((e,t)=>{t&&"backdropClick"==t||this.setState({saleDialog:!1})})),K(this,"handleSaleSubmit",(async()=>{this.setState({processing:!0});let e=await(0,L.ep)(this.state.order.id);e.data.success?this.props.navigate((0,G.zr)((0,G.mA)(this.state.auth))+"/sales/create?order_id="+this.state.order.id+"&from_order_price="+this.state.from_order_price+"&all_added="+e.data.data.all_added):(this.setState({processing:!1}),this.props.enqueueSnackbar(e.data.message,{variant:"error"}))})),K(this,"handleStatus",(()=>{this.setState({order_status:this.state.order.status,openDialog:!0})})),K(this,"handleDialogClose",((e,t)=>{t&&"backdropClick"==t||this.setState({openDialog:!1})})),K(this,"handleSubmit",(async()=>{this.setState({processing:!0});let e=await(0,L.KM)(this.state.order.id,{status:this.state.order_status,advance_amount:this.state.advance_amount}),t=!1;e.data.success?(this.props.enqueueSnackbar(e.data.message,{variant:"success"}),this.loadViewData(),this.setState({advance_amount:""})):(this.props.enqueueSnackbar(e.data.message,{variant:"error"}),t=!0),this.setState({processing:!1,openDialog:t})})),K(this,"handleImageClick",(e=>{this.setState({imageDialogOpen:!0,imagePath:e})})),K(this,"handleImageDialogClose",(()=>{this.setState({imageDialogOpen:!1})})),K(this,"handleCheckBox",((e,t)=>{let i=this.state.action_products,a=this.state.order,s="item_"+t;if(e.target.checked){let e=[];for(let i=0;i<a.products[t].materials.length;i++){let s=a.products[t].materials[i];e.push({id:s.id,material_id:s.material_id,unit_id:s.unit_id,purity_id:s.purity_id,quantity:"",weight:"",weight_err:!1})}i[s]={id:a.products[t].id,product_id:a.products[t].product_id,product_type:a.products[t].product_type,materials:e,certificate_no:"",certificate_no_err:!1}}else delete i[s];this.setState({action_products:i})})),K(this,"hasChecked",(e=>"item_"+e in this.state.action_products)),K(this,"handleProduct",((e,t)=>{let i=this.state.action_products;const{name:a,value:s}=e.target;i["item_"+t][a]=s,this.setState({action_products:i})})),K(this,"handleCertificate",((e,t)=>{const{name:i,value:a}=e.target;let s=this.state.receiving_product;s.products[t][i]=a,this.setState({receiving_product:s})})),K(this,"handleMaterial",((e,t,i)=>{let a=this.state.action_products;const{name:s,value:r}=e.target;a["item_"+t].materials[i][s]=r,this.setState({action_products:a})})),K(this,"handleProductConfirmSubmit",(()=>{let e=!1,t=this.state.action_products;for(let i of Object.keys(t))for(let a=0;a<t[i].materials.length;a++)t[i].materials[a].weight?t[i].materials[a].weight_err=!1:(t[i].materials[a].weight_err=!0,e=!0);this.setState({action_products:t}),e||this.setState({productDialog:!0})})),K(this,"handleProductDialogClose",((e,t)=>{t&&"backdropClick"==t||this.setState({productDialog:!1})})),K(this,"handleProductSubmit",(async()=>{let{order:e,action_products:t}=this.state,i=!1;if(this.state.user_id?this.setState({user_id_err:!1}):(this.setState({user_id_err:!0}),i=!0),!i){this.setState({processing:!0});let i={user_id:this.state.user_id,order_id:e.id,products:Object.values(t),type:"send"},a=await(0,M.XT)(i);a.data.success?(this.props.enqueueSnackbar(a.data.message,{variant:"success"}),this.loadViewData(),this.setState({productDialog:!1,action_products:{}})):this.props.enqueueSnackbar(a.data.message,{variant:"error"}),this.setState({processing:!1})}})),K(this,"getArrayComponent",(e=>(0,Y.jsx)(Y.Fragment,{children:e.map(((e,t)=>(0,Y.jsx)(a.Fragment,{children:e},t)))}))),K(this,"handleSizeChange",(async(e,t)=>{const{name:i,value:a}=e.target;let s=t.cart_data,r=X().filter(s.size_materials,(function(e){return e.size_id==a}));r=r[0];let n=null;for(let e=0;e<s.cart_material.length;e++){let i=X().filter(r.materials,(function(t){return t.material_id==s.cart_material[e].material_id}));if(i=i[0],X().filter(i.purities,(function(t){return t.id==s.cart_material[e].purity_id})).length>0){let e=0,i=[];for(let t=0;t<r.materials.length;t++){let a=r.materials[t],n=X().filter(s.cart_material,(function(e){return e.material_id==a.material_id})),l=X().filter(a.purities,(function(e){return e.id==n[0].purity_id})),d=(0,G.Ax)(a.unit_name,a.weight);d=(0,G.sq)(d),e+=parseFloat(d),i.push({material_id:a.material_id,purity_id:l[0].id,weight:a.weight,unit_id:a.unit_id,quantity:a.quantity})}n={total_weight:e,size_id:r.size_id,materials:i,update_type:"size",order_id:this.state.order.id,id:t.id,cart_id:s.id,role_id:this.state.order.role_id}}}if(n){this.setState({is_updating:!0});let e=await(0,L.aG)(n);e.data.success&&(this.props.enqueueSnackbar(e.data.message,{variant:"success"}),this.loadViewData()),this.setState({is_updating:!1})}})),K(this,"handlPurityChange",(async(e,t,i)=>{this.setState({is_updating:!0});let a=t.cart_data,s=await(0,L.aG)({material_id:i.material_id,purity_id:e.target.value,update_type:"purity_id",order_id:this.state.order.id,id:t.id,cart_id:a.id,role_id:this.state.order.role_id,product_m_id:i.id});s.data.success&&(this.props.enqueueSnackbar(s.data.message,{variant:"success"}),this.loadViewData()),this.setState({is_updating:!1})})),K(this,"getPurityList",((e,t)=>{let i=e.cart_data,a=null;return a="material"==i.product_type?i.size_materials[0]:X().filter(i.size_materials,(function(t){return t.size_id==e.size_id}))[0],X().filter(a.materials,(function(e){return e.material_id==t.material_id}))[0].purities})),K(this,"handleRecive",(e=>{let t=[];for(let i=0;i<e.materials.length;i++){let a=e.materials[i];t[i]={material_id:a.material_id,unit_id:a.unit_id,unit_name:a.unit_name,purity_id:a.purity_id,quantity:a.sent_quantity,weight:a.sent_weight,weight_err:!1}}let i={id:e.id,product_id:e.product_id,product_type:e.product_type,certificate_no:"",certificate_no_err:!1},a=[];if("material"==e.product_type)a[0]={...i,materials:[...t]};else for(let t=0;t<e.quantity;t++){let s=[];for(let t=0;t<e.materials.length;t++){let i=e.materials[t];s[t]={material_id:i.material_id,unit_id:i.unit_id,unit_name:i.unit_name,purity_id:i.purity_id,quantity:i.sent_quantity,weight:i.sent_weight,weight_err:!1}}let r=[...s];a[t]={...i,materials:[...r]}}let s={id:e.id,product_id:e.product_id,product_type:e.product_type,products:a,user_id:e.worker_id,cart_id:e.cart_data.id};this.setState({receiving_product:s})})),K(this,"handleCancelRecive",(()=>{this.setState({receiving_product:null})})),K(this,"isRecieving",(e=>{let t=this.state.receiving_product;return!(!t||t.id!=e.id)})),K(this,"handleReciveSubmit",(e=>{let t=!1,i=this.state.receiving_product;for(let e=0;e<i.products.length;e++){let a=i.products[e];for(let s=0;s<a.materials.length;s++)a.materials[s].weight?i.products[e].materials[s].weight_err=!1:(i.products[e].materials[s].weight_err=!0,t=!0);"material"!=i.product_type&&(a.certificate_no?i.products[e].certificate_no_err=!1:(i.products[e].certificate_no_err=!0,t=!0))}this.setState({receiving_product:i}),t||this.setState({receiveDialog:!0})})),K(this,"handleReceiveMaterial",((e,t,i)=>{const{name:a,value:s}=e.target;let r=this.state.receiving_product,n=[...r.products],l=[...n[i].materials];l[t][a]=s,n[i].materials=l,r.products=n,this.setState({receiving_product:r},(()=>{}))})),K(this,"handleReceiveDialogClose",((e,t)=>{t&&"backdropClick"==t||this.setState({receiveDialog:!1})})),K(this,"handleReceiveSubmitProceed",(async()=>{let{order:e,receiving_product:t}=this.state;{this.setState({processing:!0});let i={user_id:t.user_id,order_id:e.id,products:[{...t}],type:"receive",role_id:this.state.order.role_id,cart_id:t.cart_id},a=await(0,M.XT)(i);a.data.success?(this.props.enqueueSnackbar(a.data.message,{variant:"success"}),this.loadViewData(),this.setState({receiveDialog:!1,receiving_product:null})):this.props.enqueueSnackbar(a.data.message,{variant:"error"}),this.setState({processing:!1})}})),this.state={order:null,auth:this.props.auth,employeeList:this.props.employeeList,saleDialog:!1,from_order_price:0,processing:!1,openDialog:!1,order_status:"",advance_amount:"",imageDialogOpen:!1,imagePath:"",action_products:{},productDialog:!1,user_id:"",user_id_err:!1,is_updating:!1,receiving_product:null,receiveDialog:!1,notes:""},this.columns=[{name:"image",display_name:"Image",isImage:!0},{name:"product_name",display_name:"Product Name"},{name:"certificate_no",display_name:"Certificate No",width:"120px"},{name:"total_weight_display",display_name:"Total Wt.",width:"90px"},{name:"stock_material_display",display_name:"Materials Name",width:"165px"},{name:"weight_display",display_name:"Qty"},{name:"unit_display",display_name:"Unit"},{name:"product_code",display_name:"P Code"},{name:"size_name",display_name:"Size"},{name:"quantity",display_name:"Quantity"},{name:"rate",display_name:"Price"}],this.isManager=(0,G.k3)(),this.isSuperAdmin=(0,G.jm)(),this.timer=0}componentDidMount(){this.loadViewData(),this.props.actions.employeeList({role_id:10})}static getDerivedStateFromProps(e,t){let i={};return e.auth!==t.auth&&(i.auth=e.auth),e.employeeList!==t.employeeList&&(i.employeeList=e.employeeList),i}componentDidUpdate(e){this.props.params.id!=e.params.id&&this.loadViewData()}render(){const{order:e,action_products:t,is_updating:i,receiving_product:a}=this.state;let s=[];return e&&(s=e.is_customer||e.is_retailer?[{label:"On Process",value:"on_process"},{label:"Is Ready",value:"is_ready"},{label:"Shipped",value:"shipped"},{label:"Out For Delivery",value:"out_for_delivery"},{label:"Delivered",value:"delivered"},{label:"Cancelled",value:"cancelled"}]:[{label:"Accepted",value:"accepted"},{label:"On Process",value:"on_process"},{label:"Is Ready",value:"is_ready"},{label:"Shipped",value:"shipped"},{label:"Out For Delivery",value:"out_for_delivery"},{label:"Delivered",value:"delivered"},{label:"Cancelled",value:"cancelled"}]),(0,Y.jsx)(Y.Fragment,{children:e?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:i,children:(0,Y.jsx)(d.A,{color:"inherit"})}),(0,Y.jsxs)(l.Ay,{container:!0,spacing:2,className:"loans_view p_view",children:[(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Order #",variant:"outlined",fullWidth:!0,value:e.order_no,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Order Date",variant:"outlined",fullWidth:!0,value:e.order_date,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Order From",variant:"outlined",fullWidth:!0,value:e.order_from,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Mobile",variant:"outlined",fullWidth:!0,value:e.mobile,disabled:!0,InputProps:{className:"non_disable_text"}})}),e.is_customer||e.is_retailer?(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Total Amount",variant:"outlined",fullWidth:!0,value:e.total_amount,disabled:!0,InputProps:{className:"non_disable_text"}})}):null,e.is_customer||e.is_retailer?(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Paid Amount",variant:"outlined",fullWidth:!0,value:e.paid_amount_display,disabled:!0,InputProps:{className:"non_disable_text"}})}):null,(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Status",variant:"outlined",fullWidth:!0,value:e.status_display,InputProps:{className:"non_disable_text cursor-pointer"},inputProps:{className:"cursor-pointer"},role:"button",onClick:this.handleStatus})}),e.is_customer||e.is_retailer?(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:4,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Address",variant:"outlined",fullWidth:!0,value:e.formated_address,disabled:!0,InputProps:{className:"non_disable_text"}})}):null,e.is_customer||e.is_retailer?(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Assign To",variant:"outlined",fullWidth:!0,value:e.sale_executive_name,disabled:!0,InputProps:{className:"non_disable_text"}})}):null,"cancelled"==e.status&&e.cancel_reason?(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:4,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Cancel Reason",variant:"outlined",fullWidth:!0,value:e.cancel_reason,disabled:!0,InputProps:{className:"non_disable_text"}})}):null,(0,G.Im)(e.notes)?null:(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:4,className:"create-input",children:(0,Y.jsx)(o.A,{label:"Notes",variant:"outlined",fullWidth:!0,value:e.notes,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,G.Im)(e.image)?null:(0,Y.jsx)(l.Ay,{item:!0,xs:6,md:1,className:"create-input",children:(0,Y.jsx)(h.A,{children:(0,Y.jsx)(u.A,{onClick:()=>this.handleImageClick(e.image),className:"cursor-pointer",children:(0,Y.jsx)("img",{src:e.image,srcSet:e.image,loading:"lazy"})})})})]}),(0,Y.jsxs)(l.Ay,{container:!0,spacing:R.iL,className:"details-header ratn-pur-wrapper loans_view",children:[(0,Y.jsxs)(l.Ay,{item:!0,xs:12,className:"p-add-product create-input",children:[(0,Y.jsx)("h3",{className:"p_heading_list",children:"Product List"}),(0,Y.jsx)(p.A,{component:V.A,children:(0,Y.jsx)("div",{className:"ratn-table-purchase-wrapper",children:(0,Y.jsxs)(m.A,{"aria-label":"collapsible table",className:"invoice_product_list",children:[(0,Y.jsx)(_.A,{className:"ratn-table-header",children:(0,Y.jsxs)(x.A,{children:[!this.isManager&&!this.isSuperAdmin||"accepted"!=e.status&&"on_process"!=e.status?null:(0,Y.jsx)(g.A,{sx:{width:"10px"}}),(0,Y.jsx)(g.A,{sx:{width:"30px"},children:"#"}),(0,Y.jsx)(g.A,{children:"Image"}),(0,Y.jsx)(g.A,{children:"Product Name"}),(0,Y.jsx)(g.A,{sx:{width:"150px"},children:"Certificate No"}),(0,Y.jsx)(g.A,{sx:{width:"450px"},children:"Materials"}),(0,Y.jsx)(g.A,{children:"P Code"}),(0,Y.jsx)(g.A,{children:"Size"}),(0,Y.jsx)(g.A,{children:"Quantity"}),e.is_customer||e.is_retailer?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(g.A,{children:"Old Price"}),(0,Y.jsx)(g.A,{children:"Price"})]}):null,(0,Y.jsx)(g.A,{children:"Worker"})]})}),(0,Y.jsx)(j.A,{children:e.products.map(((i,s)=>(0,Y.jsxs)(x.A,{children:[!this.isManager&&!this.isSuperAdmin||"accepted"!=e.status&&"on_process"!=e.status?null:(0,Y.jsx)(g.A,{children:"pending"==i.status?(0,Y.jsx)(A.A,{onChange:e=>this.handleCheckBox(e,s),checked:this.hasChecked(s)}):null}),(0,Y.jsx)(g.A,{children:s+1}),(0,Y.jsx)(g.A,{children:(0,Y.jsx)("img",{src:i.image,style:{width:"60px",height:"40px"},className:"table-data-image cursor-pointer",onClick:()=>this.handleImageClick(i.image)})}),(0,Y.jsx)(g.A,{children:i.product_name}),(0,Y.jsx)(g.A,{children:this.isRecieving(i)&&"material"!=i.product_type?(0,Y.jsx)(Y.Fragment,{children:a.products.map(((e,t)=>(0,Y.jsx)("input",{type:"text",value:e.certificate_no,name:"certificate_no",onChange:e=>this.handleCertificate(e,t),className:"custom_input"+(e.certificate_no_err?" error_input":""),style:{width:"80%",height:"30px",padding:"5px 8px",marginTop:"2px"}},t)))}):i.certificate_no}),(0,Y.jsx)(g.A,{sx:{paddingTop:"0px"},children:"pending"==i.status?(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(m.A,{className:"table-bordered",children:[(0,Y.jsx)(_.A,{className:"ratn-table-header",children:(0,Y.jsxs)(x.A,{children:[(0,Y.jsx)(g.A,{children:"Name"}),(0,Y.jsx)(g.A,{children:"Weight"}),(0,Y.jsx)(g.A,{children:"Purity"}),(0,Y.jsx)(g.A,{children:"Unit"}),(0,Y.jsx)(g.A,{children:"Qty"})]})}),(0,Y.jsx)(j.A,{children:i.materials.map(((a,r)=>(0,Y.jsxs)(x.A,{children:[(0,Y.jsx)(g.A,{children:a.material_name}),(0,Y.jsxs)(g.A,{children:[a.weight,this.hasChecked(s)?(0,Y.jsx)("div",{style:{position:"relative"},children:(0,Y.jsx)("input",{type:"text",value:t["item_"+s].materials[r].weight,name:"weight",onChange:e=>this.handleMaterial(e,s,r),className:"custom_input"+(t["item_"+s].materials[r].weight_err?" error_input":""),style:{width:"100%",height:"30px"}})}):null]}),(0,Y.jsx)(g.A,{children:a.purity_name?(0,Y.jsx)(Y.Fragment,{children:"pending"!=i.status&&"on_process"!=i.status||"accepted"!=e.status&&"on_process"!=e.status?a.purity_name:(0,Y.jsx)("select",{onChange:e=>this.handlPurityChange(e,i,a),name:"purity_id",value:a.purity_id,children:this.getPurityList(i,a).map(((e,t)=>(0,Y.jsx)("option",{value:e.id,children:e.name},t)))})}):null}),(0,Y.jsx)(g.A,{children:a.unit_name}),(0,Y.jsxs)(g.A,{children:[a.quantity,this.hasChecked(s)?(0,Y.jsx)("div",{style:{position:"relative"},children:(0,Y.jsx)("input",{type:"text",value:t["item_"+s].materials[r].quantity,name:"quantity",onChange:e=>this.handleMaterial(e,s,r),className:"custom_input",style:{width:"100%",height:"30px"}})}):null]})]},r)))})]})}):(0,Y.jsx)(Y.Fragment,{children:this.isRecieving(i)?(0,Y.jsx)(Y.Fragment,{children:a.products.map(((e,t)=>(0,Y.jsxs)(m.A,{className:"table-bordered input_table",children:[(0,Y.jsx)(_.A,{className:"ratn-table-header",children:(0,Y.jsxs)(x.A,{children:[(0,Y.jsx)(g.A,{children:"Name"}),(0,Y.jsx)(g.A,{children:"Weight"}),(0,Y.jsx)(g.A,{children:"Purity"}),(0,Y.jsx)(g.A,{children:"Unit"}),(0,Y.jsx)(g.A,{children:"Qty"})]})}),(0,Y.jsx)(j.A,{children:i.materials.map(((e,i)=>(0,Y.jsxs)(x.A,{children:[(0,Y.jsx)(g.A,{children:e.material_name}),(0,Y.jsxs)(g.A,{children:[e.weight,(0,Y.jsx)("div",{style:{position:"relative"},children:(0,Y.jsx)("input",{type:"text",value:a.products[t].materials[i].weight,name:"weight",onChange:e=>this.handleReceiveMaterial(e,i,t),className:"custom_input"+(a.products[t].materials[i].weight_err?" error_input":""),style:{width:"100%",height:"20px",padding:0}})})]}),(0,Y.jsx)(g.A,{children:e.purity_name}),(0,Y.jsx)(g.A,{children:e.unit_name}),(0,Y.jsxs)(g.A,{children:[e.quantity,(0,Y.jsx)("div",{style:{position:"relative"},children:(0,Y.jsx)("input",{type:"text",value:a.products[t].materials[i].quantity,name:"quantity",onChange:e=>this.handleReceiveMaterial(e,i,t),className:"custom_input",style:{width:"100%",height:"20px",padding:0}})})]})]},i)))})]},t)))}):(0,Y.jsxs)(m.A,{className:"table-bordered",children:[(0,Y.jsx)(_.A,{className:"ratn-table-header",children:(0,Y.jsxs)(x.A,{children:[(0,Y.jsx)(g.A,{children:"Name"}),(0,Y.jsx)(g.A,{children:"Weight"}),(0,Y.jsx)(g.A,{children:"Purity"}),(0,Y.jsx)(g.A,{children:"Unit"}),(0,Y.jsx)(g.A,{children:"Qty"})]})}),(0,Y.jsx)(j.A,{children:i.materials.map(((t,a)=>(0,Y.jsxs)(x.A,{children:[(0,Y.jsx)(g.A,{children:t.material_name}),(0,Y.jsx)(g.A,{children:t.weight}),(0,Y.jsx)(g.A,{children:t.purity_name?(0,Y.jsx)(Y.Fragment,{children:"pending"!=i.status&&"on_process"!=i.status||"accepted"!=e.status&&"on_process"!=e.status?t.purity_name:(0,Y.jsx)("select",{onChange:e=>this.handlPurityChange(e,i,t),name:"purity_id",value:t.purity_id,children:this.getPurityList(i,t).map(((e,t)=>(0,Y.jsx)("option",{value:e.id,children:e.name},t)))})}):null}),(0,Y.jsx)(g.A,{children:t.unit_name}),(0,Y.jsx)(g.A,{children:t.quantity})]},a)))})]})})}),(0,Y.jsx)(g.A,{children:i.product_code}),(0,Y.jsx)(g.A,{children:i.size_name?(0,Y.jsx)(Y.Fragment,{children:"pending"!=i.status&&"on_process"!=i.status||"accepted"!=e.status&&"on_process"!=e.status||"material"==i.product_type?i.size_name:(0,Y.jsx)("select",{onChange:e=>this.handleSizeChange(e,i),name:"size_id",value:i.size_id,children:i.cart_data.size_materials.map(((e,t)=>(0,Y.jsx)("option",{value:e.size_id,children:e.size_name},t)))})}):null}),(0,Y.jsx)(g.A,{children:i.quantity}),e.is_customer||e.is_retailer?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(g.A,{children:i.old_rate}),(0,Y.jsx)(g.A,{children:i.rate})]}):null,(0,Y.jsxs)(g.A,{children:[i.worker_name,"on_process"==i.status?(0,Y.jsx)(Y.Fragment,{children:this.isRecieving(i)?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{children:(0,Y.jsx)("button",{onClick:()=>this.handleReciveSubmit(i),className:"receive_btn",style:{marginBottom:"2px"},children:"Submit"})}),(0,Y.jsx)("div",{children:(0,Y.jsx)("button",{onClick:()=>this.handleCancelRecive(),className:"receive_cancel_btn",children:"Cancel"})})]}):(0,Y.jsx)("div",{children:(0,Y.jsx)("button",{onClick:()=>this.handleRecive(i),className:"receive_btn",children:"Receive"})})}):(0,Y.jsx)(Y.Fragment,{children:"received"==i.status?(0,Y.jsx)("div",{children:(0,Y.jsx)("button",{className:"receive_success_btn",children:"Received"})}):null})]})]},s)))})]})})})]}),Object.keys(t).length>0?(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:12,style:{paddingBottom:"15px"},children:(0,Y.jsx)(r.A,{spacing:1,direction:"row",className:"ratn-footer-buttons",justifyContent:"flex-end",children:(0,Y.jsx)(n.A,{variant:"contained",className:"conf-button",type:"button",onClick:this.handleProductConfirmSubmit,children:"Send"})})}):null]}),(0,Y.jsxs)(D.A,{className:"ratn-dialog-wrapper",open:this.state.saleDialog,onClose:this.handleSaleDialogClose,fullWidth:!0,maxWidth:"xs",children:[(0,Y.jsx)(q.A,{children:"Sale Order"}),(0,Y.jsxs)(P.A,{children:["Are you sure want to sale this order?",e.is_customer&&e.paid_amount>0?(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(y.A,{children:(0,Y.jsxs)(v.A,{row:!0,name:"row-radio-buttons-group",value:this.state.from_order_price,onChange:e=>this.setState({from_order_price:e.target.value}),children:[(0,Y.jsx)(b.A,{value:1,control:(0,Y.jsx)(f.A,{}),label:"Price will be same as order price."}),(0,Y.jsx)(b.A,{value:0,control:(0,Y.jsx)(f.A,{}),label:"Price will be same as current price."})]})})}):(0,Y.jsx)(y.A,{children:(0,Y.jsx)(v.A,{row:!0,name:"row-radio-buttons-group",value:this.state.from_order_price,children:(0,Y.jsx)(b.A,{value:0,control:(0,Y.jsx)(f.A,{}),label:"Price will be same as current price."})})})]}),(0,Y.jsx)(z.A,{children:(0,Y.jsxs)(r.A,{spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,Y.jsx)(n.A,{variant:"outlined",onClick:this.handleSaleDialogClose,children:"Cancel"}),(0,Y.jsx)(n.A,{variant:"contained",type:"button",onClick:this.handleSaleSubmit,children:"Yes, Confirm"})]})})]}),(0,Y.jsxs)(D.A,{className:"ratn-dialog-wrapper",open:this.state.openDialog,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"xs",children:[(0,Y.jsx)(q.A,{children:"Order Status"}),(0,Y.jsxs)(P.A,{children:[(0,Y.jsx)(W.A,{}),(0,Y.jsx)(C.A,{sx:{flexGrow:1,m:.5},children:(0,Y.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,Y.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:(0,Y.jsxs)(y.A,{fullWidth:!0,children:[(0,Y.jsx)(w.A,{children:"Order Status"}),(0,Y.jsx)(S.A,{className:"input-inner",value:this.state.order_status,fullWidth:!0,label:"Order Status",onChange:e=>this.setState({order_status:e.target.value}),children:s.map(((e,t)=>(0,Y.jsx)(N.A,{value:e.value,children:e.label},t)))})]})}),"accepted"==this.state.order_status?(0,Y.jsx)(l.Ay,{item:!0,xs:12,md:12,className:"create-input",children:(0,Y.jsx)(k.A,{className:"description",minRows:3,placeholder:"Notes",style:{width:"100%"},value:this.state.notes,onChange:e=>this.setState({notes:e.target.value})})}):null,(0,Y.jsx)(l.Ay,{item:!0,xs:12,children:(0,Y.jsxs)(r.A,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,Y.jsx)(n.A,{variant:"contained",type:"button",disabled:this.state.processing||this.state.order&&this.state.order.status==this.state.order_status,onClick:this.handleSubmit,children:this.state.processing?"Processing":"Submit"}),(0,Y.jsx)(n.A,{variant:"outlined",onClick:this.handleDialogClose,children:"Cancel"})]})})]})})]})]}),(0,Y.jsxs)(D.A,{className:"ratn-dialog-wrapper",open:this.state.productDialog,onClose:this.handleProductDialogClose,fullWidth:!0,maxWidth:"xs",children:[(0,Y.jsx)(q.A,{children:"Send Material"}),(0,Y.jsxs)(P.A,{children:[(0,Y.jsx)(W.A,{}),(0,Y.jsx)(C.A,{sx:{flexGrow:1,m:.5},children:(0,Y.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,Y.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:(0,Y.jsxs)(y.A,{fullWidth:!0,error:this.state.user_id_err,children:[(0,Y.jsx)(w.A,{children:"Worker"}),(0,Y.jsxs)(S.A,{value:this.state.user_id,label:"Worker",onChange:e=>this.setState({user_id:e.target.value}),className:"input-inner",defaultValue:"",children:[(0,Y.jsx)(N.A,{value:""}),this.state.employeeList.map(((e,t)=>(0,Y.jsx)(N.A,{value:e.id,children:e.name},t)))]})]})}),(0,Y.jsx)(l.Ay,{item:!0,xs:12,children:(0,Y.jsxs)(r.A,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,Y.jsx)(n.A,{variant:"contained",type:"button",disabled:this.state.processing,onClick:this.handleProductSubmit,children:this.state.processing?"Processing":"Submit"}),(0,Y.jsx)(n.A,{variant:"outlined",onClick:this.handleProductDialogClose,children:"Cancel"})]})})]})})]})]}),(0,Y.jsxs)(D.A,{className:"ratn-dialog-wrapper",open:this.state.receiveDialog,onClose:this.handleReceiveDialogClose,fullWidth:!0,maxWidth:"xs",children:[(0,Y.jsx)(q.A,{children:"Receive Product"}),(0,Y.jsxs)(P.A,{children:[(0,Y.jsx)(W.A,{}),(0,Y.jsx)(C.A,{sx:{flexGrow:1,m:.5},children:(0,Y.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,Y.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:"Are you sure want to received ?"}),(0,Y.jsx)(l.Ay,{item:!0,xs:12,children:(0,Y.jsxs)(r.A,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,Y.jsx)(n.A,{variant:"contained",type:"button",disabled:this.state.processing,onClick:this.handleReceiveSubmitProceed,children:this.state.processing?"Processing":"Submit"}),(0,Y.jsx)(n.A,{variant:"outlined",onClick:this.handleReceiveDialogClose,children:"Cancel"})]})})]})})]})]}),(0,Y.jsxs)(D.A,{onClose:this.handleImageDialogClose,open:this.state.imageDialogOpen,children:[(0,Y.jsx)(q.A,{children:(0,Y.jsx)(Q.A,{sx:{cursor:"pointer",float:"right",marginTop:"5px",width:"30px"},onClick:this.handleImageDialogClose})}),(0,Y.jsx)(P.A,{children:(0,Y.jsx)("img",{src:this.state.imagePath,width:500,height:350})})]})]}):(0,Y.jsx)(l.Ay,{container:!0,justifyContent:"center",children:(0,Y.jsx)(d.A,{})})})}}const H=(0,O.Gh)((0,F.A)((0,s.connect)((e=>({auth:e.auth,employeeList:e.superadmin.employee.items})),(e=>({dispatch:e,actions:(0,T.bindActionCreators)({employeeList:B.pe},e)})))(E)));class J extends a.Component{constructor(e){super(e),this.state={auth:this.props.auth}}componentDidMount(){}static getDerivedStateFromProps(e,t){let i={};return e.auth!==t.auth&&(i.auth=e.auth),i}render(){return(0,Y.jsx)(I.A,{title:"Order Details",secondary:(0,Y.jsx)(r.A,{spacing:1,direction:"row",justifyContent:"flex-end",children:(0,Y.jsx)(n.A,{variant:"contained",onClick:()=>this.props.navigate((0,G.zr)((0,G.mA)(this.state.auth))+"/orders"),children:"Back"})}),children:(0,Y.jsx)(H,{})})}}const Z=(0,O.Gh)((0,F.A)((0,s.connect)((e=>({auth:e.auth})),(e=>({dispatch:e})))(J)))}}]);