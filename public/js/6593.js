(self.webpackChunk=self.webpackChunk||[]).push([[6593],{65957:(e,s,t)=>{"use strict";t.d(s,{MH:()=>r,NB:()=>j,ec:()=>l});var a=t(80325),n=t(60131),i=t(45892);const l=e=>s=>{a.A.post("/sales-executive/change-password",e).then((e=>{s({type:n.jF,payload:e.data})})).catch((e=>{}))},r=e=>(e=(0,i.x0)(e,!0),a.A.get("/sales-executive/attendence".concat(e))),j=e=>a.A.post("/sales-executive/attendence-update",e)},11922:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>D});var a=t(63696),n=t(52821),i=t(61095),l=t(45271),r=t(36122),j=t(72839),c=t(49746),h=t(66098),o=t(50977),d=t(65957),m=t(89429),g=t(52805),p=t(79859),u=t(51449),x=t(45892),f=t(72514),b=(t(73442),t(42689)),y=t.n(b),k=t(59964),v=t(62540);function w(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}class A extends a.Component{constructor(e){super(e),w(this,"handleMonthAndYearChange",(e=>{let{action:s,activeStartDate:t,value:a,view:n}=e;const i=t.getFullYear(),l=t.getMonth()+1;this.setState({year:i,month:l},(()=>{this.loadAttendence()}))})),w(this,"onChange",(e=>{this.setState({calendar_value:e})})),w(this,"loadAttendence",(async()=>{let e=await(0,d.MH)({month:this.state.month,year:this.state.year});e.data.success&&this.setState({attendance:e.data.data})})),w(this,"onClickDay",((e,s)=>{let t=y()(e).format("YYYY-MM-DD"),a=this.state.attendance.days.find((e=>e.date==y()(t).format("YYYY-MM-DD")));a&&"absent"==a.status&&this.setState({dateDetails:a,openDialog:!0,existing_image:a.image,explanation:a.late_reason})})),w(this,"handleDialogClose",(()=>{this.setState({openDialog:!1})})),w(this,"handleSubmit",(async()=>{if(this.state.explanation){this.setState({explanation_err:!1,processing:!0});let e={explanation:this.state.explanation,date:this.state.dateDetails.date};e.image=this.state.image_file?await(0,x.nk)(this.state.image_file):"";let s=await(0,d.NB)(e);s.data.success?(this.props.enqueueSnackbar(s.data.message,{variant:"success"}),this.setState({processing:!1,openDialog:!1,explanation:"",image_file:null},(()=>{this.loadAttendence()}))):(this.props.enqueueSnackbar(s.data.message,{variant:"error"}),this.setState({processing:!1}))}else this.setState({explanation_err:!0})})),w(this,"onChangeImage",(e=>{this.setState({image_file:e.target.files[0]}),this.imageFileRef&&(this.imageFileRef.current.value=null)})),w(this,"getImageSrc",(e=>URL.createObjectURL(e))),w(this,"handleImageBrowse",(()=>{this.state.dateDetails&&this.state.dateDetails.can_edit&&this.imageFileRef.current.click()})),this.state={calendar_value:new Date,year:(new Date).getFullYear(),month:(new Date).getMonth()+1,attendance:{present:0,absent:0,days:[]},dateDetails:null,openDialog:!1,explanation_err:!1,explanation:"",processing:!1,image_file:null,existing_image:""},this.imageFileRef=a.createRef()}componentDidMount(){this.loadAttendence()}static getDerivedStateFromProps(e,s){return{}}render(){const{attendance:e,dateDetails:s}=this.state;return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"calender-wrapper",children:[(0,v.jsx)(h.A,{title:"Attendance of the Month",children:(0,v.jsx)(f.Ay,{onChange:this.onChange,onActiveStartDateChange:this.handleMonthAndYearChange,value:this.state.calendar_value,tileClassName:s=>{let{date:t,view:a}=s,n=e.days.find((e=>e.date==y()(t).format("YYYY-MM-DD")));if(n)return n.status},onClickDay:this.onClickDay,goToRangeStartOnSelect:!1})}),(0,v.jsx)("div",{className:"presence-wrapper",children:(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{children:(0,v.jsxs)("p",{className:"para-1",children:[(0,v.jsx)("span",{}),e.present," Present"]})}),(0,v.jsxs)("li",{children:[(0,v.jsx)("p",{}),(0,v.jsxs)("p",{className:"para-2",children:[(0,v.jsx)("span",{}),e.absent," Absent"]})]})]})})]}),(0,v.jsx)(m.A,{className:"ratn-dialog-wrapper",open:this.state.openDialog,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"xs",children:(0,v.jsxs)(g.A,{children:[(0,v.jsx)(p.A,{}),s?(0,v.jsx)(i.A,{sx:{flexGrow:1,m:.5},children:(0,v.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,v.jsx)(l.Ay,{item:!0,xs:12,className:"create-input pt-0",children:(0,v.jsx)("h4",{className:"m-0 text-center",children:"Absent"})}),(0,v.jsx)(l.Ay,{item:!0,xs:12,className:"create-input text-center pt-5",children:"Employee was Absent"}),(0,v.jsx)(l.Ay,{item:!0,xs:12,className:"create-input pt-5",children:(0,v.jsx)(r.A,{label:"Explanation",variant:"outlined",fullWidth:!0,value:this.state.explanation,onChange:e=>this.setState({explanation:e.target.value}),disabled:!s.can_edit,error:this.state.explanation_err})}),(0,v.jsx)(l.Ay,{item:!0,xs:12,className:"create-input text-center pt-5",children:s.image?(0,v.jsx)("img",{src:s.image,style:{height:"100px",width:"100px",cursor:"pointer"},onClick:this.handleImageBrowse}):(0,v.jsxs)(v.Fragment,{children:[this.state.image_file||this.state.existing_image?(0,v.jsx)("img",{src:this.state.image_file?this.getImageSrc(this.state.image_file):this.state.existing_image,style:{height:"100px",width:"100px",cursor:"pointer"},onClick:this.handleImageBrowse}):(0,v.jsx)("img",{src:k.A,style:{height:"100px",width:"100px",cursor:"pointer"},onClick:this.handleImageBrowse}),(0,v.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>this.onChangeImage(e),ref:this.imageFileRef})]})}),s.can_edit?(0,v.jsx)(l.Ay,{item:!0,xs:12,className:"text-center pt-5",children:(0,v.jsx)(j.A,{spacing:1,direction:"row",justifyContent:"center",children:(0,v.jsx)(c.A,{variant:"contained",type:"button",disabled:this.state.processing,onClick:this.handleSubmit,children:this.state.processing?"Processing":"Submit"})})}):null]})}):null]})})]})}}const D=(0,u.Gh)((0,o.A)((0,n.connect)((e=>({})),(e=>({dispatch:e})))(A)))},59964:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});const a=t.p+"assets/no_image.jpg"},61738:(e,s,t)=>{var a={"./af":99805,"./af.js":99805,"./ar":94449,"./ar-dz":44468,"./ar-dz.js":44468,"./ar-kw":63480,"./ar-kw.js":63480,"./ar-ly":64197,"./ar-ly.js":64197,"./ar-ma":62180,"./ar-ma.js":62180,"./ar-sa":50230,"./ar-sa.js":50230,"./ar-tn":72808,"./ar-tn.js":72808,"./ar.js":94449,"./az":45865,"./az.js":45865,"./be":86627,"./be.js":86627,"./bg":60901,"./bg.js":60901,"./bm":63179,"./bm.js":63179,"./bn":61966,"./bn-bd":90969,"./bn-bd.js":90969,"./bn.js":61966,"./bo":6317,"./bo.js":6317,"./br":46474,"./br.js":46474,"./bs":35961,"./bs.js":35961,"./ca":77270,"./ca.js":77270,"./cs":61564,"./cs.js":61564,"./cv":43239,"./cv.js":43239,"./cy":92366,"./cy.js":92366,"./da":82453,"./da.js":82453,"./de":76601,"./de-at":47408,"./de-at.js":47408,"./de-ch":8101,"./de-ch.js":8101,"./de.js":76601,"./dv":96080,"./dv.js":96080,"./el":12655,"./el.js":12655,"./en-au":46836,"./en-au.js":46836,"./en-ca":22086,"./en-ca.js":22086,"./en-gb":2103,"./en-gb.js":2103,"./en-ie":35964,"./en-ie.js":35964,"./en-il":74379,"./en-il.js":74379,"./en-in":50765,"./en-in.js":50765,"./en-nz":71502,"./en-nz.js":71502,"./en-sg":1152,"./en-sg.js":1152,"./eo":90050,"./eo.js":90050,"./es":43350,"./es-do":49338,"./es-do.js":49338,"./es-mx":51326,"./es-mx.js":51326,"./es-us":89947,"./es-us.js":89947,"./es.js":43350,"./et":18231,"./et.js":18231,"./eu":28512,"./eu.js":28512,"./fa":59083,"./fa.js":59083,"./fi":25059,"./fi.js":25059,"./fil":32607,"./fil.js":32607,"./fo":83369,"./fo.js":83369,"./fr":27390,"./fr-ca":66711,"./fr-ca.js":66711,"./fr-ch":6152,"./fr-ch.js":6152,"./fr.js":27390,"./fy":62419,"./fy.js":62419,"./ga":3002,"./ga.js":3002,"./gd":82533,"./gd.js":82533,"./gl":16557,"./gl.js":16557,"./gom-deva":48944,"./gom-deva.js":48944,"./gom-latn":25387,"./gom-latn.js":25387,"./gu":17462,"./gu.js":17462,"./he":39237,"./he.js":39237,"./hi":49617,"./hi.js":49617,"./hr":36544,"./hr.js":36544,"./hu":60341,"./hu.js":60341,"./hy-am":41388,"./hy-am.js":41388,"./id":75251,"./id.js":75251,"./is":41146,"./is.js":41146,"./it":37891,"./it-ch":80007,"./it-ch.js":80007,"./it.js":37891,"./ja":73727,"./ja.js":73727,"./jv":5198,"./jv.js":5198,"./ka":28974,"./ka.js":28974,"./kk":37308,"./kk.js":37308,"./km":57786,"./km.js":57786,"./kn":84807,"./kn.js":84807,"./ko":61584,"./ko.js":61584,"./ku":61906,"./ku.js":61906,"./ky":79190,"./ky.js":79190,"./lb":7396,"./lb.js":7396,"./lo":38503,"./lo.js":38503,"./lt":33010,"./lt.js":33010,"./lv":5192,"./lv.js":5192,"./me":51944,"./me.js":51944,"./mi":56492,"./mi.js":56492,"./mk":2934,"./mk.js":2934,"./ml":61463,"./ml.js":61463,"./mn":8377,"./mn.js":8377,"./mr":78733,"./mr.js":78733,"./ms":18030,"./ms-my":39445,"./ms-my.js":39445,"./ms.js":18030,"./mt":55887,"./mt.js":55887,"./my":87228,"./my.js":87228,"./nb":48294,"./nb.js":48294,"./ne":19559,"./ne.js":19559,"./nl":20600,"./nl-be":78796,"./nl-be.js":78796,"./nl.js":20600,"./nn":9570,"./nn.js":9570,"./oc-lnc":5662,"./oc-lnc.js":5662,"./pa-in":87101,"./pa-in.js":87101,"./pl":56118,"./pl.js":56118,"./pt":29198,"./pt-br":7203,"./pt-br.js":7203,"./pt.js":29198,"./ro":45565,"./ro.js":45565,"./ru":33315,"./ru.js":33315,"./sd":58473,"./sd.js":58473,"./se":11258,"./se.js":11258,"./si":98798,"./si.js":98798,"./sk":26404,"./sk.js":26404,"./sl":7057,"./sl.js":7057,"./sq":25718,"./sq.js":25718,"./sr":45363,"./sr-cyrl":20478,"./sr-cyrl.js":20478,"./sr.js":45363,"./ss":37260,"./ss.js":37260,"./sv":42231,"./sv.js":42231,"./sw":27104,"./sw.js":27104,"./ta":47493,"./ta.js":47493,"./te":57705,"./te.js":57705,"./tet":94457,"./tet.js":94457,"./tg":22727,"./tg.js":22727,"./th":32206,"./th.js":32206,"./tk":33419,"./tk.js":33419,"./tl-ph":77243,"./tl-ph.js":77243,"./tlh":60016,"./tlh.js":60016,"./tr":87020,"./tr.js":87020,"./tzl":8026,"./tzl.js":8026,"./tzm":78537,"./tzm-latn":87899,"./tzm-latn.js":87899,"./tzm.js":78537,"./ug-cn":40818,"./ug-cn.js":40818,"./uk":48478,"./uk.js":48478,"./ur":77893,"./ur.js":77893,"./uz":89133,"./uz-latn":20311,"./uz-latn.js":20311,"./uz.js":89133,"./vi":52179,"./vi.js":52179,"./x-pseudo":92455,"./x-pseudo.js":92455,"./yo":3310,"./yo.js":3310,"./zh-cn":27244,"./zh-cn.js":27244,"./zh-hk":40076,"./zh-hk.js":40076,"./zh-mo":62305,"./zh-mo.js":62305,"./zh-tw":88588,"./zh-tw.js":88588};function n(e){var s=i(e);return t(s)}function i(e){if(!t.o(a,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id=61738}}]);