"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8629],{44962:(e,s,t)=>{t.d(s,{Oo:()=>d,P9:()=>l,PV:()=>n,XG:()=>m,cQ:()=>o,gC:()=>h,hO:()=>p,jy:()=>c,y8:()=>u});var a=t(80325),i=t(70408),r=t(45892);const n=e=>(e=(0,r.x0)(e,!0),s=>{a.A.get("/superadmin/retailers".concat(e)).then((e=>{e.data.success&&s({type:i.RK,payload:e.data.data})})).catch((e=>{}))}),l=e=>s=>{a.A.post("/superadmin/retailers/store",e).then((e=>{s({type:i.KC,payload:e.data})})).catch((e=>{}))},c=e=>s=>{a.A.get("/superadmin/retailers/fetch/".concat(e)).then((e=>{e.data.success&&s({type:i.$x,payload:e.data.data})})).catch((e=>{}))},d=(e,s)=>t=>{a.A.post("/superadmin/retailers/update/".concat(e),s).then((e=>{t({type:i.Ao,payload:e.data})})).catch((e=>{}))},o=(e,s)=>t=>{a.A.delete("/superadmin/retailers/delete/".concat(e),s).then((e=>{t({type:i.i_,payload:e.data})})).catch((e=>{}))},h=e=>s=>{a.A.post("/superadmin/retailers/reviews/store",e).then((e=>{s({type:i.KC,payload:e.data})})).catch((e=>{}))},p=e=>(e=(0,r.x0)(e,!0),s=>{a.A.get("/superadmin/retailers/reviews".concat(e)).then((e=>{e.data.success&&s({type:i.Io,payload:e.data.data})})).catch((e=>{}))}),u=(e,s)=>t=>{a.A.post("/superadmin/retailers/review/update/".concat(e),s).then((e=>{t({type:i.Ao,payload:e.data})})).catch((e=>{}))},m=(e,s)=>a.A.get("/superadmin/retailers/my-review/".concat(e))},26118:(e,s,t)=>{t.d(s,{Ox:()=>h,SI:()=>x,Uf:()=>p,Z$:()=>n,Zi:()=>d,_B:()=>A,il:()=>v,kA:()=>c,qn:()=>u,sd:()=>m,wp:()=>l,zK:()=>o});var a=t(80325),i=t(68212),r=t(45892);const n=e=>(e=(0,r.x0)(e,!0),s=>{a.A.get("/superadmin/sales".concat(e)).then((e=>{e.data.success&&s({type:i.go,payload:e.data.data})})).catch((e=>{}))}),l=e=>s=>{a.A.post("/superadmin/sales/store",e).then((e=>{s({type:i.x3,payload:e.data})})).catch((e=>{}))},c=e=>s=>{a.A.get("/superadmin/sales/view/".concat(e)).then((e=>{console.log(e.data.data),e.data.success&&s({type:i.gN,payload:e.data.data})})).catch((e=>{}))},d=(e,s)=>a.A.post("/superadmin/sales-on-approve/status/".concat(e),s),o=e=>s=>{a.A.get("/superadmin/sales/edit/".concat(e)).then((e=>{console.log(e.data.data),e.data.success&&s({type:i.gN,payload:e.data.data})})).catch((e=>{}))},h=(e,s)=>t=>{a.A.post("/superadmin/sales/update/".concat(e),s).then((e=>{t({type:i.hF,payload:e.data})})).catch((e=>{}))},p=(e,s)=>t=>{a.A.delete("/superadmin/sales/delete/".concat(e),s).then((e=>{t({type:i.VW,payload:e.data})})).catch((e=>{}))},u=e=>a.A.post("/superadmin/sales/download-invoice/".concat(e)),m=e=>a.A.get("/superadmin/sales/view/".concat(e)),x=(e,s)=>a.A.post("/superadmin/sales/return/".concat(e),s),v=e=>a.A.post("/superadmin/sales/return-stock-transfer",e),A=e=>(e=(0,r.x0)(e,!0),a.A.get("/superadmin/sales-products".concat(e)))},38629:(e,s,t)=>{t.r(s),t.d(s,{default:()=>oe});var a=t(63696),i=t(52821),r=t(49746),n=t(61095),l=t(45271),c=t(36122),d=t(13007),o=t(2598),h=t(24019),p=t(98993),u=t(73947),m=t(25606),x=t(45166),v=t(10228),A=t(46133),y=t(72839),_=t(41795),g=t(69945),j=t(11505),w=t(2626),b=t(84623),N=t(65469),S=t(36213),f=t(66107),C=t(26365),P=t(78976),M=t(88441),V=t(66098),D=t(50977),I=t(44962),k=t(61176),q=t(51449),F=t(60669),R=t(15164),W=t(79731),Y=t(37046),T=t(42689),E=t.n(T),O=t(89429),L=t(52805),Q=t(79859),U=t(43191),B=t(45892),G=t(43303),$=t(78342),K=t(50607),z=t(26118),Z=t(80325);const X=e=>(e=(0,B.x0)(e,!0),s=>{Z.A.get("/superadmin/visit".concat(e)).then((e=>{e.data.success&&s({type:K.gN,payload:e.data.data})})).catch((e=>{}))}),H=e=>s=>{Z.A.post("/superadmin/visit/store",e).then((e=>{s({type:K.Zr,payload:e.data})})).catch((e=>{}))};var J=t(35008),ee=t(27893),se=t(70408),te=t(27874),ae=t(97),ie=t(18522),re=t(70166),ne=t(30069),le=t(62540);function ce(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}class de extends a.Component{constructor(e){super(e),ce(this,"loadAllData",(()=>{this.loadViewData(),this.loadSalesData(),this.loadReviews(),this.loadMyReview(),this.loadVisits()})),ce(this,"loadViewData",(()=>{this.props.actions.retailerFetch(this.props.params.id)})),ce(this,"loadSalesData",(()=>{let e={...this.state.queryParams};e.user_id=this.props.params.id,this.props.actions.salesList(e)})),ce(this,"loadReviews",(()=>{let e={...this.state.reviewQueryParams};e.retailer_id=this.props.params.id,this.props.actions.retailerReviewList(e)})),ce(this,"loadMyReview",(async()=>{let e=await(0,I.XG)(this.props.params.id);e.data.success&&!(0,B.Im)(e.data.data)&&this.setState({rating:e.data.data.rating,review:e.data.data.review,my_review:e.data.data})})),ce(this,"loadVisits",(()=>{let e={visit_user_id:this.props.params.id};this.isSuperAdmin||(e.user_id=this.state.auth.user.id),this.props.actions.visitList(e)})),ce(this,"handlePagination",((e,s)=>{this.setState({queryParams:{...this.state.queryParams,page:s}},(()=>{this.loadPurchaseData()}))})),ce(this,"handleReviewPagination",((e,s)=>{this.setState({reviewQueryParams:{...this.state.reviewQueryParams,page:s}},(()=>{this.loadReviews()}))})),ce(this,"handleVisitPagination",(e=>{this.state.visitQueryParams.page=e,this.loadVisits()})),ce(this,"handleInvoiceView",(e=>{this.props.navigate((0,B.zr)((0,B.mA)(this.state.auth))+"/sales/view/"+e.id)})),ce(this,"handleInvoiceDownload",(async e=>{let s=await(0,z.qn)(e.id);s.data.success&&window.open(s.data.data.url,"_blank").focus()})),ce(this,"handleInvoicePay",(e=>{this.setState({pay_by_invoice:e,openDialog:!0,...this.defaultFormValues()})})),ce(this,"handlePayNow",(()=>{this.setState({openDialog:!0,pay_by_invoice:null,...this.defaultFormValues()})})),ce(this,"handleDialogClose",((e,s)=>{s&&"backdropClick"==s||this.setState({openDialog:!1})})),ce(this,"updateFormValue",((e,s)=>{this.setState({formValues:{...this.state.formValues,[s]:e}})})),ce(this,"defaultFormValues",(()=>({formValues:{user_id:"",payment_mode:"",payment_date:E()().format("MM/DD/YYYY"),amount:"",notes:"",cheque_no:"",txn_id:"",table_type:"sale",payment_type:"invoice"},formErros:{user_id:!1,payment_mode:!1,payment_date:!1,amount:!1,notes:!1,cheque_no:!1,txn_id:!1}}))),ce(this,"defaultVisitFormValues",(()=>({visitformValues:{user_id:"",type:"Interested",date:E()().format("MM/DD/YYYY"),notes:""},visitformErros:{user_id:!1,type:!1,date:!1,notes:!1}}))),ce(this,"handleSubmit",(()=>{if(!this.formValidate()){this.setState({processing:!0});let e={...this.state.formValues,user_id:this.props.params.id};this.state.pay_by_invoice&&(e.table_id=this.state.pay_by_invoice.id),this.props.actions.paymentStore(e)}})),ce(this,"formValidate",(()=>{let e=this.state.formValues,s=this.state.formErros,t=!1;return(0,B.Im)(e.amount)?(s.amount=!0,t=!0):s.amount=!1,(0,B.Im)(e.payment_mode)?(s.payment_mode=!0,t=!0):s.payment_mode=!1,(0,B.Im)(e.payment_date)?(s.payment_date=!0,t=!0):s.payment_date=!1,this.setState({formErros:s}),t})),ce(this,"handleSearch",(()=>{this.setState({queryParams:{...this.state.queryParams,page:1}},(()=>{this.loadPurchaseData()}))})),ce(this,"handleSaleNow",(()=>{this.props.navigate((0,B.zr)((0,B.mA)(this.state.auth))+"/stocks")})),ce(this,"handleOrderNow",(()=>{window.open("MISSING_ENV_VAR".FRONT_BASE_URL,"_blank").focus()})),ce(this,"handleVisit",(()=>{this.setState({openVisitDialog:!0,...this.defaultVisitFormValues()})})),ce(this,"handleVisitDialogClose",((e,s)=>{s&&"backdropClick"==s||this.setState({openVisitDialog:!1})})),ce(this,"updateVisitFormValue",((e,s)=>{this.setState({visitformValues:{...this.state.visitformValues,[s]:e}})})),ce(this,"handleVisitSubmit",(()=>{if(!this.formValidate()){this.setState({processing:!0});let e={...this.state.visitformValues,user_id:this.props.params.id};e.date&&(e.date=E()(e.date.toString()).format("YYYY-MM-DD")),"Not Interested"==this.state.visitformValues.type&&(e.date=""),this.props.actions.visitCreate(e)}})),ce(this,"formValidate",(()=>!1)),ce(this,"handleReviewSubmit",(()=>{if(this.state.rating<=0)return this.props.enqueueSnackbar("Please give rating.",{variant:"error"});let e={review:this.state.review,rating:this.state.rating,user_id:this.props.params.id};(0,B.Im)(this.state.my_review)?this.props.actions.retailerReviewStore(e):this.props.actions.retailerReviewUpdate(this.state.my_review.id,e)})),this.state={item:this.props.item,auth:this.props.auth,queryParams:{page:1,limit:50,search:""},reviewQueryParams:{page:1,limit:50},visitQueryParams:{page:1,limit:50},sales:this.props.sales,total:this.props.total,openDialog:!1,...this.defaultFormValues(),actionCalled:this.props.actionCalled,createSuccess:this.props.createSuccess,successMessage:this.props.successMessage,errorMessage:this.props.errorMessage,processing:!1,pay_by_invoice:null,openVisitDialog:!1,...this.defaultVisitFormValues(),v_actionCalled:this.props.v_actionCalled,v_createSuccess:this.props.v_createSuccess,v_successMessage:this.props.v_successMessage,v_errorMessage:this.props.v_errorMessage,reviews:this.props.reviews,review_total:this.props.review_total,r_actionCalled:this.props.r_actionCalled,r_createSuccess:this.props.r_createSuccess,r_editSuccess:this.props.r_editSuccess,r_successMessage:this.props.r_successMessage,r_errorMessage:this.props.r_errorMessage,reviews:this.props.reviews,review_total:this.props.review_total,my_review:null,rating:0,review:"",visits:this.props.visits,visit_total:this.props.visit_total,tab:"rating"},this.columns=[{name:"invoice_number",display_name:"Invoice Number"},{name:"invoice_date",display_name:"Invoice Date"},{name:"total_payable",display_name:"Total Amount"},{name:"paid_amount",display_name:"Paid Amount"},{name:"due_amount_display",display_name:"Due Amount"},{name:"status_display",display_name:"Status"}],this.isSuperAdmin=(0,B.jm)(),this.isDistributor=(0,B.mb)(),this.isSalesExecutive=(0,B.$S)(),this.isAdmin=(0,B.qc)(),this.visitColumns=[{name:"type",display_name:"Type"},{name:"notes",display_name:"Note"},{name:"date",display_name:"Date"}],this.isSuperAdmin&&(this.visitColumns=[{name:"user_name",display_name:"Visit By"}].concat(this.visitColumns))}componentDidMount(){this.loadAllData()}static getDerivedStateFromProps(e,s){let t={};return e.item!==s.item&&(t.item=e.item),e.sales!==s.sales&&(t.sales=e.sales),e.total!==s.total&&(t.total=e.total),e.actionCalled!==s.actionCalled&&(t.actionCalled=e.actionCalled),e.createSuccess!==s.createSuccess&&(t.createSuccess=e.createSuccess),e.successMessage!==s.successMessage&&(t.successMessage=e.successMessage),e.errorMessage!==s.errorMessage&&(t.errorMessage=e.errorMessage),e.auth!==s.auth&&(t.auth=e.auth),e.v_actionCalled!==s.v_actionCalled&&(t.v_actionCalled=e.v_actionCalled),e.v_createSuccess!==s.v_createSuccess&&(t.v_createSuccess=e.v_createSuccess),e.v_successMessage!==s.v_successMessage&&(t.v_successMessage=e.v_successMessage),e.v_errorMessage!==s.v_errorMessage&&(t.v_errorMessage=e.v_errorMessage),e.r_actionCalled!==s.r_actionCalled&&(t.r_actionCalled=e.r_actionCalled),e.r_createSuccess!==s.r_createSuccess&&(t.r_createSuccess=e.r_createSuccess),e.r_editSuccess!==s.r_editSuccess&&(t.r_editSuccess=e.r_editSuccess),e.r_successMessage!==s.r_successMessage&&(t.r_successMessage=e.r_successMessage),e.r_errorMessage!==s.r_errorMessage&&(t.r_errorMessage=e.r_errorMessage),e.reviews!==s.reviews&&(t.reviews=e.reviews),e.review_total!==s.review_total&&(t.review_total=e.review_total),e.visits!==s.visits&&(t.visits=e.visits),e.visit_total!==s.visit_total&&(t.visit_total=e.visit_total),t}componentDidUpdate(e){e.params.id!=this.props.params.id&&this.loadAllData(),this.state.actionCalled&&(this.state.createSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.setState({processing:!1,openDialog:!1,queryParams:{...this.state.queryParams,page:1},...this.defaultFormValues()}),this.loadAllData(),this.props.actions.getNotifiactions()):(this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.setState({processing:!1})),this.props.dispatch({type:$.Kl})),this.state.v_actionCalled&&(this.state.v_createSuccess?(this.props.enqueueSnackbar(this.state.v_successMessage,{variant:"success"}),this.setState({processing:!1,openVisitDialog:!1,...this.defaultVisitFormValues()}),this.loadAllData()):(this.props.enqueueSnackbar(this.state.v_errorMessage,{variant:"error"}),this.setState({processing:!1})),this.props.dispatch({type:K.h5})),this.state.r_actionCalled&&(this.state.r_createSuccess||this.state.r_editSuccess?(this.props.enqueueSnackbar(this.state.r_successMessage,{variant:"success"}),this.props.dispatch({type:se.eU}),this.loadAllData()):(this.props.enqueueSnackbar(this.state.r_errorMessage,{variant:"error"}),this.props.dispatch({type:se.eU})),this.setState({processing:!1}))}render(){const e=this.state.item,{formValues:s,formErros:t,visitformValues:a}=this.state,i=Math.ceil(this.state.total/this.state.queryParams.limit),M=Math.ceil(this.state.review_total/this.state.reviewQueryParams.limit),D=1!=this.props.query.get("total_retailer");return(0,le.jsxs)(V.A,{title:"Retailer Details",secondary:(0,le.jsx)(r.A,{variant:"contained",onClick:()=>this.props.navigate(-1),children:"Back"}),children:[(0,le.jsx)("div",{children:e?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(n.A,{sx:{flexGrow:1,m:.5},className:"ratn-dialog-wrapper",children:(0,le.jsxs)("div",{autoComplete:"off",className:"ratn-dialog-inner",children:[!this.isSalesExecutive||this.isSalesExecutive&&D?(0,le.jsxs)(l.Ay,{container:!0,spacing:2,className:"loans_view p_view",children:[(0,le.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"create-input",children:(0,le.jsx)(c.A,{label:"Company Name",variant:"outlined",fullWidth:!0,value:e.company_name,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"Owner Name",variant:"outlined",fullWidth:!0,value:e.name,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"GST Number",variant:"outlined",fullWidth:!0,value:e.gst,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"City",variant:"outlined",fullWidth:!0,value:e.city,disabled:!0,InputProps:{className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"Total Amount",variant:"outlined",fullWidth:!0,value:e.total_amount,disabled:!0,InputProps:{startAdornment:(0,le.jsx)(d.A,{position:"start",children:"₹"}),className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"Total Return",variant:"outlined",fullWidth:!0,value:e.total_return,disabled:!0,InputProps:{startAdornment:(0,le.jsx)(d.A,{position:"start",children:"₹"}),className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"Total Payable",variant:"outlined",fullWidth:!0,value:e.total_payable_amount,disabled:!0,InputProps:{startAdornment:(0,le.jsx)(d.A,{position:"start",children:"₹"}),className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"Total Paid",variant:"outlined",fullWidth:!0,value:e.paid_amount,disabled:!0,InputProps:{startAdornment:(0,le.jsx)(d.A,{position:"start",children:"₹"}),className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"Total Dues",variant:"outlined",fullWidth:!0,value:e.due_amount,disabled:!0,InputProps:{startAdornment:(0,le.jsx)(d.A,{position:"start",children:"₹"}),className:"non_disable_text"}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"create-input",children:(0,le.jsx)(c.A,{label:"Advance",variant:"outlined",fullWidth:!0,value:e.advance_amount,disabled:!0,InputProps:{startAdornment:(0,le.jsx)(d.A,{position:"start",children:"₹"}),className:"non_disable_text"}})})]}):null,this.isSalesExecutive&&!D?(0,le.jsx)(o.A,{component:h.A,children:(0,le.jsx)("div",{className:"ratn-table-purchase-wrapper",children:(0,le.jsxs)(p.A,{"aria-label":"collapsible table",children:[(0,le.jsx)(u.A,{className:"ratn-table-header",children:(0,le.jsxs)(m.A,{children:[(0,le.jsx)(x.A,{children:"Image"}),(0,le.jsx)(x.A,{children:"Company Name"}),(0,le.jsx)(x.A,{children:"Owner Name"}),(0,le.jsx)(x.A,{children:"Contact Number"}),(0,le.jsx)(x.A,{children:"Rating"}),(0,le.jsx)(x.A,{children:"City"}),(0,le.jsx)(x.A,{children:"District"}),(0,le.jsx)(x.A,{children:"Pin"}),(0,le.jsx)(x.A,{children:"Actions"})]})}),(0,le.jsx)(v.A,{children:(0,le.jsxs)(m.A,{children:[(0,le.jsx)(x.A,{scope:"row",children:(0,le.jsx)("img",{src:e.image,style:{height:"70px",width:"70px"},className:"table-data-image"})}),(0,le.jsx)(x.A,{children:e.company_name}),(0,le.jsx)(x.A,{children:e.name}),(0,le.jsx)(x.A,{children:e.mobile}),(0,le.jsx)(x.A,{children:(0,le.jsx)(A.A,{name:"read-only",value:e.rating,readOnly:!0})}),(0,le.jsx)(x.A,{children:e.city}),(0,le.jsx)(x.A,{children:e.district_name}),(0,le.jsx)(x.A,{children:e.pincode}),(0,le.jsx)(x.A,{className:"action_btn",children:(0,le.jsxs)(y.A,{spacing:1,direction:"row",justifyContent:"left",alignItems:"left",children:[(0,le.jsx)(r.A,{variant:"contained",color:"primary",className:"text_btn",onClick:this.handleSaleNow,children:"Sale Now"}),(0,le.jsx)(r.A,{variant:"contained",color:"primary",className:"text_btn",onClick:this.handleOrderNow,children:"Order Now"}),(0,le.jsx)(r.A,{variant:"contained",color:"primary",className:"text_btn",onClick:this.handleVisit,children:"Visit"})]})})]})})]})})}):null]})}),!this.isSalesExecutive||D?(0,le.jsx)(l.Ay,{container:!0,spacing:k.iL,className:"details-header ratn-pur-wrapper loans_view",children:(0,le.jsxs)(l.Ay,{item:!0,xs:12,className:"p-add-product create-input",children:[(0,le.jsx)("div",{children:(0,le.jsxs)(l.Ay,{container:!0,spacing:2,className:"loans_view p_view",children:[(0,le.jsx)(l.Ay,{item:!0,xs:7,md:6,className:"create-input",children:(0,le.jsx)(_.A,{fullWidth:!0,children:(0,le.jsx)(g.A,{value:this.state.queryParams.search,onChange:e=>this.setState({queryParams:{...this.state.queryParams,search:e.target.value}}),endAdornment:(0,le.jsx)(d.A,{position:"end",children:(0,le.jsx)(j.A,{onClick:this.handleSearch,edge:"end",children:(0,le.jsx)(ee.A,{})})}),sx:{borderRadius:"25px"}})})}),this.isAdmin?null:(0,le.jsx)(l.Ay,{item:!0,xs:5,md:2,className:"create-input button-right",children:(0,le.jsx)(r.A,{variant:"contained",className:"add-button",onClick:()=>this.handlePayNow(),children:"Pay"})})]})}),(0,le.jsx)(o.A,{component:h.A,children:(0,le.jsxs)("div",{className:"ratn-table-purchase-wrapper",children:[(0,le.jsxs)(p.A,{"aria-label":"collapsible table",children:[(0,le.jsx)(u.A,{className:"ratn-table-header",children:(0,le.jsxs)(m.A,{children:[(0,le.jsx)(x.A,{children:"#"}),(0,le.jsx)(x.A,{children:"Date"}),(0,le.jsx)(x.A,{children:"Invoice No"}),(0,le.jsx)(x.A,{children:"Biller Name"}),(0,le.jsx)(x.A,{children:"Bill Amount"}),(0,le.jsx)(x.A,{children:"Return"}),(0,le.jsx)(x.A,{children:"Paid"}),(0,le.jsx)(x.A,{children:"Dues"}),(0,le.jsx)(x.A,{children:"Status"}),(0,le.jsx)(x.A,{sx:{width:"50px"},children:"Action"})]})}),(0,le.jsx)(v.A,{children:this.state.sales.map(((e,s)=>(0,le.jsx)(he,{row:e,page:this.state.queryParams.page,limit:this.state.queryParams.limit,index:s,viewAction:this.handleInvoiceView,downloadAction:this.handleInvoiceDownload,payAction:this.handleInvoicePay},s)))})]}),this.state.total>0?(0,le.jsx)(l.Ay,{container:!0,alignItems:"right",className:"ratn-table-footer",children:(0,le.jsx)(l.Ay,{item:!0,children:(0,le.jsx)(w.A,{count:i,page:this.state.queryParams.page,onChange:this.handlePagination})})}):null]})})]})}):null,this.isSalesExecutive&&!D?(0,le.jsx)("div",{children:(0,le.jsxs)(ae.Ay,{value:this.state.tab,children:[(0,le.jsx)(n.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,le.jsxs)(ie.A,{onChange:(e,s)=>this.setState({tab:s}),children:[(0,le.jsx)(b.A,{label:"Ratings",value:"rating"}),(0,le.jsx)(b.A,{label:"Visits",value:"visit"})]})}),(0,le.jsxs)(re.A,{value:"rating",children:[(0,le.jsxs)(l.Ay,{container:!0,spacing:k.iL,className:"details-header ratn-pur-wrapper loans_view",children:[(0,le.jsx)(l.Ay,{item:!0,xs:12,md:1,className:"p-add-product create-input",children:"My Rating"}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"p-add-product create-input",children:this.state.auth.user.name}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"p-add-product create-input",children:this.state.auth.user.mobile}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"p-add-product",children:(0,le.jsx)(A.A,{name:"my_rating",className:"rating_input",value:this.state.rating,onChange:(e,s)=>{this.setState({rating:s})}})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:3,className:"p-add-product create-input",children:(0,le.jsx)(N.A,{minRows:2,className:"description",placeholder:"Type review...",style:{width:"100%",height:"51px"},value:this.state.review,onChange:e=>this.setState({review:e.target.value})})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"p-add-product create-input",children:(0,le.jsx)(r.A,{variant:"contained",type:"button",disabled:this.state.processing,onClick:this.handleReviewSubmit,children:(0,B.Im)(this.state.my_review)?"Submit":"Update"})})]}),this.state.reviews.map(((e,s)=>(0,le.jsxs)(l.Ay,{container:!0,spacing:k.iL,className:"details-header ratn-pur-wrapper loans_view",children:[(0,le.jsx)(l.Ay,{item:!0,xs:12,md:1,className:"p-add-product create-input",children:" "}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"p-add-product create-input",children:e.user_name}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"p-add-product create-input",children:e.user_mobile}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:2,className:"p-add-product",children:(0,le.jsx)(A.A,{name:"read-only",value:e.rating,readOnly:!0})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:5,className:"p-add-product create-input",children:e.review})]},s))),this.state.review_total>0?(0,le.jsx)(l.Ay,{container:!0,alignItems:"right",className:"ratn-table-footer",children:(0,le.jsx)(l.Ay,{item:!0,children:(0,le.jsx)(w.A,{count:M,page:this.state.reviewQueryParams.page,onChange:this.handleReviewPagination})})}):null]}),(0,le.jsx)(re.A,{value:"visit",children:(0,le.jsx)(l.Ay,{container:!0,spacing:k.iL,children:(0,le.jsx)(te.A,{columns:this.visitColumns,rows:this.state.visits,page:this.state.visitQueryParams.page,limit:this.state.visitQueryParams.limit,total:this.state.visit_total,handlePagination:this.handleVisitPagination})})})]})}):null]}):(0,le.jsx)(l.Ay,{container:!0,justifyContent:"center",children:(0,le.jsx)(S.A,{})})}),(0,le.jsxs)(O.A,{className:"ratn-dialog-wrapper",open:this.state.openDialog,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"md",children:[(0,le.jsxs)(U.A,{children:["Pay Now ",this.state.pay_by_invoice?"/ "+this.state.pay_by_invoice.invoice_number:null]}),(0,le.jsxs)(L.A,{children:[(0,le.jsx)(Q.A,{}),(0,le.jsx)(n.A,{sx:{flexGrow:1,m:.5},children:(0,le.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,le.jsx)(l.Ay,{item:!0,xs:12,md:3,className:"create-input",children:(0,le.jsxs)(_.A,{fullWidth:!0,children:[(0,le.jsx)(f.A,{children:"Payment Type"}),(0,le.jsxs)(C.A,{className:"input-inner",value:s.payment_type,fullWidth:!0,label:"Payment Type",onChange:e=>this.updateFormValue(e.target.value,"payment_type"),children:[this.state.pay_by_invoice||e&&0!=parseFloat(e.due_amount)?null:(0,le.jsx)(P.A,{value:"advance",children:"Advance"}),(0,le.jsx)(P.A,{value:"invoice",children:"Invoice"})]})]})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:3,className:"p-invoice-date create-input",children:(0,le.jsx)(W.$,{dateAdapter:R.R,children:(0,le.jsx)(Y.l,{label:"Payment Date",value:s.payment_date,inputFormat:"DD/MM/YYYY",onChange:e=>this.updateFormValue(e,"payment_date"),renderInput:e=>(0,le.jsx)(c.A,{...e,fullWidth:!0,error:t.payment_date,className:"non_disable_text"}),disabled:!0})})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:3,className:"create-input",children:(0,le.jsx)(c.A,{label:"Amount",variant:"outlined",fullWidth:!0,value:s.amount,InputProps:{startAdornment:(0,le.jsx)(d.A,{position:"start",children:"₹"})},error:t.amount,onChange:e=>this.updateFormValue(e.target.value,"amount")})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,md:3,className:"create-input",children:(0,le.jsxs)(_.A,{fullWidth:!0,error:t.payment_mode,children:[(0,le.jsx)(f.A,{children:"Payment Mode"}),(0,le.jsxs)(C.A,{className:"input-inner",value:s.payment_mode,fullWidth:!0,label:"Payment Mode",onChange:e=>this.updateFormValue(e.target.value,"payment_mode"),children:[(0,le.jsx)(P.A,{value:""}),(0,le.jsx)(P.A,{value:"cash",children:"Cash"}),(0,le.jsx)(P.A,{value:"cheque",children:"Cheque"}),(0,le.jsx)(P.A,{value:"imps_neft",children:"NEFT/IMPS/UPI"}),(0,le.jsx)(P.A,{value:"online",children:"Online"})]})]})}),"cheque"==s.payment_mode?(0,le.jsx)(l.Ay,{item:!0,xs:6,className:"create-input",children:(0,le.jsx)(c.A,{label:"Cheque No",variant:"outlined",fullWidth:!0,value:s.cheque_no,onChange:e=>this.updateFormValue(e.target.value,"cheque_no")})}):null,"imps_neft"==s.payment_mode||"upi"==s.payment_mode?(0,le.jsx)(l.Ay,{item:!0,xs:6,className:"create-input",children:(0,le.jsx)(c.A,{label:"Transaction #",variant:"outlined",fullWidth:!0,value:s.txn_id,onChange:e=>this.updateFormValue(e.target.value,"txn_id")})}):null,(0,le.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"create-input",children:(0,le.jsx)(N.A,{className:"description",minRows:1,placeholder:"Notes",style:{width:"100%",height:"51px"},value:s.notes,onChange:e=>this.updateFormValue(e.target.value,"notes")})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,children:(0,le.jsxs)(y.A,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,le.jsx)(r.A,{variant:"contained",type:"button",disabled:this.state.processing,onClick:this.handleSubmit,children:this.state.processing?"Processing":"Submit"}),(0,le.jsx)(r.A,{variant:"outlined",onClick:this.handleDialogClose,children:"Cancel"})]})})]})})]})]}),(0,le.jsxs)(O.A,{className:"ratn-dialog-wrapper",open:this.state.openVisitDialog,onClose:this.handleVisitDialogClose,fullWidth:!0,maxWidth:"sm",children:[(0,le.jsx)(U.A,{children:"Visit"}),(0,le.jsxs)(L.A,{children:[(0,le.jsx)(Q.A,{}),(0,le.jsx)(n.A,{sx:{flexGrow:1,m:.5},children:(0,le.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,le.jsx)(l.Ay,{item:!0,xs:12,md:"Not Interested"==a.type?12:6,className:"create-input",children:(0,le.jsxs)(_.A,{fullWidth:!0,children:[(0,le.jsx)(f.A,{children:"Type"}),(0,le.jsxs)(C.A,{className:"input-inner",value:a.type,fullWidth:!0,label:"Type",onChange:e=>this.updateVisitFormValue(e.target.value,"type"),children:[(0,le.jsx)(P.A,{value:"Interested",children:"Interested"}),(0,le.jsx)(P.A,{value:"Not Interested",children:"Not Interested"}),(0,le.jsx)(P.A,{value:"Interested in future",children:"Interested in future"})]})]})}),"Interested in future"==a.type||"Interested"==a.type?(0,le.jsx)(l.Ay,{item:!0,xs:12,md:6,className:"p-invoice-date create-input",children:(0,le.jsx)(W.$,{dateAdapter:R.R,children:(0,le.jsx)(Y.l,{label:"Date",value:a.date,inputFormat:"DD/MM/YYYY",onChange:e=>this.updateVisitFormValue(e,"date"),renderInput:e=>(0,le.jsx)(c.A,{...e,fullWidth:!0})})})}):null,(0,le.jsx)(l.Ay,{item:!0,xs:12,className:"create-input",children:(0,le.jsx)(N.A,{minRows:2,className:"description",placeholder:"Notes",style:{width:"100%",height:"51px"},value:a.notes,onChange:e=>this.updateVisitFormValue(e.target.value,"notes")})}),(0,le.jsx)(l.Ay,{item:!0,xs:12,children:(0,le.jsxs)(y.A,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,le.jsx)(r.A,{variant:"contained",type:"button",disabled:this.state.processing,onClick:this.handleVisitSubmit,children:this.state.processing?"Processing":"Submit"}),(0,le.jsx)(r.A,{variant:"outlined",onClick:this.handleVisitDialogClose,children:"Cancel"})]})})]})})]})]})]})}}const oe=(0,q.Gh)((0,D.A)((0,i.connect)((e=>({item:e.superadmin.retailer.item||null,reviews:e.superadmin.retailer.reviews,review_total:e.superadmin.retailer.review_total,sales:e.superadmin.sales.items,total:e.superadmin.sales.total,actionCalled:e.superadmin.payment.actionCalled,createSuccess:e.superadmin.payment.createSuccess,successMessage:e.superadmin.payment.successMessage,errorMessage:e.superadmin.payment.errorMessage,auth:e.auth,visits:e.superadmin.visit.items,visit_total:e.superadmin.visit.total,v_actionCalled:e.superadmin.visit.actionCalled,v_createSuccess:e.superadmin.visit.createSuccess,v_successMessage:e.superadmin.visit.successMessage,v_errorMessage:e.superadmin.visit.errorMessage,r_actionCalled:e.superadmin.retailer.actionCalled,r_createSuccess:e.superadmin.retailer.createSuccess,r_editSuccess:e.superadmin.retailer.editSuccess,r_successMessage:e.superadmin.retailer.successMessage,r_errorMessage:e.superadmin.retailer.errorMessage})),(e=>({dispatch:e,actions:(0,M.bindActionCreators)({retailerFetch:I.jy,paymentStore:G._N,salesList:z.Z$,visitCreate:H,visitList:X,retailerReviewStore:I.gC,retailerReviewList:I.hO,retailerReviewUpdate:I.y8,getNotifiactions:ne.p},e)})))(de)));function he(e){const{row:s,page:t,limit:i,index:n,viewAction:l,downloadAction:c,payAction:d}=e,[o,h]=a.useState(!1);return(0,le.jsx)(a.Fragment,{children:(0,le.jsxs)(m.A,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,le.jsx)(x.A,{scope:"row",children:1==t?n+1:n+1+i}),(0,le.jsx)(x.A,{children:s.invoice_date}),(0,le.jsx)(x.A,{children:s.invoice_number}),(0,le.jsx)(x.A,{children:s.sale_by_name}),(0,le.jsx)(x.A,{children:s.bill_amount}),(0,le.jsx)(x.A,{children:s.return_amount}),(0,le.jsx)(x.A,{children:s.paid_amount}),(0,le.jsx)(x.A,{children:s.due_amount}),(0,le.jsx)(x.A,{sx:{color:(p=s.approve_status,"Pending"==p?"#ff9100":"Accepted"==p?"#4caf50":"Declined"==p?"#ff3d00":void 0)},children:(0,le.jsx)("b",{children:s.approve_status})}),(0,le.jsx)(x.A,{className:"action_btn",children:s.is_own_sale?(0,le.jsxs)(y.A,{spacing:1,direction:"row",justifyContent:"left",alignItems:"left",children:[(0,le.jsx)(r.A,{variant:"contained",color:"primary",onClick:()=>l(s),children:(0,le.jsx)(F.A,{})}),(0,le.jsx)(r.A,{variant:"contained",color:"primary",onClick:()=>c(s),children:(0,le.jsx)(J.A,{})}),parseFloat(s.due_amount)>0?(0,le.jsx)(r.A,{variant:"contained",color:"primary",onClick:()=>d(s),ref:e=>{e&&(e.style.setProperty("backgroundColor","#357a38","important"),e.style.setProperty("width","40px","important"),e.style.setProperty("fontSize","12px","important"))},children:"Pay"}):null]}):null})]})});var p}}}]);