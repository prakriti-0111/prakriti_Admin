"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2201],{82201:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(63696),i=t(52821),n=t(49746),r=t(45271),c=t(88441),l=t(61176),o=t(66098),d=t(50977),h=t(27874),p=t(89429),u=t(52805),m=t(79859),g=t(43191),b=t(80325),S=t(43382),y=t(45892);const C=e=>(e=(0,y.x0)(e,!0),s=>{b.A.get("/superadmin/banners".concat(e)).then((e=>{e.data.success&&s({type:S.od,payload:e.data.data})})).catch((e=>{}))}),D=e=>s=>{b.A.post("/superadmin/banners/store",e).then((e=>{s({type:S.db,payload:e.data})})).catch((e=>{}))},M=(e,s)=>t=>{b.A.post("/superadmin/banners/update/".concat(e),s).then((e=>{t({type:S.p$,payload:e.data})})).catch((e=>{}))},P=(e,s)=>t=>{b.A.delete("/superadmin/banners/delete/".concat(e),s).then((e=>{e.data.success&&t({type:S.LH,payload:e.data})})).catch((e=>{}))};var w=t(89667),A=t(51449),q=t(62540);function j(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}class k extends a.Component{constructor(e){super(e),j(this,"handlePagination",(e=>{this.setState({queryParams:{...this.state.queryParams,page:e}},(()=>{this.loadListData()}))})),j(this,"loadListData",(()=>{this.props.actions.bannerList(this.state.queryParams)})),j(this,"handleEdit",(e=>{this.setState({editRow:e,openDialog:!0,dialogTitle:"Edit Banner"})})),j(this,"handleDelete",(e=>{this.props.actions.bannerDelete(e.id)})),j(this,"handleCreate",(()=>{this.setState({openDialog:!0,dialogTitle:"Create Banner",editRow:null})})),j(this,"handleDialogClose",((e,s)=>{s&&"backdropClick"==s||this.setState({openDialog:!1,editRow:null})})),j(this,"submit",(async e=>{(0,y.Im)(e.imageFile)?e.image="":e.image=await(0,y.nk)(e.imageFile),this.state.editRow?this.props.actions.bannerUpdate(this.state.editRow.id,e):this.props.actions.bannerCreate(e)})),j(this,"handleCancel",(()=>{this.handleDialogClose()})),j(this,"handleSearchChange",((e,s)=>{this.setState({queryParams:{...this.state.queryParams,[s]:e}})})),j(this,"handleSearch",(()=>{this.setState({queryParams:{...this.state.queryParams,page:1}},(()=>{this.loadListData()}))})),this.state={...this.props,queryParams:{page:1,limit:50,search:""},openDialog:!1,isCreate:!0,editRow:null,createSuccess:!1,editSuccess:!1,deleteSuccess:!1,actionCalled:this.props.actionCalled,successMessage:this.props.successMessage,errorMessage:this.props.errorMessage},this.columns=[{name:"image",display_name:"Banner",isImage:!0,className:"banner_img",isBanner:!0},{name:"title",display_name:"Title"},{name:"url",display_name:"Url"}]}componentDidMount(){this.loadListData()}static getDerivedStateFromProps(e,s){let t={};return e.items!==s.items&&(t.items=e.items),e.total!==s.total&&(t.total=e.total),e.actionCalled!==s.actionCalled&&(t.actionCalled=e.actionCalled),e.successMessage!==s.successMessage&&(t.successMessage=e.successMessage),e.errorMessage!==s.errorMessage&&(t.errorMessage=e.errorMessage),"createSuccess"in e&&e.createSuccess!==s.createSuccess&&(t.createSuccess=e.createSuccess),"editSuccess"in e&&e.editSuccess!==s.editSuccess&&(t.editSuccess=e.editSuccess),"deleteSuccess"in e&&e.deleteSuccess!==s.deleteSuccess&&(t.deleteSuccess=e.deleteSuccess),e.permissions!==s.permissions&&(t.permissions=e.permissions),t}componentDidUpdate(){this.state.actionCalled&&(this.state.createSuccess||this.state.editSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:S.Fj}),this.setState({queryParams:{...this.state.queryParams,page:1},openDialog:!1,editRow:null},(()=>{this.loadListData()}))):this.state.deleteSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:S.Fj}),this.handlePagination(1)):null!=this.state.errorMessage&&(this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:S.Fj})))}render(){return(0,q.jsxs)(o.A,{title:"Banners",secondary:(0,y._m)(this.state.permissions,"banners","add")?(0,q.jsx)(n.A,{variant:"contained",onClick:this.handleCreate,children:"Add"}):null,children:[(0,q.jsx)(r.Ay,{container:!0,spacing:l.iL,children:(0,q.jsx)(h.A,{columns:this.columns,rows:this.state.items,page:this.state.queryParams.page,limit:this.state.queryParams.limit,total:this.state.total,handlePagination:this.handlePagination,actions:[{label:"Edit",onClick:this.handleEdit,color:"primary",show:(0,y._m)(this.state.permissions,"banners","edit")},{label:"Delete",onClick:this.handleDelete,isDelete:!0,color:"error",show:(0,y._m)(this.state.permissions,"banners","delete")}]})}),(0,q.jsxs)(p.A,{className:"ratn-dialog-wrapper",open:this.state.openDialog,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"md",children:[(0,q.jsx)(g.A,{children:this.state.dialogTitle}),(0,q.jsxs)(u.A,{children:[(0,q.jsx)(m.A,{}),(0,q.jsx)(w.A,{onSubmit:this.submit,formData:this.state.editRow,handleCancel:this.handleCancel})]})]})]})}}const x=(0,A.Gh)((0,d.A)((0,i.connect)((e=>({items:e.superadmin.banner.items,total:e.superadmin.banner.total,actionCalled:e.superadmin.banner.actionCalled,createSuccess:e.superadmin.banner.createSuccess,editSuccess:e.superadmin.banner.editSuccess,deleteSuccess:e.superadmin.banner.deleteSuccess,successMessage:e.superadmin.banner.successMessage,errorMessage:e.superadmin.banner.errorMessage,permissions:e.employee.permissions.permissions})),(e=>({dispatch:e,actions:(0,c.bindActionCreators)({bannerList:C,bannerCreate:D,bannerUpdate:M,bannerDelete:P,bannerList:C},e)})))(k)))}}]);