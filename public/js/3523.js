"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3523],{40372:function(e,t,n){n.d(t,{ab:function(){return o},lI:function(){return u},wA:function(){return s},y1:function(){return c}});var r=n(69222),i=n(84917),a=n(57446),s=function(e){return e=(0,a.B7)(e,!0),function(t){r.Z.get("/superadmin/categories".concat(e)).then((function(e){e.data.success&&t({type:i.Ah,payload:e.data.data})})).catch((function(e){}))}},o=function(e){return function(t){r.Z.post("/superadmin/categories/store",e).then((function(e){t({type:i.hq,payload:e.data})})).catch((function(e){}))}},c=function(e,t){return function(n){r.Z.post("/superadmin/categories/update/".concat(e),t).then((function(e){n({type:i._o,payload:e.data})})).catch((function(e){}))}},u=function(e,t){return function(n){r.Z.delete("/superadmin/categories/delete/".concat(e),t).then((function(e){e.data.success&&n({type:i.Dq,payload:e.data})})).catch((function(e){}))}}},59146:function(e,t,n){n.d(t,{K5:function(){return o},LX:function(){return c},Qh:function(){return u},_1:function(){return s}});var r=n(69222),i=n(72359),a=n(57446),s=function(e){return e=(0,a.B7)(e,!0),function(t){r.Z.get("/superadmin/materials".concat(e)).then((function(e){e.data.success&&t({type:i.vN,payload:e.data.data})})).catch((function(e){}))}},o=function(e){return function(t){r.Z.post("/superadmin/materials/store",e).then((function(e){e.data.success&&t({type:i.uM,payload:e.data})})).catch((function(e){}))}},c=function(e,t){return function(n){r.Z.post("/superadmin/materials/update/".concat(e),t).then((function(e){e.data.success&&n({type:i.vg,payload:e.data})})).catch((function(e){}))}},u=function(e,t){return function(n){r.Z.delete("/superadmin/materials/delete/".concat(e),t).then((function(e){e.data.success&&n({type:i.e0,payload:e.data})})).catch((function(e){}))}}},64125:function(e,t,n){n.d(t,{ar:function(){return o},cr:function(){return c},uH:function(){return s},xj:function(){return u}});var r=n(69222),i=n(33482),a=n(57446),s=function(e){return e=(0,a.B7)(e,!0),function(t){r.Z.get("/superadmin/purities".concat(e)).then((function(e){e.data.success&&t({type:i.BS,payload:e.data.data})})).catch((function(e){}))}},o=function(e){return function(t){r.Z.post("/superadmin/purities/store",e).then((function(e){e.data.success&&t({type:i.Br,payload:e.data})})).catch((function(e){}))}},c=function(e,t){return function(n){r.Z.post("/superadmin/purities/update/".concat(e),t).then((function(e){e.data.success&&n({type:i.Xl,payload:e.data})})).catch((function(e){}))}},u=function(e,t){return function(n){r.Z.delete("/superadmin/purities/delete/".concat(e),t).then((function(e){e.data.success&&n({type:i.xF,payload:e.data})})).catch((function(e){}))}}},83079:function(e,t,n){n.d(t,{AA:function(){return u},Un:function(){return c},d9:function(){return s},j1:function(){return o}});var r=n(69222),i=n(62082),a=n(57446),s=function(e){return e=(0,a.B7)(e,!0),function(t){r.Z.get("/superadmin/units".concat(e)).then((function(e){e.data.success&&t({type:i.J7,payload:e.data.data})})).catch((function(e){}))}},o=function(e){return function(t){r.Z.post("/superadmin/units/store",e).then((function(e){e.data.success&&t({type:i.cm,payload:e.data})})).catch((function(e){}))}},c=function(e,t){return function(n){r.Z.post("/superadmin/units/update/".concat(e),t).then((function(e){e.data.success&&n({type:i.W6,payload:e.data})})).catch((function(e){}))}},u=function(e,t){return function(n){r.Z.delete("/superadmin/units/delete/".concat(e),t).then((function(e){e.data.success&&n({type:i.m7,payload:e.data})})).catch((function(e){}))}}},43523:function(e,t,n){n.r(t),n.d(t,{default:function(){return le}});var r=n(27378),i=n(23884),a=n(28730),s=n(23434),o=n(10755),c=n(74154),u=n(8971),l=n(13040),p=n(59146),d=n(46265),f=n(74570),h=n(26803),m=n(69162),y=n(93033),b=n(9647),g=n(10418),j=n(56793),v=n(66816),x=n(48684),O=n(60789),S=n(95908),P=n(22682),Z=n(98269),w=n(43564),D=n(78153),C=n(57446),M=n(98784),_=n.n(M),k=n(24246);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}var E=["input","label","meta"],q=["input","label","meta"],F=["input","label","meta"],L=["input","label","meta"],N=["input","label","meta"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function V(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(u,e);var t,n,r,i,o,c=(i=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(i);if(o){var n=X(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return V(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),z(I(t=c.call(this,e)),"getDefaultValues",(function(){return{category_id:"",name:"",unit_id:"",status:1,purities:""}})),z(I(t),"handleFieldChange",(function(e){})),z(I(t),"renderTextField",(function(e){var t=e.input,n=e.label,r=e.meta,i=r.touched,a=r.error,s=W(e,E);return(0,k.jsx)(g.Z,T(T(T({label:n,fullWidth:!0,error:!(!i||!a),helperText:i&&a?a:""},t),s),{},{inputProps:{maxLength:20}}))})),z(I(t),"renderCategoryField",(function(e){var n=e.input,r=e.label,i=e.meta,a=i.touched,s=i.error,o=W(e,q);return(0,k.jsxs)(j.Z,{fullWidth:!0,error:!(!a||!s),children:[r?(0,k.jsx)(v.Z,{children:r}):null,(0,k.jsxs)(x.Z,T(T(T({label:r,fullWidth:!0},n),o),{},{children:[(0,k.jsx)(O.Z,{value:"",children:"select category"}),t.state.categories.map((function(e,t){return(0,k.jsx)(O.Z,{value:e.id,children:e.name},t)}))]})),a&&s?(0,k.jsx)(S.Z,{children:s}):null]})})),z(I(t),"renderUnitField",(function(e){var n=e.input,r=e.label,i=e.meta,a=i.touched,s=i.error,o=W(e,F);return(0,k.jsxs)(j.Z,{fullWidth:!0,error:!(!a||!s),children:[r?(0,k.jsx)(v.Z,{children:r}):null,(0,k.jsxs)(x.Z,T(T(T({label:r,fullWidth:!0},n),o),{},{children:[(0,k.jsx)(O.Z,{value:"",children:"select unit"}),t.state.units.map((function(e,t){return(0,k.jsx)(O.Z,{value:e.id,children:e.name},t)}))]})),a&&s?(0,k.jsx)(S.Z,{children:s}):null]})})),z(I(t),"renderStatusField",(function(e){var t=e.input,n=e.label,r=e.meta,i=r.touched,a=r.error,s=W(e,L);return(0,k.jsxs)(j.Z,{fullWidth:!0,error:!(!i||!a),children:[n?(0,k.jsx)(v.Z,{children:n}):null,(0,k.jsxs)(x.Z,T(T(T({label:n,fullWidth:!0},t),s),{},{children:[(0,k.jsx)(O.Z,{value:"1",children:"Active"}),(0,k.jsx)(O.Z,{value:"0",children:"Inactive"})]})),i&&a?(0,k.jsx)(S.Z,{children:a}):null]})})),z(I(t),"getSelectedNames",(function(e){for(var n=[],r=0;r<e.length;r++){var i=_().filter(t.state.purities,{id:e[r]});n.push(i[0].name)}return n})),z(I(t),"renderMaterialPurityField",(function(e){var n=e.input,r=e.label,i=e.meta,a=i.touched,s=i.error,o=W(e,N);return(0,k.jsxs)(j.Z,{fullWidth:!0,error:!(!a||!s),children:[r?(0,k.jsx)(v.Z,{children:r}):null,(0,k.jsx)(x.Z,T(T(T({label:r,fullWidth:!0,multiple:!0},n),o),{},{value:""===n.value?[]:n.value,multi:"true",renderValue:function(e){return t.getSelectedNames(e).join(", ")},children:t.state.purities.map((function(e){return(0,k.jsxs)(O.Z,{value:e.id,children:[(0,k.jsx)(P.Z,{checked:!!(n.value&&n.value.indexOf(e.id)>-1)}),(0,k.jsx)(Z.Z,{primary:e.name})]},e.id)}))})),a&&s?(0,k.jsx)(S.Z,{children:s}):null]})})),t.state={formData:"formData"in t.props?t.props.formData:null,categories:t.props.categories,units:t.props.units,purities:t.props.purities},t}return t=u,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.categories!==t.categories&&(n.categories=e.categories),e.units!==t.units&&(n.units=e.units),e.purities!==t.purities&&(n.purities=e.purities),n}}],(n=[{key:"componentDidMount",value:function(){if(this.state.formData){var e=T({},this.state.formData);e.purities=(0,C.BB)(e.purities,"id"),this.props.initialize(e)}else this.props.initialize(this.getDefaultValues())}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit;return t.pristine,t.submitting,(0,k.jsx)("form",{onSubmit:n,children:(0,k.jsx)(w.Z,{sx:{flexGrow:1,m:.5},children:(0,k.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,k.jsx)(s.ZP,{item:!0,xs:6,className:"create-input",children:(0,k.jsx)(b.gN,{name:"category_id",component:this.renderCategoryField,label:"Category",type:"select"})}),(0,k.jsx)(s.ZP,{item:!0,xs:6,className:"create-input",children:(0,k.jsx)(b.gN,{name:"name",component:this.renderTextField,label:"Material Name"})}),(0,k.jsx)(s.ZP,{item:!0,xs:6,className:"create-input",children:(0,k.jsx)(b.gN,{name:"unit_id",component:this.renderUnitField,label:"Unit",type:"select"})}),(0,k.jsx)(s.ZP,{item:!0,xs:6,className:"create-input",children:(0,k.jsx)(b.gN,{name:"purities",component:this.renderMaterialPurityField,label:"Purities",multi:!0,type:"select",defaultValue:[],onChange:function(t){return e.handleFieldChange(t)}})}),(0,k.jsx)(s.ZP,{item:!0,xs:6,className:"create-input",children:(0,k.jsx)(b.gN,{name:"status",component:this.renderStatusField,label:"Status",type:"select"})}),(0,k.jsx)(s.ZP,{item:!0,xs:12,children:(0,k.jsxs)(D.Z,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,k.jsx)(a.Z,{variant:"contained",type:"submit",children:"Submit"}),(0,k.jsx)(a.Z,{variant:"outlined",onClick:function(){return e.props.handleCancel()},children:"Cancel"})]})})]})})})}}])&&A(t.prototype,n),r&&A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.Component),K=(0,l.Z)((0,b.sx)({form:"MaterialForm",validate:function(e){var t={};return["name","category_id","unit_id","purities"].forEach((function(n){e[n]||(t[n]="Required")})),t}})(H)),Q=n(40372),G=n(83079),J=n(64125),Y=n(72897),$=n(72359);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(p,e);var t,n,r,i,o,l=(i=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(i);if(o){var n=oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ae(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),ce(se(t=l.call(this,e)),"handlePagination",(function(e){t.setState({queryParams:ne(ne({},t.state.queryParams),{},{page:e})},(function(){t.loadListData()}))})),ce(se(t),"loadListData",(function(){t.props.actions.materialList(t.state.queryParams)})),ce(se(t),"handleEdit",(function(e){t.setState({editRow:e,openDialog:!0,dialogTitle:"Edit Material"})})),ce(se(t),"handleDelete",(function(e){t.props.actions.materialDelete(e.id)})),ce(se(t),"handleCreate",(function(){t.setState({openDialog:!0,dialogTitle:"Create Material",editRow:null})})),ce(se(t),"handleDialogClose",(function(e,n){n&&"backdropClick"==n||t.setState({openDialog:!1,editRow:null})})),ce(se(t),"submit",(function(e){t.state.editRow?t.props.actions.materialUpdate(t.state.editRow.id,e):t.props.actions.materialCreate(e)})),ce(se(t),"handleCancel",(function(){t.handleDialogClose()})),t.state=ne(ne({},t.props),{},{queryParams:{page:1,limit:15},openDialog:!1,isCreate:!0,editRow:null,categories:t.props.categories,units:t.props.units,purities:t.props.purities,createSuccess:!1,editSuccess:!1,deleteSuccess:!1,actionCalled:t.props.actionCalled,successMessage:t.props.successMessage,errorMessage:t.props.errorMessage}),t.columns=[{name:"name",display_name:"Material"},{name:"category",display_name:"Category"},{name:"unit",display_name:"Unit"},{name:"status_display",display_name:"Status"}],t.tableActions=[{label:"Edit",onClick:t.handleEdit,color:"primary"},{label:"Delete",onClick:t.handleDelete,isDelete:!0,color:"error"}],t}return t=p,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.items!==t.items&&(n.items=e.items),e.total!==t.total&&(n.total=e.total),e.actionCalled!==t.actionCalled&&(n.actionCalled=e.actionCalled),e.successMessage!==t.successMessage&&(n.successMessage=e.successMessage),e.errorMessage!==t.errorMessage&&(n.errorMessage=e.errorMessage),e.categories!==t.categories&&(n.categories=e.categories),e.units!==t.units&&(n.units=e.units),e.purities!==t.purities&&(n.purities=e.purities),"createSuccess"in e&&e.createSuccess!==t.createSuccess&&(n.createSuccess=e.createSuccess),"editSuccess"in e&&e.editSuccess!==t.editSuccess&&(n.editSuccess=e.editSuccess),"deleteSuccess"in e&&e.deleteSuccess!==t.deleteSuccess&&(n.deleteSuccess=e.deleteSuccess),n}}],(n=[{key:"componentDidMount",value:function(){this.loadListData(),this.props.actions.categoryList({all:1}),this.props.actions.unitList({all:1}),this.props.actions.purityList({all:1})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.actionCalled&&(this.state.createSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:$.uM,payload:!1}),this.setState({queryParams:ne(ne({},this.state.queryParams),{},{page:1}),openDialog:!1,editRow:null},(function(){e.loadListData()}))):this.state.editSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:$.vg,payload:!1}),this.setState({queryParams:ne(ne({},this.state.queryParams),{},{page:1}),openDialog:!1,editRow:null},(function(){e.loadListData()}))):this.state.deleteSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:$.e0,payload:!1}),this.handlePagination(1)):null!=this.state.errorMessage&&this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}))}},{key:"render",value:function(){return(0,k.jsxs)(u.Z,{className:"table-card-inner",title:"Material",secondary:(0,k.jsx)(a.Z,{variant:"contained",onClick:this.handleCreate,children:"Add"}),children:[(0,k.jsx)(s.ZP,{container:!0,spacing:c.dv,children:(0,k.jsx)(d.Z,{columns:this.columns,rows:this.state.items,page:this.state.queryParams.page,limit:this.state.queryParams.limit,total:this.state.total,handlePagination:this.handlePagination,actions:this.tableActions})}),(0,k.jsxs)(f.Z,{className:"ratn-dialog-wrapper",open:this.state.openDialog,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"md",children:[(0,k.jsx)(y.Z,{children:this.state.dialogTitle}),(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(m.Z,{}),(0,k.jsx)(K,{onSubmit:this.submit,formData:this.state.editRow,categories:this.state.categories,units:this.state.units,purities:this.state.purities,handleCancel:this.handleCancel})]})]})]})}}])&&re(t.prototype,n),r&&re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.Component),le=(0,Y.RM)((0,l.Z)((0,i.connect)((function(e){return{items:e.superadmin.material.items,total:e.superadmin.material.total,categories:e.superadmin.category.items||[],units:e.superadmin.unit.items||[],purities:e.superadmin.purity.items||[],actionCalled:e.superadmin.material.actionCalled,createSuccess:e.superadmin.material.createSuccess,editSuccess:e.superadmin.material.editSuccess,deleteSuccess:e.superadmin.material.deleteSuccess,successMessage:e.superadmin.material.successMessage,errorMessage:e.superadmin.material.errorMessage}}),(function(e){return{dispatch:e,actions:(0,o.bindActionCreators)({materialList:p._1,materialCreate:p.K5,materialUpdate:p.LX,materialDelete:p.Qh,categoryList:Q.wA,unitList:G.d9,purityList:J.uH},e)}}))(ue)))}}]);