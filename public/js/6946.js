"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6946],{36946:function(e,t,s){s.r(t);var r=s(27378),o=s(23884),n=s(28730),a=s(23434),i=s(10755),c=s(74154),l=s(8971),u=s(13040),p=s(78178),d=s(46265),f=s(74570),h=s(26803),y=s(69162),m=s(93033),b=s(39805),g=s(72897),S=s(57446),v=s(54453),P=s(24246);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?C(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function M(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(p,e);var t,s,r,o,i,u=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(o);if(i){var s=R(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return M(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),q(k(t=u.call(this,e)),"handlePagination",(function(e){t.setState({queryParams:O(O({},t.state.queryParams),{},{page:e})},(function(){t.loadListData()}))})),q(k(t),"loadListData",(function(){t.props.actions.roleList(t.state.queryParams)})),q(k(t),"handleEdit",(function(e){t.setState({editRow:e,openDialog:!0,dialogTitle:"Edit Role"})})),q(k(t),"handlePermissions",(function(e){t.props.navigate("permissions/"+e.id)})),q(k(t),"handleDelete",(function(e){t.props.actions.roleDelete(e.id)})),q(k(t),"handleCreate",(function(){t.setState({openDialog:!0,dialogTitle:"Create Role",editRow:null})})),q(k(t),"handleDialogClose",(function(e,s){s&&"backdropClick"==s||t.setState({openDialog:!1,editRow:null})})),q(k(t),"submit",(function(e){t.state.editRow?t.props.actions.roleUpdate(t.state.editRow.id,e):t.props.actions.roleCreate(e)})),q(k(t),"handleCancel",(function(){t.handleDialogClose()})),t.state=O(O({},t.props),{},{queryParams:{page:1,limit:50},openDialog:!1,isCreate:!0,editRow:null,createSuccess:!1,editSuccess:!1,deleteSuccess:!1,actionCalled:t.props.actionCalled,successMessage:t.props.successMessage,errorMessage:t.props.errorMessage}),t.columns=[{name:"name",display_name:"Role Name"}],t}return t=p,r=[{key:"getDerivedStateFromProps",value:function(e,t){var s={};return e.items!==t.items&&(s.items=e.items),e.total!==t.total&&(s.total=e.total),e.actionCalled!==t.actionCalled&&(s.actionCalled=e.actionCalled),e.successMessage!==t.successMessage&&(s.successMessage=e.successMessage),e.errorMessage!==t.errorMessage&&(s.errorMessage=e.errorMessage),"createSuccess"in e&&e.createSuccess!==t.createSuccess&&(s.createSuccess=e.createSuccess),"editSuccess"in e&&e.editSuccess!==t.editSuccess&&(s.editSuccess=e.editSuccess),"deleteSuccess"in e&&e.deleteSuccess!==t.deleteSuccess&&(s.deleteSuccess=e.deleteSuccess),e.permissions!==t.permissions&&(s.permissions=e.permissions),s}}],(s=[{key:"componentDidMount",value:function(){this.loadListData()}},{key:"componentDidUpdate",value:function(){var e=this;this.state.actionCalled&&(this.state.createSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:v.Cd,payload:!1}),this.setState({queryParams:O(O({},this.state.queryParams),{},{page:1}),openDialog:!1,editRow:null},(function(){e.loadListData()}))):this.state.editSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:v.hv,payload:!1}),this.setState({queryParams:O(O({},this.state.queryParams),{},{page:1}),openDialog:!1,editRow:null},(function(){e.loadListData()}))):this.state.deleteSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:v.cc,payload:!1}),this.handlePagination(1)):null!=this.state.errorMessage&&this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:v.fQ}))}},{key:"render",value:function(){return(0,P.jsxs)(l.Z,{title:"Roles",secondary:(0,S.Fs)(this.state.permissions,"roles","add")?(0,P.jsx)(n.Z,{variant:"contained",onClick:this.handleCreate,children:"Add"}):null,children:[(0,P.jsx)(a.ZP,{container:!0,spacing:c.dv,children:(0,P.jsx)(d.Z,{columns:this.columns,rows:this.state.items,page:this.state.queryParams.page,limit:this.state.queryParams.limit,total:this.state.total,handlePagination:this.handlePagination,actions:[{label:"Edit",onClick:this.handleEdit,color:"primary",show:(0,S.Fs)(this.state.permissions,"roles","edit")},{label:"Delete",onClick:this.handleDelete,isDelete:!0,color:"error",show:(0,S.Fs)(this.state.permissions,"roles","delete"),conditions:[{key:"can_delete",value:!0}]},{label:"Permissions",onClick:this.handlePermissions,color:"primary",show:(0,S.Fs)(this.state.permissions,"roles","edit")}]})}),(0,P.jsxs)(f.Z,{className:"ratn-dialog-wrapper",open:this.state.openDialog,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"sm",children:[(0,P.jsx)(m.Z,{children:this.state.dialogTitle}),(0,P.jsxs)(h.Z,{children:[(0,P.jsx)(y.Z,{}),(0,P.jsx)(b.Z,{formData:this.state.editRow,handleCancel:this.handleCancel})]})]})]})}}])&&j(t.prototype,s),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.Component);t.default=(0,g.RM)((0,u.Z)((0,o.connect)((function(e){return{items:e.superadmin.role.items,total:e.superadmin.role.total,actionCalled:e.superadmin.role.actionCalled,createSuccess:e.superadmin.role.createSuccess,editSuccess:e.superadmin.role.editSuccess,deleteSuccess:e.superadmin.role.deleteSuccess,successMessage:e.superadmin.role.successMessage,errorMessage:e.superadmin.role.errorMessage,permissions:e.employee.permissions.permissions}}),(function(e){return{dispatch:e,actions:(0,i.bindActionCreators)({roleList:p.Uy,roleCreate:p.v9,roleUpdate:p.vh,roleDelete:p.Fe},e)}}))(x)))}}]);