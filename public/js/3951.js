"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3951],{55513:function(t,e,n){n.d(e,{$P:function(){return l},$t:function(){return u},N0:function(){return o},ds:function(){return c},uf:function(){return s}});var a=n(69222),r=n(98701),i=n(57446),o=function(t){return t=(0,i.B7)(t,!0),function(e){a.Z.get("/superadmin/admin".concat(t)).then((function(t){t.data.success&&e({type:r.RX,payload:t.data.data})})).catch((function(t){}))}},s=function(t){return function(e){a.Z.post("/superadmin/admin/store",t).then((function(t){e({type:r.gq,payload:t.data})})).catch((function(t){}))}},c=function(t){return function(e){a.Z.get("/superadmin/admin/fetch/".concat(t)).then((function(t){t.data.success&&e({type:r.UY,payload:t.data.data})})).catch((function(t){}))}},u=function(t,e){return function(n){a.Z.post("/superadmin/admin/update/".concat(t),e).then((function(t){n({type:r.V5,payload:t.data})})).catch((function(t){}))}},l=function(t,e){return function(n){a.Z.delete("/superadmin/admin/delete/".concat(t),e).then((function(t){n({type:r.cW,payload:t.data})})).catch((function(t){}))}}},40372:function(t,e,n){n.d(e,{ab:function(){return s},lI:function(){return u},wA:function(){return o},y1:function(){return c}});var a=n(69222),r=n(84917),i=n(57446),o=function(t){return t=(0,i.B7)(t,!0),function(e){a.Z.get("/superadmin/categories".concat(t)).then((function(t){t.data.success&&e({type:r.Ah,payload:t.data.data})})).catch((function(t){}))}},s=function(t){return function(e){a.Z.post("/superadmin/categories/store",t).then((function(t){t.data.success&&e({type:r.hq,payload:t.data})})).catch((function(t){}))}},c=function(t,e){return function(n){a.Z.post("/superadmin/categories/update/".concat(t),e).then((function(t){t.data.success&&n({type:r._o,payload:t.data})})).catch((function(t){}))}},u=function(t,e){return function(n){a.Z.delete("/superadmin/categories/delete/".concat(t),e).then((function(t){t.data.success&&n({type:r.Dq,payload:t.data})})).catch((function(t){}))}}},70228:function(t,e,n){n.d(e,{aq:function(){return l},gf:function(){return c},i$:function(){return o},jD:function(){return s},qX:function(){return u},zZ:function(){return d}});var a=n(69222),r=n(58996),i=n(57446),o=function(t){return t=(0,i.B7)(t,!0),function(e){a.Z.get("/superadmin/material-prices".concat(t)).then((function(t){t.data.success&&e({type:r.mE,payload:t.data.data})})).catch((function(t){}))}},s=function(t){return function(e){a.Z.post("/superadmin/material-prices/store",t).then((function(t){e({type:r.lC,payload:t.data})})).catch((function(t){}))}},c=function(t){return function(e){a.Z.get("/superadmin/material-prices/view/".concat(t)).then((function(t){console.log(t.data.data),t.data.success&&e({type:r.He,payload:t.data.data})})).catch((function(t){}))}},u=function(t,e){return function(n){a.Z.post("/superadmin/material-prices/update/".concat(t),e).then((function(t){n({type:r.G$,payload:t.data})})).catch((function(t){}))}},l=function(t,e){return function(n){a.Z.delete("/superadmin/material-prices/delete/".concat(t),e).then((function(t){n({type:r.BG,payload:t.data})})).catch((function(t){}))}},d=function(t,e){return function(n){a.Z.get("/superadmin/material-prices/product-price-details/".concat(t),e).then((function(t){n({type:r.r6,payload:t.data.data})})).catch((function(t){}))}}},23880:function(t,e,n){n.d(e,{IO:function(){return l},LR:function(){return u},d:function(){return c},rr:function(){return s},u:function(){return o}});var a=n(69222),r=n(10772),i=n(57446),o=function(t){return t=(0,i.B7)(t,!0),function(e){a.Z.get("/superadmin/sales".concat(t)).then((function(t){t.data.success&&e({type:r._u,payload:t.data.data})})).catch((function(t){}))}},s=function(t){return function(e){a.Z.post("/superadmin/sales/store",t).then((function(t){e({type:r.N0,payload:t.data})})).catch((function(t){}))}},c=function(t){return function(e){a.Z.get("/superadmin/sales/view/".concat(t)).then((function(t){console.log(t.data.data),t.data.success&&e({type:r.Uz,payload:t.data.data})})).catch((function(t){}))}},u=function(t,e){return function(n){a.Z.post("/superadmin/sales/update/".concat(t),e).then((function(t){n({type:r.f_,payload:t.data})})).catch((function(t){}))}},l=function(t,e){return function(n){a.Z.delete("/superadmin/sales/delete/".concat(t),e).then((function(t){n({type:r.xg,payload:t.data})})).catch((function(t){}))}}},45747:function(t,e,n){n.d(e,{Jg:function(){return c},NM:function(){return o},ks:function(){return s},qg:function(){return u}});var a=n(69222),r=n(84286),i=n(57446),o=function(t){return t=(0,i.B7)(t,!0),function(e){a.Z.get("/superadmin/sub-categories".concat(t)).then((function(t){t.data.success&&e({type:r.tx,payload:t.data.data})})).catch((function(t){}))}},s=function(t){return function(e){a.Z.post("/superadmin/sub-categories/store",t).then((function(t){t.data.success&&e({type:r.p0,payload:t.data})})).catch((function(t){}))}},c=function(t,e){return function(n){a.Z.post("/superadmin/sub-categories/update/".concat(t),e).then((function(t){t.data.success&&n({type:r.LG,payload:t.data})})).catch((function(t){}))}},u=function(t,e){return function(n){a.Z.delete("/superadmin/sub-categories/delete/".concat(t),e).then((function(t){t.data.success&&n({type:r.fV,payload:t.data})})).catch((function(t){}))}}},13951:function(t,e,n){n.r(e),n.d(e,{default:function(){return vt}});var a=n(27378),r=n(23884),i=n(9647),o=n(43564),s=n(23434),c=n(56793),u=n(66816),l=n(48684),d=n(60789),p=n(10418),f=n(28730),h=n(52359),m=n(33565),g=n(78153),x=n(23994),y=n(50243),_=n(4496),b=n(41485),j=n(57446),Z=n(10755),v=n(23880),P=n(62386),C=n(70228),k=n(55513),S=n(4497),D=n(16655),w=n(72897),F=n(20511),O=n(13040),L=n(8971),V=n(74570),M=n(16569),N=n(26803),W=n(69162),A=n(93033),I=n(62401),E=n(14442),Y=n(67321),q=n(97722),z=n(49444),T=n(92146),R=n(47265),B=n(96616),X=n(68456),G=n(19265),U=n(98784),$=n.n(U),Q=n(10772),H=n(84286),J=n(17937),K=n(45747),tt=n(40372),et=n(61320),nt=n.n(et),at=n(24246);function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function it(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){ht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function lt(t,e){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lt(t,e)}function dt(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pt(t)}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}function ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(16222).default.updateSyncErrors;var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}(P,t);var e,n,r,i,Z,v=(i=P,Z=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ft(i);if(Z){var n=ft(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return dt(this,t)});function P(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,P),ht(pt(e=v.call(this,t)),"handleAddNewProduct",(function(){(0,j.xb)(e.state.formValues.user_id)?e.props.enqueueSnackbar("Please select admin for tax calculate.",{variant:"error"}):e.setState(ct({productDialog:!0},e.getDefaultProductFormData()))})),ht(pt(e),"handleAdminChange",(function(t){e.updateFormValues(t.target.value,"user_id");var n=$().filter(e.state.adminList,{id:t.target.value}),a="";n.length&&(a=n[0].gst),e.setState({user_gst_no:a})})),ht(pt(e),"handleDefaultChange",(function(t,n){e.updateFormValues(t.target.value,n)})),ht(pt(e),"updateFormValues",(function(t,n){var a=e.state.formValues;a[n]=t,e.setState({formValues:a},(function(){e.handleCalculateMainPrice()}))})),ht(pt(e),"handleProductChange",(function(t,n){e.updateProductFormValues(t.target.value,"product_id"),e.props.actions.stocksProducDetails({product_id:t.target.value})})),ht(pt(e),"handleProductFormDefaultChange",(function(t,n){e.updateProductFormValues(t.target.value,n)})),ht(pt(e),"handleProductFormStockChange",(function(t){var n=null==t.target.value?t.target.parentNode.value:t.target.value;e.updateProductFormValues(n,"stock_id")})),ht(pt(e),"handleSizeChange",(function(t,n){e.updateProductFormValues(t.target.value,"size_id")})),ht(pt(e),"handleCategoryChange",(function(t){e.updateProductFormValues(t.target.value,"category_id"),(0,j.xb)(t.target.value)?e.props.dispatch({type:H.z8}):e.props.actions.subCategoryList({all:1,category_id:t.target.value}),e.updateProductFormValues("","sub_category_id"),e.updateProductFormValues("","product_id"),e.props.dispatch({type:J.vM})})),ht(pt(e),"handleSubCategoryChange",(function(t){e.updateProductFormValues(t.target.value,"sub_category_id"),e.props.actions.stocksProductList({sub_category_id:t.target.value}),e.updateProductFormValues("","product_id"),e.props.dispatch({type:J.vM})})),ht(pt(e),"updateProductFormValues",(function(t,n){var a=e.state.productFormValues,r=e.state.sizeList,i=e.state.materialFormErros;if(a[n]=t,"product_id"==n){e.props.actions.materialPriceProductPriceInfo(t||0);var o=$().filter(e.state.stockProductList,{id:t});a.materials=[],a.product_type=o.length?o[0].type:"",a.product_name=o.length?o[0].name:"",a.tax_info=o.length?o[0].tax_info:null}else if("size_id"==n);else if("stock_id"==n){var s=$().filter(e.state.stockProductDetails,(function(e){return e.stock_id==t}));console.log(s);var c,u=[],l=it(s[0].materials);try{for(l.s();!(c=l.n()).done;){var d=c.value;u.push({id:0,material_id:d.material_id,material_name:d.material_name,weight:"material"!=s[0].product_type?d.weight:"",quantity:"material"!=s[0].product_type?d.quantity:"",unit_name:d.unit_name,unit_id:d.unit_id,purity:d.purity,purity_id:d.purity_id,amount:0,rate:0}),i.push({weight:!1,quantity:!1})}}catch(t){l.e(t)}finally{l.f()}a.materials=u,a.size_id=s[0].size_id,a.size_name=s[0].size_name,a.certificate_no=s[0].certificate_no}e.setState({productFormValues:a,sizeList:r,materialFormErros:i},(function(){e.calculateProductPrice()}))})),ht(pt(e),"calculateProductPrice",(function(){if(e.state.productPriceInfo){var t=e.state.productFormValues,n=(0,j.ej)(e.state.productPriceInfo,t.materials);if(n){for(var a=0;a<n.materials_price.length;a++)t.materials[a].amount=n.materials_price[a].amount,t.materials[a].rate=n.materials_price[a].rate;t.sub_price=n.sub_total,t.making_charge=n.making_charge;var r=(0,j.xb)(t.rep)?0:parseFloat(t.rep),i=(0,j.GQ)(t.tax_info,n.sub_total+n.making_charge+r,e.state.user_gst_no);t.cgst_tax=i?i.cgst:0,t.sgst_tax=i?i.sgst:0,t.igst_tax=i?i.igst:0,t.total_tax=(0,j.XY)(t.cgst_tax+t.sgst_tax+t.igst_tax),t.total=n.total_amount+r+t.cgst_tax+t.sgst_tax+t.igst_tax,t.total_weight=n.total_weight,e.setState({productFormValues:t})}}})),ht(pt(e),"getDefaultProductFormData",(function(){var t;return{productFormValues:(t={id:0,product_id:"",product_type:"",product_name:"",certificate_no:"",size_id:"",size_name:"",materials:[],making_charge:0,stock_id:0,category_id:"",sub_category_id:"",total_weight:0,sub_price:0},ht(t,"making_charge",0),ht(t,"rep",0),ht(t,"cgst_tax",0),ht(t,"sgst_tax",0),ht(t,"igst_tax",0),ht(t,"total",0),ht(t,"tax_info",null),ht(t,"total_tax",0),t),productFormErros:{product_id:!1,certificate_no:!1,size_id:!1,category_id:!1,sub_category_id:!1},materialFormErros:[]}})),ht(pt(e),"handleMaterialFormChange",(function(t,n,a){var r=e.state.productFormValues,i=r.materials;i[n][a]=t.target.value,r.materials=i,e.setState({productFormValues:r},(function(){e.calculateProductPrice()}))})),ht(pt(e),"handleProductDialogClose",(function(t,n){n&&"backdropClick"==n||e.setState({productDialog:!1})})),ht(pt(e),"getTotalWeightByProduct",(function(t){var n,a=0,r=it(e.state.formValues.products[t].materials);try{for(r.s();!(n=r.n()).done;){var i=n.value;a+=i.weight?parseFloat(i.weight):0}}catch(t){r.e(t)}finally{r.f()}return a})),ht(pt(e),"handleProductDelete",(function(t){e.setState({deletingIndex:t,deleteDialogOpen:!0})})),ht(pt(e),"handleProductSubmit",(function(){if(!e.productFormValidate()){var t,n=ct({},e.state.formValues),a=ct({},e.state.productFormValues);n.products.push(a),e.setState({formValues:n,productFormValues:ct(ct({},e.state.productFormValues),{},(t={size_id:"",size_name:"",materials:[],making_charge:0,stock_id:0,total_weight:0,sub_price:0},ht(t,"making_charge",0),ht(t,"rep",0),ht(t,"cgst_tax",0),ht(t,"sgst_tax",0),ht(t,"igst_tax",0),ht(t,"total",0),ht(t,"tax_info",null),ht(t,"total_tax",0),t))},(function(){e.handleCalculateMainPrice()}))}})),ht(pt(e),"calculatePrice",(function(){})),ht(pt(e),"handleCalculateMainPrice",(function(){for(var t,n,a=e.state.formValues,r=0,i=0,o=0,s=0,c=0,u=0,l=0,d=0;d<a.products.length;d++)r+=parseFloat(a.products[d].sub_price)+parseFloat(a.products[d].making_charge)+(a.products[d].rep?parseFloat(a.products[d].rep):0),i+=a.products[d].cgst_tax?parseFloat(a.products[d].cgst_tax):0,o+=a.products[d].sgst_tax?parseFloat(a.products[d].sgst_tax):0,s+=a.products[d].igst_tax?parseFloat(a.products[d].igst_tax):0,c+=parseFloat(a.products[d].total);r=(0,j.XY)(r,!0),i=(0,j.XY)(i,!0),o=(0,j.XY)(o,!0),s=(0,j.XY)(s,!0),c=(0,j.XY)(c,!0),(0,j.xb)(a.discount)||(u=parseFloat(a.discount)),t=(0,j.XY)(c-u,!0),(0,j.xb)(a.paid_amount)||(l=parseFloat(a.paid_amount)),n=(0,j.XY)(t-l,!0),a.taxable_amount=r,a.cgst_tax=i,a.sgst_tax=o,a.igst_tax=s,a.total_amount=c,a.total_payable=t,a.due_amount=n,e.setState({formValues:a})})),ht(pt(e),"productFormValidate",(function(){var t=e.state.productFormValues,n=e.state.productFormErros,a=e.state.materialFormErros,r=!1;(0,j.xb)(t.product_id)?(n.product_id=!0,r=!0):n.product_id=!1,"material"!=t.product_type?t.stock_id:(n.certificate_no=!1,n.size_id=!1),t.materials.length||(e.props.enqueueSnackbar("Please select stock",{variant:"error"}),r=!0);for(var i=0;i<t.materials.length;i++)(0,j.xb)(t.materials[i].weight)?(a[i].weight=!0,r=!0):a[i].weight=!1,(0,j.xb)(t.materials[i].quantity)?(a[i].quantity=!0,r=!0):a[i].quantity=!1;return e.setState({productFormErros:n,materialFormErros:a}),r})),ht(pt(e),"handleDialogClose",(function(){e.setState({deleteDialogOpen:!1,deletingIndex:0})})),ht(pt(e),"handleDeleteConfirm",(function(){var t=e.state.formValues;t.products.splice(e.state.deletingIndex,1),e.setState({formValues:t,deleteDialogOpen:!1},(function(){e.handleCalculateMainPrice()}))})),ht(pt(e),"handleSubmit",(function(){var t=e.state.formValues,n=e.formValidate();if(0==t.products.length)return e.props.enqueueSnackbar("Please add at least one product",{variant:"error"}),!1;!n&&t.products.length&&(e.setState({submitting:!0}),e.state.isCreateFrom?e.props.actions.salesStore(e.state.formValues):e.props.actions.salesUpdate(e.state.formData.id,e.state.formValues))})),ht(pt(e),"formValidate",(function(){var t=e.state.formErros,n=e.state.formValues,a=!1;return(0,j.xb)(n.user_id)?(t.user_id=!0,a=!0):t.user_id=!1,(0,j.xb)(n.invoice_date)?(t.invoice_date=!0,a=!0):t.invoice_date=!1,(0,j.xb)(n.paid_amount)?(t.paid_amount=!0,a=!0):t.paid_amount=!1,(0,j.xb)(n.due_date)?(t.due_date=!0,a=!0):t.due_date=!1,(0,j.xb)(n.settlement_date)?(t.settlement_date=!0,a=!0):t.settlement_date=!1,(0,j.xb)(n.total_payable)||(0,j.xb)(n.paid_amount)||parseFloat(n.paid_amount)>parseFloat(n.total_payable)&&(a=!0,e.props.enqueueSnackbar("Paid amount must be less than or equal to payable amount.",{variant:"error"})),e.setState({formErros:t}),a})),ht(pt(e),"checkIfStockAdded",(function(t){return $().filter(e.state.formValues.products,(function(e){return e.stock_id==t})).length})),ht(pt(e),"checkIfAllStockAdded",(function(){for(var t=!0,n=0;n<e.state.stockProductDetails.length;n++)if(!e.checkIfStockAdded(e.state.stockProductDetails[n].stock_id)){t=!1;break}return t}));var n="formData"in e.props?e.props.formData:null;return e.state=ct(ct({formData:n,isCreateFrom:!n,adminList:e.props.adminList,productList:e.props.productList,productPriceInfo:e.props.productPriceInfo,stockProductList:e.props.stockProductList,stockProductDetails:e.props.stockProductDetails,categoryList:e.props.categoryList,subCategoryList:e.props.subCategoryList,materialList:[],sizeList:[],materials:[],product_type:"",productDialog:!1,user_gst_no:"",formValues:{user_id:"",invoice_number:"",invoice_date:nt()().format("MM/DD/YYYY"),products:[],notes:"",payment_mode:"cash",transaction_no:"",taxable_amount:"",total_amount:"",discount:"",total_payable:"",paid_amount:"",due_amount:"",due_date:"",cgst_tax:"",sgst_tax:"",igst_tax:"",settlement_date:""},formErros:{user_id:!1,invoice_number:!1,invoice_date:!1,notes:!1,payment_mode:!1,transaction_no:!1,total_amount:!1,tax:!1,discount:!1,sub_total:!1},deleteDialogOpen:!1,deletingIndex:0,submitting:!1},e.getDefaultProductFormData()),{},{actionCalled:e.props.actionCalled,createSuccess:e.props.createSuccess,editSuccess:e.props.editSuccess,successMessage:e.props.successMessage,errorMessage:e.props.errorMessage}),e}return e=P,r=[{key:"getDerivedStateFromProps",value:function(t,e){var n={};return t.adminList!==e.adminList&&(n.adminList=t.adminList),t.productList!==e.productList&&(n.productList=t.productList),t.actionCalled!==e.actionCalled&&(n.actionCalled=t.actionCalled),t.createSuccess!==e.createSuccess&&(n.createSuccess=t.createSuccess),t.editSuccess!==e.editSuccess&&(n.editSuccess=t.editSuccess),t.successMessage!==e.successMessage&&(n.successMessage=t.successMessage),t.errorMessage!==e.errorMessage&&(n.errorMessage=t.errorMessage),t.productPriceInfo!==e.productPriceInfo&&(n.productPriceInfo=t.productPriceInfo),t.stockProductList!==e.stockProductList&&(n.stockProductList=t.stockProductList),t.stockProductDetails!==e.stockProductDetails&&(n.stockProductDetails=t.stockProductDetails),t.categoryList!==e.categoryList&&(n.categoryList=t.categoryList),t.subCategoryList!==e.subCategoryList&&(n.subCategoryList=t.subCategoryList),n}}],(n=[{key:"componentDidMount",value:function(){if(this.props.actions.adminList({all:1}),this.props.actions.categoryList({all:1}),this.state.formData){var t=ct({},this.state.formData);this.setState({formValues:t})}}},{key:"componentDidUpdate",value:function(){this.state.actionCalled&&(this.state.isCreateFrom?this.state.createSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:Q.W1}),this.props.navigate("/super-admin/sales")):(this.setState({submitting:!1}),this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:Q.W1})):this.state.editSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:Q.W1}),this.props.navigate("/super-admin/sales")):(this.setState({submitting:!1}),this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:Q.W1})))}},{key:"render",value:function(){var t=this,e=this.state,n=e.formValues,r=e.formErros,i=e.productFormValues,Z=e.productFormErros,v=e.materialFormErros,P=e.submitting;return(0,at.jsxs)(o.Z,{sx:{flexGrow:1,m:.5},className:"ratn-dialog-inner",children:[(0,at.jsxs)(s.ZP,{container:!0,spacing:2,className:"tax-input loans_view p_view ",children:[(0,at.jsx)(s.ZP,{item:!0,xs:6,className:"create-input",children:(0,at.jsxs)(c.Z,{fullWidth:!0,error:r.user_id,children:[(0,at.jsx)(u.Z,{children:"Admin"}),(0,at.jsxs)(l.Z,{className:"input-inner",value:n.user_id,fullWidth:!0,label:"Admin",onChange:this.handleAdminChange,children:[(0,at.jsx)(d.Z,{value:"",children:"select admin"}),this.state.adminList.map((function(t,e){return(0,at.jsxs)(d.Z,{value:t.id,children:[t.name," | ",t.mobile]},e)}))]})]})}),(0,at.jsx)(s.ZP,{item:!0,xs:3,className:"create-input",children:(0,at.jsx)(p.Z,{label:"Invoice Number",variant:"outlined",fullWidth:!0,value:n.invoice_number,onChange:function(e){return t.handleDefaultChange(e,"invoice_number")}})}),(0,at.jsx)(s.ZP,{item:!0,xs:3,className:"create-input p-invoice-date",children:(0,at.jsx)(E._,{dateAdapter:I.y,children:(0,at.jsx)(Y.M,{label:"Invoice Date",value:n.invoice_date,inputFormat:"DD/MM/YYYY",onChange:function(e){return t.updateFormValues(e,"invoice_date")},renderInput:function(t){return(0,at.jsx)(p.Z,ct(ct({},t),{},{error:r.invoice_date}))}})})}),(0,at.jsxs)(s.ZP,{item:!0,xs:12,className:" create-input p-add-product border-radius-0",children:[(0,at.jsxs)("h3",{children:["Product List ",(0,at.jsx)(f.Z,{variant:"contained",className:"add-button",onClick:function(){return t.handleAddNewProduct()},children:"Add Product"})]}),(0,at.jsx)(B.Z,{component:G.Z,children:(0,at.jsxs)(q.Z,{sx:{minWidth:650},"aria-label":"simple table",className:"ratn-table-wrapper",children:[(0,at.jsx)(z.Z,{className:"ratn-table-header",children:(0,at.jsxs)(X.Z,{children:[(0,at.jsx)(R.Z,{children:"Product Name"}),(0,at.jsx)(R.Z,{children:"Certificate Number"}),(0,at.jsx)(R.Z,{children:"Total Weight"}),(0,at.jsx)(R.Z,{children:"Size"}),(0,at.jsx)(R.Z,{children:"Sub Total"}),(0,at.jsx)(R.Z,{children:"Making Charge"}),(0,at.jsx)(R.Z,{children:"Tax"}),(0,at.jsx)(R.Z,{children:"Tag Price"}),(0,at.jsx)(R.Z,{children:"Action"})]})}),(0,at.jsx)(T.Z,{children:n.products.map((function(e,n){return(0,at.jsxs)(X.Z,{children:[(0,at.jsx)(R.Z,{children:e.product_name}),(0,at.jsx)(R.Z,{children:e.certificate_no}),(0,at.jsx)(R.Z,{children:e.total_weight}),(0,at.jsx)(R.Z,{children:e.size_name}),(0,at.jsx)(R.Z,{children:e.sub_price}),(0,at.jsx)(R.Z,{children:e.making_charge}),(0,at.jsx)(R.Z,{children:e.total_tax}),(0,at.jsx)(R.Z,{children:e.total}),(0,at.jsx)(R.Z,{children:(0,at.jsx)(h.Z,{className:"del-icon",color:"error",component:"label",onClick:function(){return t.handleProductDelete(n)},children:(0,at.jsx)(D.Z,{})})})]},n)}))})]})})]}),(0,at.jsx)(s.ZP,{item:!0,xs:8,children:(0,at.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,at.jsx)(s.ZP,{item:!0,xs:12,className:"create-input pl-0",children:(0,at.jsx)(m.Z,{className:"description",minRows:3,placeholder:"Notes",style:{width:"100%"},value:n.notes,onChange:function(e){return t.handleDefaultChange(e,"notes")}})}),(0,at.jsx)(s.ZP,{item:!0,xs:6,className:"create-input pl-0",children:(0,at.jsxs)(c.Z,{fullWidth:!0,children:[(0,at.jsx)(u.Z,{children:"Payment Mode"}),(0,at.jsxs)(l.Z,{className:"input-inner",value:n.payment_mode,fullWidth:!0,label:"Payment Mode",onChange:function(e){return t.handleDefaultChange(e,"payment_mode")},children:[(0,at.jsx)(d.Z,{value:"cash",children:"Cash"}),(0,at.jsx)(d.Z,{value:"online",children:"Online"})]})]})}),"online"==n.payment_mode?(0,at.jsx)(s.ZP,{item:!0,xs:6,className:"create-input",children:(0,at.jsx)(p.Z,{label:"Transaction No",variant:"outlined",fullWidth:!0,value:n.transaction_no,onChange:function(e){return t.handleDefaultChange(e,"transaction_no")}})}):null]})}),(0,at.jsx)(s.ZP,{item:!0,xs:4,children:(0,at.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"Taxable Amount",variant:"outlined",fullWidth:!0,value:n.taxable_amount,disabled:!0})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"CGST Tax",variant:"outlined",fullWidth:!0,value:n.cgst_tax,disabled:!0})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"SGST Tax",variant:"outlined",fullWidth:!0,value:n.sgst_tax,disabled:!0})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"IGST Tax",variant:"outlined",fullWidth:!0,value:n.igst_tax,disabled:!0})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"Total Amount",variant:"outlined",fullWidth:!0,value:n.total_amount,disabled:!0})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"Discount",variant:"outlined",fullWidth:!0,value:n.discount,onChange:function(e){return t.handleDefaultChange(e,"discount")}})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"Total Payable",variant:"outlined",fullWidth:!0,value:n.total_payable,disabled:!0})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"Paid Amount",variant:"outlined",fullWidth:!0,value:n.paid_amount,onChange:function(e){return t.handleDefaultChange(e,"paid_amount")},error:r.paid_amount})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(p.Z,{label:"Due Amount",variant:"outlined",fullWidth:!0,value:n.due_amount,disabled:!0})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,className:"p-invoice-date create-input",children:(0,at.jsx)(E._,{dateAdapter:I.y,children:(0,at.jsx)(Y.M,{label:"Due Date",value:n.due_date,fullWidth:!0,inputFormat:"DD/MM/YYYY",onChange:function(e){return t.updateFormValues(e,"due_date")},renderInput:function(t){return(0,at.jsx)(p.Z,ct(ct({fullWidth:!0},t),{},{error:r.due_date}))}})})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,className:"p-invoice-date create-input",children:(0,at.jsx)(E._,{dateAdapter:I.y,children:(0,at.jsx)(Y.M,{label:"Settlement Date",value:n.settlement_date,fullWidth:!0,inputFormat:"DD/MM/YYYY",onChange:function(e){return t.updateFormValues(e,"settlement_date")},renderInput:function(t){return(0,at.jsx)(p.Z,ct(ct({fullWidth:!0},t),{},{error:r.settlement_date}))}})})})]})}),(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsxs)(g.Z,{spacing:1,direction:"row",className:"ratn-footer-buttons",justifyContent:"flex-end",children:[(0,at.jsx)(F.Z,{className:"conf-button",variant:"contained",type:"button",loading:P,disabled:P,onClick:this.handleSubmit,children:"Submit"}),P?null:(0,at.jsx)(f.Z,{variant:"outlined",className:"close-button",onClick:function(){return t.props.navigate("/super-admin/sales")},children:"Cancel"})]})})]}),(0,at.jsxs)(V.Z,{open:this.state.productDialog,onClose:this.handleProductDialogClose,fullWidth:!0,maxWidth:"lg",className:"ratn-dialog-wrapper",children:[(0,at.jsx)(A.Z,{children:"Add Product"}),(0,at.jsxs)(N.Z,{children:[(0,at.jsx)(W.Z,{}),(0,at.jsx)(o.Z,{sx:{flexGrow:1,m:.5},children:(0,at.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,at.jsx)(s.ZP,{item:!0,xs:3,children:(0,at.jsxs)(c.Z,{fullWidth:!0,error:Z.category_id,children:[(0,at.jsx)(u.Z,{children:"Category"}),(0,at.jsxs)(l.Z,{value:i.category_id,label:"Category",onChange:this.handleCategoryChange,defaultValue:"",children:[(0,at.jsx)(d.Z,{value:"",children:"Choose One"}),this.state.categoryList.map((function(t,e){return(0,at.jsx)(d.Z,{value:t.id,children:t.name},e)}))]})]})}),(0,at.jsx)(s.ZP,{item:!0,xs:3,children:(0,at.jsxs)(c.Z,{fullWidth:!0,error:Z.sub_category_id,children:[(0,at.jsx)(u.Z,{children:"Sub Category"}),(0,at.jsxs)(l.Z,{value:i.sub_category_id,label:"Sub Category",onChange:this.handleSubCategoryChange,defaultValue:"",children:[(0,at.jsx)(d.Z,{value:"",children:"Choose One"}),this.state.subCategoryList.map((function(t,e){return(0,at.jsx)(d.Z,{value:t.id,children:t.name},e)}))]})]})}),(0,at.jsx)(s.ZP,{item:!0,xs:6,children:(0,at.jsxs)(c.Z,{fullWidth:!0,error:Z.product_id,children:[(0,at.jsx)(u.Z,{children:"Product"}),(0,at.jsxs)(l.Z,{value:i.product_id,label:"Product",onChange:this.handleProductChange,defaultValue:"",children:[(0,at.jsx)(d.Z,{value:"",children:"Choose One"}),this.state.stockProductList.map((function(t,e){return(0,at.jsx)(d.Z,{value:t.id,children:t.name},e)}))]})]})}),"material"!=i.product_type?(0,at.jsx)(at.Fragment,{}):null,this.state.stockProductDetails.length&&i.product_id?(0,at.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,at.jsx)(c.Z,{fullWidth:!0,children:(0,at.jsx)(x.Z,{name:"stock_id",value:i.stock_id,onChange:this.handleProductFormStockChange,children:this.checkIfAllStockAdded()?null:(0,at.jsx)(B.Z,{component:G.Z,children:(0,at.jsxs)(q.Z,{children:[(0,at.jsx)(z.Z,{children:(0,at.jsxs)(X.Z,{children:[(0,at.jsx)(R.Z,{children:"Size Name"}),(0,at.jsx)(R.Z,{children:"Material Name"}),(0,at.jsx)(R.Z,{children:"Purity"}),(0,at.jsx)(R.Z,{children:"Weight"}),(0,at.jsx)(R.Z,{children:"Unit"}),(0,at.jsx)(R.Z,{children:"Quantity"})]})}),(0,at.jsx)(T.Z,{children:this.state.stockProductDetails.map((function(e,n){return t.checkIfStockAdded(e.stock_id)?null:(0,at.jsxs)(a.Fragment,{children:[(0,at.jsx)(X.Z,{children:(0,at.jsxs)(R.Z,{rowSpan:e.materials.length+1,children:[(0,at.jsx)(y.Z,{value:e.stock_id,control:(0,at.jsx)(_.Z,{})})," ",e.size_name]})}),e.materials.map((function(t,e){return(0,at.jsx)(a.Fragment,{children:(0,at.jsxs)(X.Z,{children:[(0,at.jsx)(R.Z,{children:t.material_name}),(0,at.jsx)(R.Z,{children:t.purity}),(0,at.jsx)(R.Z,{children:(0,j.XY)(t.weight,!0)}),(0,at.jsx)(R.Z,{children:t.unit_name}),(0,at.jsx)(R.Z,{children:t.quantity})]})},e)}))]},n)}))})]})})})}),(0,at.jsx)(c.Z,{fullWidth:!0,children:this.checkIfAllStockAdded()?(0,at.jsx)("h3",{children:"No Stock available"}):null})]}):null,"material"==i.product_type?(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsx)(B.Z,{component:G.Z,children:(0,at.jsxs)(q.Z,{sx:{minWidth:650},"aria-label":"simple table",className:"ratn-table-wrapper",children:[(0,at.jsx)(z.Z,{className:"ratn-table-header",children:(0,at.jsxs)(X.Z,{children:[(0,at.jsx)(R.Z,{children:"Material Name"}),(0,at.jsx)(R.Z,{children:"Purity"}),(0,at.jsx)(R.Z,{children:"Quantity"}),(0,at.jsx)(R.Z,{children:"Weight"})]})}),(0,at.jsx)(T.Z,{children:i.materials.map((function(e,n){return(0,at.jsxs)(X.Z,{children:[(0,at.jsx)(R.Z,{children:e.material_name}),(0,at.jsx)(R.Z,{children:e.purity}),(0,at.jsx)(R.Z,{children:(0,at.jsx)(p.Z,{label:"Quantity",variant:"outlined",fullWidth:!0,value:e.quantity,onChange:function(e){return t.handleMaterialFormChange(e,n,"quantity")},error:v[n].quantity})}),(0,at.jsx)(R.Z,{children:(0,at.jsx)(p.Z,{label:"Weight",variant:"outlined",fullWidth:!0,value:e.weight,onChange:function(e){return t.handleMaterialFormChange(e,n,"weight")},InputProps:{endAdornment:(0,at.jsx)(b.Z,{position:"start",children:e.unit_name})},error:v[n].weight})})]},n)}))})]})})}):null,(0,at.jsx)(s.ZP,{item:!0,xs:12,children:(0,at.jsxs)(g.Z,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,at.jsx)(f.Z,{variant:"contained",type:"button",onClick:this.handleProductSubmit,children:"Add Product"}),(0,at.jsx)(f.Z,{variant:"outlined",onClick:this.handleProductDialogClose,children:"Cancel"})]})})]})})]})]}),(0,at.jsxs)(V.Z,{open:this.state.deleteDialogOpen,onClose:this.handleDialogClose,children:[(0,at.jsx)(A.Z,{children:"Delete"}),(0,at.jsx)(N.Z,{children:(0,at.jsx)(W.Z,{id:"alert-dialog-slide-description",children:"Are you sure want to delete this record?"})}),(0,at.jsxs)(M.Z,{children:[(0,at.jsx)(f.Z,{onClick:this.handleDialogClose,children:"Close"}),(0,at.jsx)(f.Z,{onClick:this.handleDeleteConfirm,children:"Yes, Confirm"})]})]})]})}}])&&ut(e.prototype,n),r&&ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),P}(a.Component),gt=(0,O.Z)((0,w.RM)((0,r.connect)((function(t){return{adminList:t.superadmin.admin.items,productList:t.superadmin.product.items,actionCalled:t.superadmin.sales.actionCalled,createSuccess:t.superadmin.sales.createSuccess,editSuccess:t.superadmin.sales.editSuccess,successMessage:t.superadmin.sales.successMessage,errorMessage:t.superadmin.sales.errorMessage,productPriceInfo:t.superadmin.materialPrice.productPriceInfo,stockProductList:t.superadmin.stocks.productList,stockProductDetails:t.superadmin.stocks.productDetails,categoryList:t.superadmin.category.items,subCategoryList:t.superadmin.subCategory.items}}),(function(t){return{dispatch:t,actions:(0,Z.bindActionCreators)({salesStore:v.rr,salesUpdate:v.LR,adminList:k.N0,productList:S.Uu,materialPriceProductPriceInfo:C.zZ,stocksProducDetails:P.i7,stocksProductList:P.Db,categoryList:tt.wA,subCategoryList:K.NM},t)}}))((0,i.sx)({form:"SaleForm"})(mt))));function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function yt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _t(t,e){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_t(t,e)}function bt(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jt(t){return jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jt(t)}var Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_t(t,e)}(o,t);var e,n,a,r,i=(a=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jt(a);if(r){var n=jt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return bt(this,t)});function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).state={},e}return e=o,(n=[{key:"render",value:function(){return(0,at.jsx)(L.Z,{title:"Add New Sale",children:(0,at.jsx)("div",{children:(0,at.jsx)(gt,{})})})}}])&&yt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(a.Component),vt=(0,w.RM)((0,O.Z)((0,r.connect)((function(t){return{}}),(function(t){return{dispatch:t}}))(Zt)))}}]);