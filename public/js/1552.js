"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1552],{45862:(e,t,a)=>{a.d(t,{Px:()=>n,gN:()=>c,jv:()=>l,k0:()=>d});var s=a(80325),i=a(47092),r=a(45892);const l=e=>(e=(0,r.x0)(e,!0),t=>{s.A.get("/superadmin/categories".concat(e)).then((e=>{e.data.success&&t({type:i.YE,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{s.A.post("/superadmin/categories/store",e).then((e=>{t({type:i.tU,payload:e.data})})).catch((e=>{}))},c=(e,t)=>a=>{s.A.post("/superadmin/categories/update/".concat(e),t).then((e=>{a({type:i.x4,payload:e.data})})).catch((e=>{}))},d=(e,t)=>a=>{s.A.delete("/superadmin/categories/delete/".concat(e),t).then((e=>{a({type:i.RD,payload:e.data})})).catch((e=>{}))}},39167:(e,t,a)=>{a.d(t,{$A:()=>d,Af:()=>l,P3:()=>c,Y$:()=>n});var s=a(80325),i=a(59385),r=a(45892);const l=e=>(e=(0,r.x0)(e,!0),t=>{s.A.get("/superadmin/materials".concat(e)).then((e=>{e.data.success&&t({type:i.Vf,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{s.A.post("/superadmin/materials/store",e).then((e=>{t({type:i.O6,payload:e.data})})).catch((e=>{}))},c=(e,t)=>a=>{s.A.post("/superadmin/materials/update/".concat(e),t).then((e=>{a({type:i.oH,payload:e.data})})).catch((e=>{}))},d=(e,t)=>a=>{s.A.delete("/superadmin/materials/delete/".concat(e),t).then((e=>{a({type:i.Yq,payload:e.data})})).catch((e=>{}))}},10303:(e,t,a)=>{a.d(t,{Yj:()=>l,aI:()=>n,rZ:()=>c,xV:()=>d});var s=a(80325),i=a(60937),r=a(45892);const l=e=>(e=(0,r.x0)(e,!0),t=>{s.A.get("/superadmin/purities".concat(e)).then((e=>{e.data.success&&t({type:i.pD,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{s.A.post("/superadmin/purities/store",e).then((e=>{e.data.success&&t({type:i.cd,payload:e.data})})).catch((e=>{}))},c=(e,t)=>a=>{s.A.post("/superadmin/purities/update/".concat(e),t).then((e=>{e.data.success&&a({type:i.yI,payload:e.data})})).catch((e=>{}))},d=(e,t)=>a=>{s.A.delete("/superadmin/purities/delete/".concat(e),t).then((e=>{e.data.success&&a({type:i.mL,payload:e.data})})).catch((e=>{}))}},37972:(e,t,a)=>{a.d(t,{GR:()=>c,Jp:()=>l,YN:()=>d,t3:()=>n});var s=a(80325),i=a(12710),r=a(45892);const l=e=>(e=(0,r.x0)(e,!0),t=>{s.A.get("/superadmin/units".concat(e)).then((e=>{e.data.success&&t({type:i.OA,payload:e.data.data})})).catch((e=>{}))}),n=e=>t=>{s.A.post("/superadmin/units/store",e).then((e=>{e.data.success&&t({type:i.h3,payload:e.data})})).catch((e=>{}))},c=(e,t)=>a=>{s.A.post("/superadmin/units/update/".concat(e),t).then((e=>{e.data.success&&a({type:i.Zf,payload:e.data})})).catch((e=>{}))},d=(e,t)=>a=>{s.A.delete("/superadmin/units/delete/".concat(e),t).then((e=>{e.data.success&&a({type:i.NW,payload:e.data})})).catch((e=>{}))}},48164:(e,t,a)=>{a.d(t,{A:()=>M});var s=a(63696),i=a(52821),r=a(88441),l=a(55482),n=a(36122),c=a(41795),d=a(66107),o=a(26365),u=a(78976),p=a(59875),h=a(47998),m=a(63209),x=a(61095),y=a(45271),A=a(72839),g=a(49746),f=(a(50977),a(45892)),j=a(17243),b=a.n(j),v=a(39167),D=a(82602),C=a(32690),F=a(62540);function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=(0,D.Z)();class L extends s.Component{constructor(e){super(e),N(this,"loadMaterials",(e=>{this.props.actions.materialList({all:1,category_id:e||""})})),N(this,"getDefaultValues",(()=>({category_id:"",name:"",unit_id:"",status:1,purities:""}))),N(this,"handleFieldChange",(e=>{})),N(this,"resetForm",(()=>{let e={...this.getDefaultValues()};e.category_id=this.props.formValues.category_id,this.props.initialize(e)})),N(this,"renderTextField",(e=>{let{input:t,label:a,meta:{touched:s,error:i},...r}=e;return(0,F.jsx)(C.A,{className:"autocomplete-selectbox",fullWidth:!0,value:t.value,filterOptions:(e,t)=>S(e,t),selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:this.state.materialList,getOptionLabel:e=>"string"==typeof e?e:e.inputValue?e.inputValue:e.name,renderOption:(e,t)=>(0,F.jsx)("li",{...e,children:t.name}),freeSolo:!0,renderInput:e=>(0,F.jsx)(n.A,{...e,label:"Material",error:!(!s||!i),helperText:s&&i?i:"",...t,...r}),onInputChange:(e,t)=>{"handleMaterialChange"in this.props&&this.props.handleMaterialChange(t)}})})),N(this,"renderCategoryField",(e=>{let{input:t,label:a,meta:{touched:s,error:i},...r}=e;return(0,F.jsxs)(c.A,{fullWidth:!0,error:!(!s||!i),children:[a?(0,F.jsx)(d.A,{children:a}):null,(0,F.jsxs)(o.A,{label:a,fullWidth:!0,...t,...r,children:[(0,F.jsx)(u.A,{value:""}),this.state.categories.map(((e,t)=>(0,F.jsx)(u.A,{value:e.id,children:e.name},t)))]}),s&&i?(0,F.jsx)(p.A,{children:i}):null]})})),N(this,"renderUnitField",(e=>{let{input:t,label:a,meta:{touched:s,error:i},...r}=e;return(0,F.jsxs)(c.A,{fullWidth:!0,error:!(!s||!i),children:[a?(0,F.jsx)(d.A,{children:a}):null,(0,F.jsxs)(o.A,{label:a,fullWidth:!0,...t,...r,children:[(0,F.jsx)(u.A,{value:"",children:"select unit"}),this.state.units.map(((e,t)=>(0,F.jsx)(u.A,{value:e.id,children:e.name},t)))]}),s&&i?(0,F.jsx)(p.A,{children:i}):null]})})),N(this,"renderStatusField",(e=>{let{input:t,label:a,meta:{touched:s,error:i},...r}=e;return(0,F.jsxs)(c.A,{fullWidth:!0,error:!(!s||!i),children:[a?(0,F.jsx)(d.A,{children:a}):null,(0,F.jsxs)(o.A,{label:a,fullWidth:!0,...t,...r,children:[(0,F.jsx)(u.A,{value:"1",children:"Active"}),(0,F.jsx)(u.A,{value:"0",children:"Inactive"})]}),s&&i?(0,F.jsx)(p.A,{children:i}):null]})})),N(this,"getSelectedNames",(e=>{let t=[];for(let a=0;a<e.length;a++){let s=b().filter(this.state.purities,{id:e[a]});t.push(s[0].name)}return t})),N(this,"renderMaterialPurityField",(e=>{let{input:t,label:a,meta:{touched:s,error:i},...r}=e;return(0,F.jsxs)(c.A,{fullWidth:!0,error:!(!s||!i),children:[a?(0,F.jsx)(d.A,{children:a}):null,(0,F.jsx)(o.A,{label:a,fullWidth:!0,multiple:!0,...t,...r,value:""===t.value?[]:t.value,multi:"true",renderValue:e=>this.getSelectedNames(e).join(", "),children:this.state.purities.map((e=>(0,F.jsxs)(u.A,{value:e.id,className:"multi-select",children:[(0,F.jsx)(h.A,{checked:!!(t.value&&t.value.indexOf(e.id)>-1)}),(0,F.jsx)(m.A,{primary:e.name})]},e.id)))}),s&&i?(0,F.jsx)(p.A,{children:i}):null]})})),N(this,"handleCategoryChange",(e=>{this.props.categoryChange(e),this.loadMaterials(e)})),this.state={formData:"formData"in this.props?this.props.formData:null,categories:this.props.categories,units:this.props.units,purities:this.props.purities,submitSuccess:this.props.submitSuccess,materialList:this.props.materialList}}componentDidMount(){if(this.state.formData){let e={...this.state.formData};e.purities=(0,f.mq)(e.purities,"id"),this.props.initialize(e)}else this.props.initialize(this.getDefaultValues())}static getDerivedStateFromProps(e,t){let a={};return e.categories!==t.categories&&(a.categories=e.categories),e.units!==t.units&&(a.units=e.units),e.purities!==t.purities&&(a.purities=e.purities),e.submitSuccess!==t.submitSuccess&&(a.submitSuccess=e.submitSuccess),e.formData!==t.formData&&(a.formData=e.formData),e.materialList!==t.materialList&&(a.materialList=e.materialList),a}componentDidUpdate(e){if(this.state.submitSuccess&&this.resetForm(),this.props.formData!=e.formData&&this.state.formData){let e={...this.state.formData};e.purities=(0,f.mq)(e.purities,"id"),this.props.initialize(e)}}render(){const{handleSubmit:e,pristine:t,submitting:a}=this.props;return(0,F.jsx)("form",{onSubmit:e,children:(0,F.jsx)(x.A,{sx:{flexGrow:1},children:(0,F.jsxs)(y.Ay,{container:!0,spacing:2,children:[(0,F.jsx)(y.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,F.jsx)(l.D0,{name:"category_id",component:this.renderCategoryField,label:"Category",type:"select",onChange:(e,t)=>this.handleCategoryChange(t)})}),(0,F.jsx)(y.Ay,{item:!0,xs:6,md:3,className:"create-input",children:(0,F.jsx)(l.D0,{name:"name",component:this.renderTextField,label:"Material Name"})}),(0,F.jsx)(y.Ay,{item:!0,xs:6,md:2,className:"create-input",children:(0,F.jsx)(l.D0,{name:"unit_id",component:this.renderUnitField,label:"Unit",type:"select"})}),(0,F.jsx)(y.Ay,{item:!0,xs:6,md:4,className:"create-input",children:(0,F.jsx)(l.D0,{name:"purities",component:this.renderMaterialPurityField,label:"Purities",multi:!0,type:"select",defaultValue:[],onChange:e=>this.handleFieldChange(e)})}),(0,F.jsx)(y.Ay,{item:!0,xs:12,children:(0,F.jsxs)(A.A,{spacing:1,direction:"row",className:"modal-button-area ratn-footer-buttons",sx:{mb:2},children:[this.state.formData?(0,F.jsx)(g.A,{variant:"outlined",onClick:()=>this.props.handleCancel(),className:"close-button",children:"Cancel"}):null,(0,F.jsx)(g.A,{variant:"contained",className:"conf-button",type:"submit",children:"Submit"})]})})]})})})}}const M=(0,i.connect)((e=>({materialList:e.superadmin.material.items||[],formValues:(0,l.ru)("MaterialForm")(e,"category_id")})),(e=>({dispatch:e,actions:(0,r.bindActionCreators)({materialList:v.Af},e)})))((0,l.zW)({form:"MaterialForm",validate:e=>{const t={};return["name","category_id","unit_id","purities"].forEach((a=>{e[a]||(t[a]="Required")})),"purities"in e&&e.purities.length||(t.purities="Required"),t}})(L))}}]);