"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6345],{16345:function(e,t,s){s.r(t);var a=s(27378),i=s(23884),r=s(23434),n=s(10755),o=s(74154),c=s(8971),u=s(13040),l=s(59146),p=s(46265),d=s(74570),m=s(26803),h=s(69162),f=s(93033),y=s(77234),g=s(40372),b=s(83079),S=s(64125),w=s(72897),C=s(72359),P=s(57446),j=s(24246);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){L(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function M(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function k(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(l,e);var t,s,a,i,n,u=(i=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(i);if(n){var s=q(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return k(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),L(R(t=u.call(this,e)),"handlePagination",(function(e){t.setState({queryParams:D(D({},t.state.queryParams),{},{page:e})},(function(){t.loadListData()}))})),L(R(t),"loadListData",(function(){t.props.actions.materialList(t.state.queryParams)})),L(R(t),"handleEdit",(function(e){t.setState({editRow:e})})),L(R(t),"handleDelete",(function(e){t.props.actions.materialDelete(e.id)})),L(R(t),"handleCreate",(function(){t.setState({openDialog:!0,dialogTitle:"Create Material",editRow:null})})),L(R(t),"handleDialogClose",(function(e,s){s&&"backdropClick"==s||t.setState({openDialog:!1,editRow:null})})),L(R(t),"submit",(function(e){t.state.editRow?t.props.actions.materialUpdate(t.state.editRow.id,e):t.props.actions.materialCreate(e)})),L(R(t),"handleCancel",(function(){t.handleDialogClose(),t.setState({submitSuccess:!0},(function(){t.setState({submitSuccess:!1})}))})),L(R(t),"categoryChange",(function(e){t.setState({queryParams:D(D({},t.state.queryParams),{},{page:1,category_id:e})},(function(){t.loadListData()}))})),L(R(t),"handleMaterialChange",(function(e){t.setState({queryParams:D(D({},t.state.queryParams),{},{page:1,search:e})},(function(){t.loadListData()}))})),t.state=D(D({},t.props),{},{queryParams:{page:1,limit:50,category_id:"",search:""},openDialog:!1,isCreate:!0,editRow:null,categories:t.props.categories,units:t.props.units,purities:t.props.purities,createSuccess:!1,editSuccess:!1,deleteSuccess:!1,actionCalled:t.props.actionCalled,successMessage:t.props.successMessage,errorMessage:t.props.errorMessage,submitSuccess:!1}),t.columns=[{name:"name",display_name:"Material"},{name:"category",display_name:"Category"},{name:"unit",display_name:"Unit"},{name:"purities",display_name:"Purities",array_key:"name",raw:!0},{name:"status_display",display_name:"Status"}],t}return t=l,a=[{key:"getDerivedStateFromProps",value:function(e,t){var s={};return e.items!==t.items&&(s.items=e.items),e.total!==t.total&&(s.total=e.total),e.actionCalled!==t.actionCalled&&(s.actionCalled=e.actionCalled),e.successMessage!==t.successMessage&&(s.successMessage=e.successMessage),e.errorMessage!==t.errorMessage&&(s.errorMessage=e.errorMessage),e.categories!==t.categories&&(s.categories=e.categories),e.units!==t.units&&(s.units=e.units),e.purities!==t.purities&&(s.purities=e.purities),"createSuccess"in e&&e.createSuccess!==t.createSuccess&&(s.createSuccess=e.createSuccess),"editSuccess"in e&&e.editSuccess!==t.editSuccess&&(s.editSuccess=e.editSuccess),"deleteSuccess"in e&&e.deleteSuccess!==t.deleteSuccess&&(s.deleteSuccess=e.deleteSuccess),e.permissions!==t.permissions&&(s.permissions=e.permissions),s}}],(s=[{key:"componentDidMount",value:function(){this.loadListData(),this.props.actions.categoryList({all:1}),this.props.actions.unitList({all:1}),this.props.actions.purityList({all:1})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.actionCalled&&(this.state.createSuccess||this.state.editSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:C.Y1}),this.setState({queryParams:D(D({},this.state.queryParams),{},{page:1}),openDialog:!1,editRow:null,submitSuccess:!0},(function(){e.loadListData(),e.setState({submitSuccess:!1})}))):this.state.deleteSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:C.Y1}),this.handlePagination(1)):null!=this.state.errorMessage&&(this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:C.Y1})))}},{key:"render",value:function(){return(0,j.jsxs)(c.Z,{title:"Material",children:[(0,P.Fs)(this.state.permissions,"material","add")?(0,j.jsx)("div",{className:"tax-input p_view loans_view",children:(0,j.jsx)(y.Z,{onSubmit:this.submit,formData:this.state.editRow,categories:this.state.categories,units:this.state.units,purities:this.state.purities,handleCancel:this.handleCancel,categoryChange:this.categoryChange,submitSuccess:this.state.submitSuccess,handleMaterialChange:this.handleMaterialChange})}):null,(0,j.jsx)(r.ZP,{container:!0,spacing:o.dv,children:(0,j.jsx)(p.Z,{columns:this.columns,rows:this.state.items,page:this.state.queryParams.page,limit:this.state.queryParams.limit,total:this.state.total,handlePagination:this.handlePagination,actions:[{label:"Edit",onClick:this.handleEdit,color:"primary",show:(0,P.Fs)(this.state.permissions,"material","edit")},{label:"Delete",onClick:this.handleDelete,isDelete:!0,color:"error",show:(0,P.Fs)(this.state.permissions,"material","delete")}]})}),(0,j.jsxs)(d.Z,{className:"ratn-dialog-wrapper",open:this.state.openDialog,onClose:this.handleDialogClose,fullWidth:!0,maxWidth:"md",children:[(0,j.jsx)(f.Z,{children:this.state.dialogTitle}),(0,j.jsxs)(m.Z,{children:[(0,j.jsx)(h.Z,{}),(0,j.jsx)(y.Z,{onSubmit:this.submit,formData:this.state.editRow,categories:this.state.categories,units:this.state.units,purities:this.state.purities,handleCancel:this.handleCancel})]})]})]})}}])&&M(t.prototype,s),a&&M(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.Component);t.default=(0,w.RM)((0,u.Z)((0,i.connect)((function(e){return{items:e.superadmin.material.items,total:e.superadmin.material.total,categories:e.superadmin.category.items||[],units:e.superadmin.unit.items||[],purities:e.superadmin.purity.items||[],actionCalled:e.superadmin.material.actionCalled,createSuccess:e.superadmin.material.createSuccess,editSuccess:e.superadmin.material.editSuccess,deleteSuccess:e.superadmin.material.deleteSuccess,successMessage:e.superadmin.material.successMessage,errorMessage:e.superadmin.material.errorMessage,permissions:e.employee.permissions.permissions}}),(function(e){return{dispatch:e,actions:(0,n.bindActionCreators)({materialList:l._1,materialCreate:l.K5,materialUpdate:l.LX,materialDelete:l.Qh,categoryList:g.wA,unitList:b.d9,purityList:S.uH},e)}}))(x)))}}]);