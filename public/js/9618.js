"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9618],{46762:function(e,t,a){a.d(t,{Sl:function(){return o},V2:function(){return u},YU:function(){return i},ib:function(){return c},lj:function(){return l},oQ:function(){return d}});var r=a(69222),n=a(74099),s=a(57446),i=function(e){return e=(0,s.B7)(e,!0),function(t){r.Z.get("/manager/stock-histories".concat(e)).then((function(e){e.data.success&&t({type:n.wf,payload:e.data.data})})).catch((function(e){}))}},o=function(e){return function(t){r.Z.post("/manager/stock-histories/store",e).then((function(e){e.data.success&&t({type:n.x6,payload:e.data})})).catch((function(e){}))}},c=function(e){return function(t){r.Z.get("/manager/stock-histories/fetch/".concat(e)).then((function(e){e.data.success&&t({type:n.HR,payload:e.data.data})})).catch((function(e){}))}},l=function(e,t){return function(a){r.Z.post("/manager/stock-histories/update/".concat(e),t).then((function(e){e.data.success&&a({type:n.lI,payload:e.data})})).catch((function(e){}))}},u=function(e,t){return function(a){r.Z.delete("/manager/stock-histories/delete/".concat(e),t).then((function(e){e.data.success&&a({type:n.L4,payload:e.data})})).catch((function(e){}))}},d=function(e){return function(e){r.Z.get("/manager/materials").then((function(t){t.data.success&&e({type:n.fn,payload:t.data.data})})).catch((function(e){}))}}},96020:function(e,t,a){a.d(t,{$z:function(){return c},XQ:function(){return u},YZ:function(){return l},mx:function(){return i},xz:function(){return o}});var r=a(69222),n=a(41131),s=a(57446),i=function(e){return e=(0,s.B7)(e,!0),function(t){r.Z.get("/manager/workers".concat(e)).then((function(e){e.data.success&&t({type:n.QZ,payload:e.data.data})})).catch((function(e){}))}},o=function(e){return function(t){r.Z.post("/manager/workers/store",e).then((function(e){e.data.success&&t({type:n.ud,payload:e.data.data})})).catch((function(e){}))}},c=function(e){return function(t){r.Z.get("/manager/workers/fetch/".concat(e)).then((function(e){e.data.success&&t({type:n.tC,payload:e.data.data})})).catch((function(e){}))}},l=function(e,t){return function(a){r.Z.post("/manager/workers/update/".concat(e),t).then((function(e){e.data.success&&a({type:n.__,payload:e.data.data})})).catch((function(e){}))}},u=function(e,t){return function(a){r.Z.delete("/manager/workers/delete/".concat(e),t).then((function(e){e.data.success&&a({type:n.FC,payload:!0})})).catch((function(e){}))}}},39618:function(e,t,a){var r=a(27378),n=a(23884),s=a(9647),i=a(43564),o=a(23434),c=a(56793),l=a(64212),u=a(55378),d=a(60789),f=a(10418),h=a(28730),p=a(52359),m=a(78153),g=a(41485),y=a(57446),x=a(10755),j=a(46762),b=a(96020),Z=a(16655),v=a(72897),k=a(13040),w=(a(8971),a(74570)),C=a(16569),S=a(26803),M=a(69162),_=a(93033),D=a(62401),O=a(14442),P=a(67337),V=a(97722),F=a(49444),N=a(92146),W=a(47265),E=a(96616),q=a(68456),H=a(19265),R=a(98784),A=a.n(R),U=a(74099),Y=a(24246);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){$(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function z(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(16222).default.updateSyncErrors;var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(j,e);var t,a,r,n,s,x=(n=j,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(n);if(s){var a=X(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return z(this,e)});function j(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,j),$(G(t=x.call(this,e)),"getResetMaterial",(function(){return{materialFormValues:{id:0,material_id:"",material_name:"",weight:"",quantity:"",unit_name:"",unit_id:""},materialFormErrors:{material_id:!1,weight:!1,quantity:!1}}})),$(G(t),"handleWorkerChange",(function(e){t.updateFormValues(e.target.value,"user_id")})),$(G(t),"updateFormValues",(function(e,a){var r=t.state.formValues;r[a]=e,t.setState({formValues:r})})),$(G(t),"handleMaterialFormChange",(function(e,a){var r=t.state.materialFormValues;if(r[a]=e.target.value,t.setState({materialFormValues:r}),"material_id"==a){var n=A().filter(t.state.materials,{id:e.target.value});r.material_name=n[0].name,r.unit_id=n[0].unit_id,r.unit_name=n[0].unit,t.setState({materialFormValues:r})}})),$(G(t),"handleAddNewMaterial",(function(){t.setState(B({materialDialog:!0},t.getResetMaterial()))})),$(G(t),"handleMaterialDelete",(function(e){t.setState({deletingIndex:e,deleteDialogOpen:!0})})),$(G(t),"handleDialogClose",(function(e,a){a&&"backdropClick"==a||t.setState({deleteDialogOpen:!1})})),$(G(t),"handleDeleteConfirm",(function(){var e=t.state.formValues;e.materials.splice(t.state.deletingIndex,1),t.setState({formValues:e,deleteDialogOpen:!1})})),$(G(t),"handleMaterialDialogClose",(function(e,a){a&&"backdropClick"==a||t.setState({materialDialog:!1})})),$(G(t),"handleMaterialSubmit",(function(){if(!t.materialFormValidate()){var e=t.state.formValues;e.materials.push(t.state.materialFormValues),t.setState({formValues:e,materialDialog:!1})}})),$(G(t),"materialFormValidate",(function(){var e=t.state.materialFormValues,a=t.state.materialFormErrors,r=!1;return(0,y.xb)(e.material_id)?(a.material_id=!0,r=!0):a.material_id=!1,(0,y.xb)(e.weight)?(a.weight=!0,r=!0):a.weight=!1,(0,y.xb)(e.quantity)?(a.quantity=!0,r=!0):a.quantity=!1,t.setState({materialFormErrors:a}),r})),$(G(t),"handleSubmit",(function(){t.formValidate()||(t.setState({submitting:!0}),t.state.isCreateFrom?t.props.actions.stockHistoryCreate(t.state.formValues):t.props.actions.stockHistoryUpdate(t.state.formData.id,t.state.formValues))})),$(G(t),"formValidate",(function(){var e=t.state.formValues,a=t.state.formErros,r=!1;return(0,y.xb)(e.user_id)?(a.user_id=!0,r=!0):a.user_id=!1,(0,y.xb)(e.date)?(a.date=!0,r=!0):a.date=!1,0==e.materials.length&&(t.props.enqueueSnackbar("Please add at least one material",{variant:"error"}),r=!0),t.setState({formErros:a}),r}));var a="formData"in t.props?t.props.formData:null;return t.state=B(B({formData:a,isCreateFrom:!a,workers:t.props.workers,materials:t.props.materials,formValues:{user_id:"",date:null,materials:[]},formErros:{user_id:!1,date:!1},materialDialog:!1,deleteDialogOpen:!1,deletingIndex:0,submitting:!1},t.getResetMaterial()),{},{actionCalled:t.props.actionCalled,createSuccess:t.props.createSuccess,editSuccess:t.props.editSuccess,successMessage:t.props.successMessage,errorMessage:t.props.errorMessage}),t}return t=j,r=[{key:"getDerivedStateFromProps",value:function(e,t){var a={};return e.workers!==t.workers&&(a.workers=e.workers),e.materials!==t.materials&&(a.materials=e.materials),e.actionCalled!==t.actionCalled&&(a.actionCalled=e.actionCalled),e.createSuccess!==t.createSuccess&&(a.createSuccess=e.createSuccess),e.editSuccess!==t.editSuccess&&(a.editSuccess=e.editSuccess),e.successMessage!==t.successMessage&&(a.successMessage=e.successMessage),e.errorMessage!==t.errorMessage&&(a.errorMessage=e.errorMessage),a}}],(a=[{key:"componentDidMount",value:function(){if(this.props.actions.workerList({all:1}),this.props.actions.stockHistoryMaterials(),this.state.formData){var e=this.state.formData,t={user_id:e.to_user_id,date:e.editable_date,materials:e.materials};this.setState({formValues:t})}}},{key:"componentDidUpdate",value:function(){this.state.actionCalled&&(this.state.isCreateFrom?this.state.createSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:U.UN}),this.props.navigate("/employee/stock-histories")):(this.setState({submitting:!1}),this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:U.UN})):this.state.editSuccess?(this.props.enqueueSnackbar(this.state.successMessage,{variant:"success"}),this.props.dispatch({type:U.UN}),this.props.navigate("/employee/stock-histories")):(this.setState({submitting:!1}),this.props.enqueueSnackbar(this.state.errorMessage,{variant:"error"}),this.props.dispatch({type:U.UN})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.formValues,r=t.materialFormValues,n=t.formErros,s=t.materialFormErrors;return(0,Y.jsxs)(i.Z,{sx:{flexGrow:1},children:[(0,Y.jsxs)(o.ZP,{container:!0,spacing:2,className:"tax-input loans_view p_view",children:[(0,Y.jsx)(o.ZP,{item:!0,xs:6,className:"create-input",children:(0,Y.jsxs)(c.Z,{fullWidth:!0,error:n.user_id,children:[(0,Y.jsx)(l.Z,{children:"Worker"}),(0,Y.jsxs)(u.Z,{value:a.user_id,fullWidth:!0,label:"Supplier",className:"input-inner",onChange:this.handleWorkerChange,children:[(0,Y.jsx)(d.Z,{value:"",children:"select worker"}),this.state.workers.map((function(e,t){return(0,Y.jsx)(d.Z,{value:e.id,children:e.name},t)}))]})]})}),(0,Y.jsx)(o.ZP,{item:!0,xs:6,className:"create-input",children:(0,Y.jsx)(O._,{dateAdapter:D.y,children:(0,Y.jsx)(P.M,{label:"Date",value:a.date,inputFormat:"DD/MM/YYYY",onChange:function(t){return e.updateFormValues(t,"date")},renderInput:function(e){return(0,Y.jsx)(f.Z,B(B({},e),{},{fullWidth:!0,error:n.date}))}})})})]}),(0,Y.jsxs)(o.ZP,{container:!0,spacing:2,className:"tax-input loans_view",children:[(0,Y.jsxs)(o.ZP,{item:!0,xs:12,className:"p-add-product create-input",children:[(0,Y.jsxs)("h3",{className:"p_heading_list",children:["Material List ",(0,Y.jsx)(h.Z,{variant:"contained",className:"add-button",onClick:function(){return e.handleAddNewMaterial()},children:"Add Material"})]}),(0,Y.jsx)(E.Z,{component:H.Z,className:"ratn-table-wrapper",children:(0,Y.jsxs)(V.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,Y.jsx)(F.Z,{className:"ratn-table-header p_view",children:(0,Y.jsxs)(q.Z,{children:[(0,Y.jsx)(W.Z,{children:"Material Name"}),(0,Y.jsx)(W.Z,{children:"Weight"}),(0,Y.jsx)(W.Z,{children:"Quantity"}),(0,Y.jsx)(W.Z,{children:"Action"})]})}),(0,Y.jsx)(N.Z,{children:a.materials.map((function(t,a){return(0,Y.jsxs)(q.Z,{children:[(0,Y.jsx)(W.Z,{children:t.material_name}),(0,Y.jsx)(W.Z,{children:t.weight?t.weight+" "+t.unit_name:""}),(0,Y.jsx)(W.Z,{children:t.quantity}),(0,Y.jsx)(W.Z,{children:(0,Y.jsx)(p.Z,{color:"error",component:"label",onClick:function(){return e.handleMaterialDelete(a)},children:(0,Y.jsx)("span",{className:"del-hr-icon",children:(0,Y.jsx)(Z.Z,{})})})})]},a)}))})]})})]}),(0,Y.jsx)(o.ZP,{item:!0,xs:12,children:(0,Y.jsxs)(m.Z,{spacing:1,direction:"row",className:"ratn-footer-buttons",justifyContent:"flex-end",style:{paddingRight:"16px",paddingBottom:"16px"},children:[(0,Y.jsx)(h.Z,{variant:"contained",className:"conf-button",type:"button",onClick:this.handleSubmit,children:"Save"}),(0,Y.jsx)(h.Z,{variant:"outlined",className:"close-button",onClick:function(){return e.props.navigate("/employee/stock-histories")},children:"Cancel"})]})})]}),(0,Y.jsxs)(w.Z,{open:this.state.materialDialog,onClose:this.handleMaterialDialogClose,fullWidth:!0,maxWidth:"md",className:"ratn-dialog-wrapper",children:[(0,Y.jsx)(_.Z,{children:"Add Material"}),(0,Y.jsxs)(S.Z,{children:[(0,Y.jsx)(M.Z,{}),(0,Y.jsx)(i.Z,{sx:{flexGrow:1,m:.5},children:(0,Y.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,Y.jsx)(o.ZP,{item:!0,xs:6,className:"create-input",children:(0,Y.jsxs)(c.Z,{fullWidth:!0,error:s.material_id,children:[(0,Y.jsx)(l.Z,{children:"Material"}),(0,Y.jsxs)(u.Z,{value:r.material_id,label:"Material",onChange:function(t){return e.handleMaterialFormChange(t,"material_id")},defaultValue:"",children:[(0,Y.jsx)(d.Z,{value:""}),this.state.materials.map((function(e,t){return(0,Y.jsx)(d.Z,{value:e.id,children:e.name},t)}))]})]})}),(0,Y.jsx)(o.ZP,{item:!0,xs:3,className:"create-input",children:(0,Y.jsx)(f.Z,{label:"Weight",variant:"outlined",fullWidth:!0,value:r.weight,onChange:function(t){return e.handleMaterialFormChange(t,"weight")},error:s.weight,InputProps:{endAdornment:(0,Y.jsx)(g.Z,{position:"start",children:r.unit_name})}})}),(0,Y.jsx)(o.ZP,{item:!0,xs:3,className:"create-input",children:(0,Y.jsx)(f.Z,{label:"Quantity",variant:"outlined",fullWidth:!0,value:r.quantity,onChange:function(t){return e.handleMaterialFormChange(t,"quantity")},error:s.quantity})}),(0,Y.jsx)(o.ZP,{item:!0,xs:12,className:"create-input",children:(0,Y.jsxs)(m.Z,{spacing:1,direction:"row",justifyContent:"flex-end",children:[(0,Y.jsx)(h.Z,{variant:"contained",type:"button",onClick:this.handleMaterialSubmit,children:"Add"}),(0,Y.jsx)(h.Z,{variant:"outlined",onClick:this.handleMaterialDialogClose,children:"Cancel"})]})})]})})]})]}),(0,Y.jsxs)(w.Z,{open:this.state.deleteDialogOpen,onClose:this.handleDialogClose,className:"ratn-dialog-wrapper",fullWidth:!0,maxWidth:"md",children:[(0,Y.jsx)(_.Z,{children:"Delete"}),(0,Y.jsx)(S.Z,{children:(0,Y.jsx)(M.Z,{id:"alert-dialog-slide-description",children:"Are you sure want to delete this record?"})}),(0,Y.jsxs)(C.Z,{children:[(0,Y.jsx)(h.Z,{onClick:this.handleDialogClose,children:"Close"}),(0,Y.jsx)(h.Z,{onClick:this.handleDeleteConfirm,children:"Yes, Confirm"})]})]})]})}}])&&L(t.prototype,a),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),j}(r.Component);t.Z=(0,k.Z)((0,v.RM)((0,n.connect)((function(e){return{workers:e.manager.worker.items,materials:e.manager.stockHistory.materials,actionCalled:e.manager.stockHistory.actionCalled,createSuccess:e.manager.stockHistory.createSuccess,editSuccess:e.manager.stockHistory.editSuccess,successMessage:e.manager.stockHistory.successMessage,errorMessage:e.manager.stockHistory.errorMessage}}),(function(e){return{dispatch:e,actions:(0,x.bindActionCreators)({stockHistoryCreate:j.Sl,stockHistoryUpdate:j.lj,workerList:b.mx,stockHistoryMaterials:j.oQ},e)}}))((0,s.sx)({form:"StockHistoryForm"})(J))))}}]);